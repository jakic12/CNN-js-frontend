{"version":3,"sources":["CNN-js/cnn.js","CNN-js/math.js","CNN-js/datasetProcessor.js","components/Sidebar.jsx","components/Logo.jsx","components/TopBar.jsx","components/TrainingIndicator.jsx","components/Hint.jsx","components/SpringButton.jsx","screens/Dashboard.jsx","other/testDataset.js","other/api.js","redux/actions/networks.js","components/NetworkCard.jsx","redux/actions/servers.js","components/ServerLogin.jsx","components/Error.jsx","components/AnimatedFullScreenCard.jsx","screens/Networks.jsx","other/utils.js","components/LayerCanvas.jsx","components/NetworkShapeVisual.jsx","components/KeyValueTable.jsx","components/NetworkPropagation.jsx","redux/actions/datasets.js","screens/Network.jsx","screens/Training.jsx","other/TrainingController.js","components/SelectableBigNetworkList.jsx","components/NetworkSelect.jsx","components/DatasetCard.jsx","components/SelectableBigDatasetList.jsx","components/DatasetSelect.jsx","screens/StartTraining.jsx","redux/actions/training.js","screens/Datasets.jsx","components/ButtonWithConfirmation.jsx","components/ConfusionMatrix.jsx","components/Table.jsx","screens/TrainingProgress.jsx","screens/Dataset.jsx","components/App.jsx","redux/reducers/colors.js","redux/reducers/structure.js","redux/reducers/networks.js","redux/reducers/servers.js","redux/reducers/training.js","redux/reducers/datasets.js","redux/reducers/index.js","redux/actions/colors.js","redux/actions/structure.js","redux/reducers/hints.js","serviceWorker.js","index.js","res/cnnjs-logo.svg","res/arrow.png","CNN-js/imageProcessor.js"],"names":["require","matrixMultiply","matrixDot","transpose","correlate","convolute","doubleInverse","maxPool","getDimension","flattenDeep","matrixAdd","deepMap","backPropagateCorrelation","update2Dmatrix","maxIndex","sum","sigm","x","Math","exp","ActivationFunctions","RELU","norm","derivative","SIGMOID","TANH","tanh","pow","CNN","shape","confirmShape","this","initialShape","map","s","Object","assign","applyActivationFunctionToShape","errorF","expected","actual","dErrorF","learningRate","layers","dlayers","weights","biases","serializeParams","forEach","p","randomBiasF","Array","length","fill","_","i","type","LayerType","FC","FLATTEN","l","d","h","w","fan_in","fan_out","random","sqrt","CONV","k","f","dataset","epochs","decay","onProgress","onEnd","epoch","error","correct","example","out","forwardPropagate","input","backpropagate","output","updateWeights","getError","classCount","netOut","data","Error","POOL","v","isNaN","af","returnArray","dout","j","reduce","a","b","daf","y","darray","i1","temp","dF","dI","dB","dIn","maxCoords","z","coords","afName","cm","stats","avgSum","precision","recall","f1Score","nanCount","avg","accuracy","INPUT","ActivationFunction","Layer","NetworkArchitectures","LeNet5","LeNet5Color","r","a1","inputs","filters","stride","padding","F","D","H","parseInt","W","filter","filterZ","j1","max","Infinity","module","exports","coordinateMode","layer2d","outY","outX","outLayer","y1","x1","arr1","acc","val","concat","dOut","m","f_d","f_i","f_j","dOut_i","dOut_j","in_i1","in_j1","in_d","in_i","in_j","f_i1","f_j1","dOutM","dA","c","softmax","sum1","index","deepNormalize","arr","max1","e","vectorize","label","outArr","deepCopyArrayShape","openDatasetFromBuffer","buffer","imageColorDepth","imageSize","datasetArray","Uint8Array","imageChannelPixelCount","imagePixelCount","rowCount","console","log","n","datasetToUint8Array","vectorizeDatasetLabels","outLength","stringToUint8Array","str","buf","ArrayBuffer","bufView","strLen","charCodeAt","uint8ArrayToString","outStr","String","fromCharCode","apply","subarray","normalizeInputData","SidebarWrapper","styled","aside","props","sidebarwidth","darkMode","background","primarycolor","SidebarInside","div","SidebarItemLink","NavLink","attrs","activeClassName","primarytextcolor","CustomRightIcon","img","connect","state","colors","screens","structure","screen","ScreenIcon","icon","fullName","id","sidebarId","to","path","exact","exactLink","style","paddingRight","height","width","customRightIcon","Logo","LogoImg","LogoText","h2","textcolor","src","logo","alt","TopBarStyled","topbarheight","topbarbackground","AboveSidebar","AboveScreens","keys","training","flat","size","color","HintWrapper","xRight","yBottom","ArrowImage","HintText","yFlip","Hint","domId","text","onClick","forceFlipY","forceDontFlipY","disablePadding","React","useState","setUpdater","ref","document","getElementById","clickListener","removeEventListener","useEffect","addEventListener","eventListener","pos","getBoundingClientRect","flipX","window","innerWidth","flipY","innerHeight","arrow","transform","setTimeout","HintList","dispatch","nextHint","stopHints","hintId","hints","hintArray","SpringButtonStyled","animated","shrinkToContent","textColor","SpringButton","hovered","setHovered","clicked","setClicked","buttonStyle","useSpring","config","gentle","onMouseEnter","onMouseLeave","DashboardWrapper","CenterImage","CenterChild","Link","TabLink","tab","iconStyle","charAt","toUpperCase","slice","GoBanner","startHints","redirectToNetworks","setRedirectToNetworks","href","process","name","colorDepth","normalizeMax","deleteDatabase","indexedDB","openDb","Promise","resolve","reject","promiseDb","open","onupgradeneeded","event","db","target","result","objectStoreNames","contains","createObjectStore","keyPath","onsuccess","onerror","addRecord","store_name","then","tx","transaction","objectStore","put","getRecord","get","getAllRecordsAsObject","keyProp","openCursor","cursor","value","continue","getDataset","server","url","catch","fetch","headers","Authorization","apiToken","res","json","err","fetchNetworks","localExisting","deserialized","stringCNNIndex","o","method","response","getNetworks","networks","reduced","setNetwork","newNetwork","neuralNet","net_id","Date","getTime","JSON","parse","stringify","createNetwork","fetchNetwork","networkId","requestNetwork","saved","getNetwork","net","network","networkSuccess","networkError","setNetworkApi","cardWrapperCss","css","backgroundbyelevation","accenttextcolor","CardWrapper","CardWrapperNoLink","BottomWrapper","NetworkTitle","h4","NetworkImage","NetworkImageDiv","draggable","getRef","Wrapper","AddNetworkWrapper","nohover","StyledForm","form","StyledSubmit","StyledInput","StyledSelect","select","AddNetworkCard","onclick","setName","networkShapeIndex","setNetworkShapeIndex","show","setShow","primaryColor","onSubmit","preventDefault","networkArchitectures","onChange","evt","placeholder","NetworkCardParentWrapper","small","Title","h3","cardMode","NetworkCards","NetworkScreenTitleWrapper","FlexCenter","NetworkCardParent","children","title","customRightButton","loginToServer","user","pass","body","token","login","ServerLoginWrapper","subaccenttextcolor","StyledInputButton","ErrorDiv","errorcolor","loginServer","unload","setUser","setPass","translateError","stack","rotate","keyframes","StyledReplay","MdReplay","spinning","retryFunction","animation","setAnimation","toString","AnimatedCard","startFromElement","contentFunction","fullscreen","onCloseCallback","innerDivRef","setInnerDivRef","wrapperRef","setWrapperRef","setResizeUpdater","closing","setClosing","closed","setClosed","prevStyle","startComputedStyle","getComputedStyle","opacity","wrapperDivStyle","top","left","innerDivStyle","startAnimatedProps","boxShadow","borderWidth","cardProps","from","borderRadius","borderColor","borderStyle","overflow","clamp","onRest","wrapperProps","resizeHandler","boxSizing","DownloadButton","InnerNetworkSelect","FileSelect","ConfirmButton","Networks","networkGroupsSmall","downloadRef","importServer","undefined","importNetworkName","servers","uniqueName","isLoading","setState","prevState","key","NetworkCard","createNewNetwork","ServerLogin","AnimatedFullScreenCard","close","onDrop","acceptedFiles","file","reader","FileReader","onabort","onload","networkJSON","readAsText","getRootProps","getInputProps","Component","maxProperties","dataArray","minProperties","min","array","setRef","imageData","prev","positiveSlice","negativeSlice","getContext","putImageData","ImageData","Uint8ClampedArray","WrapperCard","NetworkVisualWrapper","NetworkLayer","FilterLayer","NetworkFilterAndInput","NetworkLayerWrapper","LayerTypeTitle","h5","LayerSpacer","getSliceSize","normalizedLayer","getFilterSliceSize","sliceSize","filterSize","LAYER_STACK_slice","LAYER_STACK_filter_wrapper","LAYER_STACK_FILTER_inner","LAYER_STACK_wrapper","LAYER_STACK_slice_component","layer","withData","layerNormalized","extended","layerData","filterData","sliceheight","layerSliceProps","filterProps","sliceSizeProps","LayerCanvas","position","LAYER_STACK","withFilter","sliceWidth","sliceHeight","wrapperStyle","marginTop","marginLeft","normalizeLayers","nanValue","NaN","normalized","normalizedRecord","normalizeData","setExtended","layersNormalized","layerShape","find","Card","Key","Value","KeyValueWrapper","editFunction","include","PropagationWrapper","FirstLayerDisplay","OutputLayer","Row","tr","OutputTable","table","Prediction","round","rawData","image","setOutput","imageArray","setImageArray","softmaxed","setSoftmaxed","imageToArray","imageArr","textAlign","sort","inner","labels","datasetsSuccess","datasets","fetchDatasets","testDataset","full","getDatasets","datasetId","metadata","responded","arrayBuffer","newDataset","message","fetchDataset","requestDataset","datasetSuccess","datasetError","requestNewDataset","apiNewDataset","newDatasetSuccess","NetworkWrapper","Subtitle","ImageSelect","UploadRoot","getDatasetLen","Network","match","params","serverUniqueName","uploadedImage","selectedDatasetImageIndex","checkForError","bind","refreshRequestSent","needToRefreshNetwork","notLoggedIn","redirect","pathname","fileName","createElement","URL","createObjectURL","Blob","download","appendChild","click","removeChild","exportText","replace","NetworkShapeVisual","networkNew","accept","selectedDatasetIndex","readAsArrayBuffer","options","items","dId","fontSize","NetworkPropagation","inputArray","datasetProps","newValue","networkLoading","TrainingWrapper","TrainingHeader","Column","TrainingList","customLinkFunction","row","StartButton","TrainingScreenWrapper","TrainingScreenTitleWrapper","Training","trained","_row","TrainingController","trainingParams","datasetToBeTrained","emitEvent","trainingInstance","Worker","postMessage","trainingProps","cmd","terminate","eventsListeners","fn","push","FullCenter","SelectableBigNetworkList","onSelect","refreshFunction","lastId","selected","serversWithError","setServersWithError","NetworkSelectWrapper","SelectNetworkWrapper","InnerNoOverflow","innerRef","onNetworkSelect","selectedId","selectId","setOpen","closeCard","DatasetImage","display","flexGrow","DatasetImageDiv","DatasetTitle","serverId","AddDatasetWrapper","InnerDatasetSelect","ParameterRow","ParameterName","ParameterInput","LeftRight","LeftRightChild","StyledTextAreaWrapper","StyledTextArea","textarea","AddDatasetCard","newDatasetConnected","rawDataset","setRawDataset","setFileName","setImageSize","setColorDepth","setNormalizeMax","crop","setCrop","setError","setLabels","split","binaryStr","SelectableBigDatasetList","firstId","DatasetCard","serverDatasetsError","DatasetSelectWrapper","SelectDatasetWrapper","onDatasetSelect","TwoPart","TwoPartChild","TwoPartVertical","TwoPartVerticalChild","StartTrainingButtonWrapper","StartTraining","datasetServer","networkServer","batch_size","splice","arrayUnique","startTraining","trainedNetwork","trainingProgress","startLearning","Datasets","serverDatasetsLoading","heigh","ButtonWrapper","onConfirm","StyledTable","StyledRow","StyledData","td","tint","StyledDataFlipped","StyledDataStart","StyledCenterData","TableContainer","TableMenuTop","TableMenuRestBottom","TableMenuLeft","TableRest","updateVar","statsCallback","setCm","normalizedCm","setNormalizedCm","setStats","loading","setLoading","instance","confusion","stats1","confusionMatrixStats","confusionMatrix","predictedCount","statName","TableWrapper","TableRow","TableColumn","keyInner","ChardCard","ChartWrapper","chartRef","chartInstance","update","legend","scales","xAxes","ticks","maxX","suggestedMin","suggestedMax","reference","TopBottom","TopBottomChild","TrainingProgressWrapper","TrainingProgress","serverName","trainingData","errArr","accuracyArr","Table","ButtonWithConfirmation","ConfusionMatrix","DatasetWrapper","PreviewWrapper","Preview","PreviewControls","PreviewButton","Dataset","datasetData","datasetPreviewIndex","datasetPreviewSize","selectedNetwork","selectedNetworkServer","confusionStats","needToRefreshDataset","datasetsError","paddingLeft","paddingTop","component","Dashboard","FaQuestion","MdPhotoLibrary","MdSchool","TrainingIndicator","AppWrapper","SideAndScreens","ScreenSwitcher","localStorage","getItem","defaultState","savedServers_array","savedServers","datasetsLoading","combineReducers","action","property","servers_store","setItem","learningRateArr","serverCopy","Boolean","location","hostname","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","logger","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","Jimp","resizeImage","sizeDim","greyscale","resize","read","resizedImage","pixel","intToRGBA","getPixelColor","g","arrayToImage","writeTo","setPixelColor","rgbaToInt","write","getBuffer","AUTO"],"mappings":"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","file":"static/js/main.2e0cf208.chunk.js","sourcesContent":["\"use strict\";\r\n\r\nvar {\r\n  matrixMultiply,\r\n  matrixDot,\r\n  transpose,\r\n  convolute,\r\n  doubleInverse,\r\n  correlate,\r\n  getDimension,\r\n  maxPool,\r\n  flattenDeep,\r\n  matrixAdd,\r\n  deepMap,\r\n  backPropagateCorrelation,\r\n  update2Dmatrix,\r\n  maxIndex,\r\n  sum,\r\n} = require(\"./math\");\r\n\r\nconst sigm = x => 1 / (1 + Math.exp(-x));\r\nexport const ActivationFunctions = {\r\n  RELU: {norm: x => (x > 0 ? x : 0), derivative: x => (x > 0 ? 1 : 0)},\r\n  SIGMOID: {\r\n    norm: sigm,\r\n    derivative: x => sigm(x) * (1 - sigm(x)), //x => x * (1 - x) /*dSigmoidWithoutSigmoid*/,\r\n  },\r\n  TANH: {norm: Math.tanh, derivative: x => 1 - Math.pow(Math.tanh(x), 2)},\r\n};\r\n\r\n/**\r\n * Convolutional neural network, recieves a shape, give it data, train in and save it\r\n */\r\nexport class CNN {\r\n  /**\r\n   * The constructor takes in the shape of the network and\r\n   * initalizes weights and filters corresponding to the shape\r\n   * @param {Array<Layer>} shape Array of Layer instances or a serialized network\r\n   */\r\n  constructor(shape) {\r\n    if (shape.shape) {\r\n      CNN.confirmShape(shape.shape);\r\n      this.initialShape = shape.initialShape.map(s => Object.assign({}, s));\r\n      this.shape = CNN.applyActivationFunctionToShape(shape.initialShape);\r\n\r\n      this.errorF = (expected, actual) => Math.pow(actual - expected, 2) / 2;\r\n      this.dErrorF = (expected, actual) => actual - expected;\r\n\r\n      this.learningRate = shape.learningRate;\r\n\r\n      this.layers = shape.layers;\r\n      this.dlayers = shape.dlayers;\r\n      this.weights = shape.weights;\r\n      this.biases = shape.biases;\r\n      this.serializeParams = shape.serializeParams;\r\n      if (shape.serializeParams) {\r\n        shape.serializeParams.forEach(p => {\r\n          this[p] = shape[p];\r\n        });\r\n      }\r\n    } else {\r\n      CNN.confirmShape(shape);\r\n      this.initialShape = shape.map(s => Object.assign({}, s));\r\n      this.shape = CNN.applyActivationFunctionToShape(shape);\r\n\r\n      const xavier = (fan_in, fan_out) =>\r\n        Math.random() * Math.sqrt(6 / (fan_in + fan_out));\r\n      const kaiming = (fan_in, fan_out) =>\r\n        (Math.random() * 2 - 1) * Math.sqrt(2 / fan_in);\r\n      const randomBiasF = () => 0;\r\n      this.errorF = (expected, actual) => Math.pow(actual - expected, 2) / 2;\r\n      this.dErrorF = (expected, actual) => actual - expected;\r\n\r\n      this.learningRate = -0.01;\r\n\r\n      this.layers = new Array(shape.length).fill(0).map((_, i) => {\r\n        if (\r\n          shape[i].type == LayerType.FC ||\r\n          shape[i].type == LayerType.FLATTEN\r\n        ) {\r\n          return new Array(shape[i].l).fill(0);\r\n        } else {\r\n          return new Array(shape[i].d)\r\n            .fill(0)\r\n            .map(() =>\r\n              new Array(shape[i].h)\r\n                .fill(0)\r\n                .map(() => new Array(shape[i].w).fill(0)),\r\n            );\r\n        }\r\n      });\r\n\r\n      this.dlayers = []; // dlayers are filled on the backpropagation step\r\n\r\n      this.weights = new Array(shape.length).fill(0).map((_, i) => {\r\n        if (i != 0) {\r\n          if (shape[i].type == LayerType.FC) {\r\n            // if layer is FC or FLATTEN, init a weight matrix\r\n            return new Array(shape[i - 1].l)\r\n              .fill(0)\r\n              .map(() =>\r\n                new Array(shape[i].l)\r\n                  .fill(0)\r\n                  .map(l => xavier(shape[i - 1].l, shape[i].l)),\r\n              );\r\n          } else if (shape[i].type == LayerType.CONV) {\r\n            // else initialize a new filter\r\n            return new Array(shape[i].k)\r\n              .fill(0)\r\n              .map(() =>\r\n                new Array(shape[i - 1].d)\r\n                  .fill(0)\r\n                  .map(() =>\r\n                    new Array(shape[i].f)\r\n                      .fill(0)\r\n                      .map(() =>\r\n                        new Array(shape[i].f)\r\n                          .fill(0)\r\n                          .map((_, l) =>\r\n                            kaiming(\r\n                              shape[i - 1].w * shape[i - 1].d * shape[i - 1].h,\r\n                            ),\r\n                          ),\r\n                      ),\r\n                  ),\r\n              );\r\n          }\r\n        }\r\n      });\r\n\r\n      // init biases as the same sizes of their layers\r\n      this.biases = new Array(shape.length).fill(0).map((_, i) => {\r\n        if (i != 0) {\r\n          if (shape[i].type == LayerType.FC) {\r\n            return new Array(this.shape[i].l).fill(0).map(randomBiasF);\r\n          } else {\r\n            return new Array(this.shape[i].d).fill(0).map(randomBiasF);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  static applyActivationFunctionToShape(shape) {\r\n    return shape.map(s =>\r\n      s.afName\r\n        ? Object.assign(s, {\r\n            af: ActivationFunctions[s.afName].norm,\r\n            daf: ActivationFunctions[s.afName].derivative,\r\n          })\r\n        : s,\r\n    );\r\n  }\r\n\r\n  sgd({\r\n    dataset,\r\n    epochs,\r\n    learningRate = this.learningRate,\r\n    decay = 0,\r\n    onProgress,\r\n    onEnd,\r\n  }) {\r\n    this.learningRate = learningRate;\r\n\r\n    for (let epoch = 0; epoch < epochs; epoch++) {\r\n      let error = 0;\r\n      let correct = 0;\r\n      for (let example = 0; example < dataset.length; example++) {\r\n        let out = this.forwardPropagate(dataset[example].input);\r\n        this.backpropagate(dataset[example].output);\r\n        this.updateWeights();\r\n        const err = this.getError(dataset[example].output);\r\n        error += err;\r\n\r\n        if (maxIndex(out) === maxIndex(dataset[example].output)) {\r\n          correct++;\r\n        }\r\n      }\r\n\r\n      if (onProgress)\r\n        onProgress(\r\n          epoch,\r\n          correct / dataset.length,\r\n          error / dataset.length,\r\n          this.learningRate,\r\n        );\r\n      this.learningRate = learningRate / (1 + decay * epoch);\r\n    }\r\n\r\n    if (onEnd) onEnd();\r\n  }\r\n\r\n  confusionMatrix(dataset) {\r\n    const classCount = this.layers[this.layers.length - 1].length;\r\n    const out = new Array(classCount)\r\n      .fill(0)\r\n      .map(() => new Array(classCount).fill(0));\r\n    for (let i = 0; i < dataset.length; i++) {\r\n      const netOut = this.forwardPropagate(dataset[i].input);\r\n      if (dataset[i].output.length)\r\n        out[maxIndex(dataset[i].output)][maxIndex(netOut)]++;\r\n      else out[dataset[i].output][maxIndex(netOut)]++;\r\n    }\r\n    return out;\r\n  }\r\n\r\n  static confusionMatrixStats(cm) {\r\n    const classCount = cm.length;\r\n    const stats = {actual: []};\r\n    const avgSum = {precision: 0, recall: 0, f1Score: 0};\r\n    const nanCount = {precision: 0, recall: 0, f1Score: 0};\r\n\r\n    for (let i = 0; i < classCount; i++) {\r\n      const precision = cm[i][i] / sum(cm.map(k => k[i]));\r\n      const recall = cm[i][i] / sum(cm[i]);\r\n      stats.actual[i] = {\r\n        precision,\r\n        recall,\r\n        f1Score: (2 * (precision * recall)) / (precision + recall),\r\n      };\r\n      if (!isNaN(stats.actual[i].precision))\r\n        avgSum.precision += stats.actual[i].precision;\r\n      else nanCount.precision += 1;\r\n\r\n      if (!isNaN(stats.actual[i].recall))\r\n        avgSum.recall += stats.actual[i].recall;\r\n      else nanCount.recall += 1;\r\n\r\n      if (!isNaN(stats.actual[i].f1Score))\r\n        avgSum.f1Score += stats.actual[i].f1Score;\r\n      else nanCount.f1Score += 1;\r\n    }\r\n\r\n    stats.avg = {\r\n      precision: avgSum.precision / (classCount - nanCount.precision),\r\n      recall: avgSum.recall / (classCount - nanCount.recall),\r\n      f1Score: avgSum.f1Score / (classCount - nanCount.f1Score),\r\n      accuracy: sum(cm.map((k, i) => k[i])) / sum(cm),\r\n    };\r\n\r\n    return stats;\r\n  }\r\n\r\n  /**\r\n   * Pass the data trough all layers and return the last one\r\n   * @param {Array<Array<Array<Number>>>} data\r\n   */\r\n  forwardPropagate(data) {\r\n    if (data.length != this.shape[0].d)\r\n      throw new Error(\r\n        `data depth (${data.length}) doesnt match required depth (${this.shape[0].d})`,\r\n      );\r\n\r\n    if (data[0].length != this.shape[0].h)\r\n      throw new Error(\r\n        `data height (${data[0].length}) doesnt match required height (${this.shape[0].h})`,\r\n      );\r\n\r\n    if (data[0][0].length != this.shape[0].w)\r\n      throw new Error(\r\n        `data width (${data[0][0].length}) doesnt match required width (${this.shape[0].w})`,\r\n      );\r\n\r\n    this.layers[0] = data;\r\n\r\n    for (let i = 1; i < this.shape.length; i++) {\r\n      switch (this.shape[i].type) {\r\n        case LayerType.CONV:\r\n          this.layers[i] = correlate(\r\n            this.layers[i - 1],\r\n            this.weights[i],\r\n            this.shape[i].s,\r\n            this.shape[i].p,\r\n            this.biases[i],\r\n          );\r\n          break;\r\n        case LayerType.POOL:\r\n          this.layers[i] = maxPool(\r\n            this.layers[i - 1],\r\n            this.shape[i].f,\r\n            this.shape[i].s,\r\n          );\r\n          break;\r\n        case LayerType.FLATTEN:\r\n          this.layers[i] = flattenDeep(this.layers[i - 1]);\r\n          break;\r\n        case LayerType.FC:\r\n          this.layers[i] = matrixAdd(\r\n            matrixDot([this.layers[i - 1]], this.weights[i])[0],\r\n            this.biases[i],\r\n          );\r\n          break;\r\n      }\r\n\r\n      // Check for NaN before and after activation\r\n      deepMap(this.layers[i], (x, i, v) => {\r\n        if (isNaN(x)) throw new Error(`[${i}] output NaN before activation`);\r\n        return x;\r\n      });\r\n\r\n      if (this.shape[i].af)\r\n        this.layers[i] = deepMap(this.layers[i], x => this.shape[i].af(x));\r\n\r\n      deepMap(this.layers[i], x => {\r\n        if (isNaN(x)) throw new Error(`[${i}] output NaN after activation`);\r\n        return x;\r\n      });\r\n\r\n      // console.log(i)\r\n    }\r\n\r\n    // return last layer\r\n    return this.layers[this.layers.length - 1];\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Array} exp expected output\r\n   * @param {boolean} returnArray does the function return the array?\r\n   */\r\n  getError(exp, returnArray = false) {\r\n    if (exp.length != this.shape[this.shape.length - 1].l)\r\n      throw new Error(\r\n        `expected array length (${\r\n          exp.length\r\n        }) doesn't equal last layer length (${\r\n          this.shape[this.shape.length - 1].l\r\n        })`,\r\n      );\r\n\r\n    let dout = this.layers[this.shape.length - 1].map((v, j) =>\r\n      this.errorF(exp[j], v),\r\n    );\r\n    this.error =\r\n      dout.reduce((a, b) => a + b, 0) /\r\n      this.layers[this.shape.length - 1].length;\r\n\r\n    if (returnArray) return dout;\r\n    else return this.error;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Array} exp expected output\r\n   */\r\n  backpropagate(exp, updateWeights = false) {\r\n    if (exp.length != this.shape[this.shape.length - 1].l)\r\n      throw new Error(\r\n        `expected array length (${\r\n          exp.length\r\n        }) doesn't equal last layer length (${\r\n          this.shape[this.shape.length - 1].l\r\n        })`,\r\n      );\r\n\r\n    for (let i = this.shape.length - 1; i > 0; i--) {\r\n      if (this.shape[i].type == LayerType.FC) {\r\n        if (i == this.shape.length - 1) {\r\n          this.dlayers[i] = this.layers[i].map((v, j) =>\r\n            this.dErrorF(exp[j], v),\r\n          );\r\n        } else {\r\n          this.dlayers[i] = matrixDot(\r\n            [this.dlayers[i + 1]],\r\n            transpose(this.weights[i + 1]),\r\n          )[0];\r\n        }\r\n\r\n        if (this.shape[i].daf)\r\n          this.dlayers[i] = matrixMultiply(\r\n            this.dlayers[i],\r\n            deepMap(this.layers[i], v => this.shape[i].daf(v)),\r\n          );\r\n\r\n        if (updateWeights)\r\n          for (let y = 0; y < this.weights[i].length; y++)\r\n            for (let x = 0; x < this.weights[i][y].length; x++) {\r\n              this.weights[i][y][x] +=\r\n                this.layers[i - 1][y] * this.dlayers[i][x] * this.learningRate;\r\n            }\r\n\r\n        //TODO backpropagate for bias\r\n      } else if (this.shape[i].type == LayerType.FLATTEN) {\r\n        let darray;\r\n        if (i == this.shape.length - 1) {\r\n          darray = this.layers[i].map((v, j) => this.dErrorF(exp[j], v));\r\n          //TODO test if FLATTEN layer works as a last layer\r\n        } else {\r\n          darray = matrixDot(\r\n            [this.dlayers[i + 1]],\r\n            transpose(this.weights[i + 1]),\r\n          )[0];\r\n        }\r\n\r\n        if (this.shape[i + 1].daf)\r\n          darray = matrixMultiply(\r\n            darray,\r\n            deepMap(this.layers[i], v => this.shape[i + 1].daf(v)),\r\n          );\r\n\r\n        this.dlayers[i] = darray;\r\n\r\n        this.dlayers[i - 1] = new Array(this.shape[i].d)\r\n          .fill(0)\r\n          .map((_, i1) =>\r\n            new Array(this.shape[i].h)\r\n              .fill(0)\r\n              .map((_, j) =>\r\n                new Array(this.shape[i].w)\r\n                  .fill(0)\r\n                  .map(\r\n                    (_, k) =>\r\n                      darray[\r\n                        i1 * this.shape[i].h * this.shape[i].w +\r\n                          j * this.shape[i].h +\r\n                          k\r\n                      ],\r\n                  ),\r\n              ),\r\n          );\r\n      } else if (this.shape[i].type == LayerType.CONV) {\r\n        const temp = backPropagateCorrelation(\r\n          this.weights[i],\r\n          this.dlayers[i],\r\n          this.layers[i - 1],\r\n          this.shape[i].s,\r\n          this.shape[i].p,\r\n        );\r\n        const {dF, dI, dB} = temp;\r\n        this.dlayers[i - 1] = dI;\r\n        //console.log(dI.length, dI);\r\n\r\n        // pass the derivatives trough the derivative of the activation function\r\n        if (this.shape[i].daf)\r\n          this.dlayers[i - 1] = matrixMultiply(\r\n            this.dlayers[i - 1],\r\n            deepMap(this.layers[i - 1], v => this.shape[i].daf(v)),\r\n          );\r\n\r\n        //update weights\r\n        if (updateWeights)\r\n          this.weights[i] = update2Dmatrix(\r\n            this.weights[i],\r\n            dF,\r\n            this.learningRate,\r\n          );\r\n\r\n        //update biases\r\n        if (updateWeights)\r\n          this.biases[i] = this.biases[i].map(\r\n            (b, i) => b + dB[i] * this.learningRate,\r\n          );\r\n      } else if (this.shape[i].type == LayerType.POOL) {\r\n        let dIn = new Array(this.shape[i - 1].d)\r\n          .fill(0)\r\n          .map(() =>\r\n            new Array(this.shape[i - 1].h)\r\n              .fill(0)\r\n              .map(() => new Array(this.shape[i - 1].w).fill(0)),\r\n          );\r\n        let maxCoords = maxPool(\r\n          this.layers[i - 1],\r\n          this.shape[i].f,\r\n          this.shape[i].s,\r\n          true,\r\n        );\r\n\r\n        for (let z = 0; z < this.shape[i].d; z++) {\r\n          for (let y = 0; y < this.shape[i].h; y++) {\r\n            for (let x = 0; x < this.shape[i].w; x++) {\r\n              let coords = maxCoords[z][y][x];\r\n              dIn[z][coords.y][coords.x] = this.dlayers[i][z][y][x];\r\n            }\r\n          }\r\n        }\r\n\r\n        this.dlayers[i - 1] = dIn;\r\n\r\n        if (this.shape[i].daf)\r\n          this.dlayers[i - 1] = matrixMultiply(\r\n            this.dlayers[i - 1],\r\n            deepMap(this.layers[i - 1], v => this.shape[i].daf(v)),\r\n          );\r\n      }\r\n\r\n      deepMap(this.dlayers[i], x => {\r\n        if (isNaN(x)) throw new Error(`[${i}] output ${x} after derivation`);\r\n        return x;\r\n      });\r\n    }\r\n  }\r\n\r\n  updateWeights() {\r\n    for (let i = this.shape.length - 1; i > 0; i--) {\r\n      if (this.shape[i].type == LayerType.FC) {\r\n        for (let y = 0; y < this.weights[i].length; y++)\r\n          for (let x = 0; x < this.weights[i][y].length; x++) {\r\n            this.weights[i][y][x] +=\r\n              this.layers[i - 1][y] * this.dlayers[i][x] * this.learningRate;\r\n\r\n            this.dlayers[i][x] = 0;\r\n          }\r\n\r\n        //TODO update bias\r\n      } else if (this.shape[i].type == LayerType.CONV) {\r\n        const temp = backPropagateCorrelation(\r\n          this.weights[i],\r\n          this.dlayers[i],\r\n          this.layers[i - 1],\r\n          this.shape[i].s,\r\n          this.shape[i].p,\r\n        );\r\n        const {dF, dI, dB} = temp;\r\n        this.weights[i] = update2Dmatrix(\r\n          this.weights[i],\r\n          dF,\r\n          this.learningRate,\r\n        );\r\n\r\n        //update biases\r\n        this.biases[i] = this.biases[i].map(\r\n          (b, i) => b + dB[i] * this.learningRate,\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  static confirmShape(shape) {\r\n    if (shape[0].type != LayerType.INPUT)\r\n      throw new Error(\r\n        `the first layer isn't an input layer, instead is: ${shape[0].type}`,\r\n      );\r\n    for (let i = 1; i < shape.length; i++) {\r\n      if (shape[i].type == LayerType.CONV) {\r\n        if (\r\n          shape[i].w !=\r\n          (shape[i - 1].w - shape[i].f + 2 * shape[i].p) / shape[i].s + 1\r\n        )\r\n          throw new Error(\r\n            `[${i}] CONV: outW doesn't equal to calculated outW expected: ${\r\n              (shape[i - 1].w - shape[i].f + 2 * shape[i].p) / shape[i].s + 1\r\n            }, actual: ${shape[i].w}`,\r\n          );\r\n\r\n        if (\r\n          shape[i].h !=\r\n          (shape[i - 1].h - shape[i].f + 2 * shape[i].p) / shape[i].s + 1\r\n        )\r\n          throw new Error(\r\n            `[${i}] CONV: outH doesn't equal to calculated outH expected: ${\r\n              (shape[i - 1].h - shape[i].f + 2 * shape[i].p) / shape[i].s + 1\r\n            }, actual: ${shape[i].h}`,\r\n          );\r\n\r\n        if (shape[i].d != shape[i].k)\r\n          throw new Error(\r\n            `[${i}] CONV: number of kernels doesn't equal outD kernels: ${shape[i].k}, outD: ${shape[i].d}`,\r\n          );\r\n      } else if (shape[i].type == LayerType.POOL) {\r\n        if (shape[i].w != (shape[i - 1].w - shape[i].f) / shape[i].s + 1)\r\n          throw new Error(\r\n            `[${i}] POOL: outW doesn't equal to calculated outW expected: ${\r\n              (shape[i - 1].w - shape[i].f) / shape[i].s + 1\r\n            }, actual: ${shape[i].w}`,\r\n          );\r\n\r\n        if (shape[i].h != (shape[i - 1].h - shape[i].f) / shape[i].s + 1)\r\n          throw new Error(\r\n            `[${i}] POOL: outH doesn't equal to calculated outH expected: ${\r\n              (shape[i - 1].h - shape[i].f) / shape[i].s + 1\r\n            }, actual: ${shape[i].h}`,\r\n          );\r\n\r\n        if (shape[i - 1].d != shape[i].d)\r\n          throw new Error(\r\n            `[${i}] POOL: outD doesn't equal inZ inZ: ${\r\n              shape[i - 1].d\r\n            }, outD: ${shape[i].d}`,\r\n          );\r\n      } else if (shape[i].type == LayerType.FC) {\r\n        if (\r\n          shape[i - 1].type != LayerType.FC &&\r\n          shape[i - 1].type != LayerType.FLATTEN\r\n        )\r\n          throw new Error(\r\n            `[${i}] FC: The previous layer should be type FC or FLATTEN`,\r\n          );\r\n      } else if (shape[i].type == LayerType.FLATTEN) {\r\n        if (\r\n          shape[i - 1].type == LayerType.FLATTEN ||\r\n          shape[i - 1].type == LayerType.FC\r\n        )\r\n          throw new Error(`[${i}] FLATTEN: The previous layer can't be flat`);\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\nexport const LayerType = {\r\n  CONV: 0,\r\n  POOL: 1,\r\n  FC: 2,\r\n  INPUT: 3,\r\n  FLATTEN: 4,\r\n};\r\n\r\nexport const ActivationFunction = {\r\n  RELU: `RELU`,\r\n  SIGMOID: `SIGMOID`,\r\n  TANH: `TANH`,\r\n};\r\n\r\nexport const Layer = {\r\n  /**\r\n   * The input layer of a network\r\n   * @param {Number} w width of the input\r\n   * @param {Number} h height of the input\r\n   * @param {Number} d depth of the input\r\n   */\r\n  INPUT: function (w, h, d) {\r\n    this.type = LayerType.INPUT;\r\n    this.w = w;\r\n    this.h = h;\r\n    this.d = d;\r\n  },\r\n  /**\r\n   * Convolution layer hyperparameters\r\n   * @param {Number} w width of the output\r\n   * @param {Number} h height of the output\r\n   * @param {Number} d depth of the output\r\n   * @param {Number} f filter size (x,y)\r\n   * @param {Number} k number of filters\r\n   * @param {Number} s stride\r\n   * @param {Number} p zero padding\r\n   * @param {function(Number):Number} afName activation function name\r\n   */\r\n  CONV: function (w, h, d, f, k, s, p, afName) {\r\n    this.type = LayerType.CONV;\r\n    this.w = w;\r\n    this.h = h;\r\n    this.d = d;\r\n    this.f = f;\r\n    this.k = k;\r\n    this.s = s;\r\n    this.p = p;\r\n    this.afName = afName;\r\n  },\r\n  /**\r\n   * Pooling layer hyperparameters\r\n   * @param {Number} w width of the output\r\n   * @param {Number} h height of the output\r\n   * @param {Number} d depth of the output\r\n   * @param {Number} f filter size\r\n   * @param {Number} s stride\r\n   * @param {function(Number):Number} afName activation function\r\n   */\r\n  POOL: function (w, h, d, f, s, afName) {\r\n    this.type = LayerType.POOL;\r\n    this.w = w;\r\n    this.h = h;\r\n    this.d = d;\r\n    this.f = f;\r\n    this.s = s;\r\n    this.afName = afName;\r\n  },\r\n  /**\r\n   * A fully connected layer\r\n   * @param {Number} l length of the layer\r\n   * @param {function(Number):Number} afName activation function name\r\n   */\r\n  FC: function (l, afName) {\r\n    this.type = LayerType.FC;\r\n    this.l = l;\r\n    this.afName = afName;\r\n  },\r\n  /**\r\n   * Convert a convolutional layerr to a fully connected layer\r\n   * @param {Number} w width of the input\r\n   * @param {Number} h height of the input\r\n   * @param {Number} d depth of the input\r\n   */\r\n  FLATTEN: function (w, h, d) {\r\n    this.type = LayerType.FLATTEN;\r\n    this.w = w;\r\n    this.h = h;\r\n    this.d = d;\r\n    this.l = w * h * d;\r\n  },\r\n};\r\n\r\nexport const NetworkArchitectures = {\r\n  LeNet5: [\r\n    new Layer.INPUT(32, 32, 1),\r\n    new Layer.CONV(28, 28, 6, 5, 6, 1, 0, ActivationFunction.TANH),\r\n    new Layer.POOL(14, 14, 6, 2, 2, ActivationFunction.TANH),\r\n    new Layer.CONV(10, 10, 16, 5, 16, 1, 0, ActivationFunction.TANH),\r\n    new Layer.POOL(5, 5, 16, 2, 2, ActivationFunction.TANH),\r\n    new Layer.CONV(1, 1, 120, 5, 120, 1, 0, ActivationFunction.TANH),\r\n    new Layer.FLATTEN(1, 1, 120),\r\n    //new Layer.FC(84, ActivationFunction.TANH),\r\n    new Layer.FC(10, ActivationFunction.TANH),\r\n  ],\r\n  LeNet5Color: [\r\n    new Layer.INPUT(32, 32, 3),\r\n    new Layer.CONV(28, 28, 6, 5, 6, 1, 0, ActivationFunction.TANH),\r\n    new Layer.POOL(14, 14, 6, 2, 2, ActivationFunction.TANH),\r\n    new Layer.CONV(10, 10, 16, 5, 16, 1, 0, ActivationFunction.TANH),\r\n    new Layer.POOL(5, 5, 16, 2, 2, ActivationFunction.TANH),\r\n    new Layer.CONV(1, 1, 120, 5, 120, 1, 0, ActivationFunction.TANH),\r\n    new Layer.FLATTEN(1, 1, 120),\r\n    //new Layer.FC(84, ActivationFunction.TANH),\r\n    new Layer.FC(10, ActivationFunction.TANH),\r\n  ],\r\n  // CustomReducedLeNet5Color: [\r\n  //   new Layer.INPUT(32, 32, 3),\r\n  //   new Layer.CONV(28, 28, 6, 5, 6, 1, 0, ActivationFunction.TANH),\r\n  //   new Layer.POOL(14, 14, 6, 2, 2, ActivationFunction.TANH),\r\n  //   new Layer.CONV(10, 10, 16, 5, 16, 1, 0, ActivationFunction.TANH),\r\n  //   new Layer.POOL(5, 5, 16, 2, 2, ActivationFunction.TANH),\r\n  //   new Layer.CONV(1, 1, 120, 5, 120, 1, 0, ActivationFunction.TANH),\r\n  //   new Layer.FLATTEN(1, 1, 120),\r\n  //   new Layer.FC(10, ActivationFunction.TANH),\r\n  // ],\r\n};\r\n\r\n/*module.exports = {\r\n  CNN,\r\n  ActivationFunction,\r\n  Layer,\r\n  NetworkArchitectures,\r\n  LayerType,\r\n};*/\r\n","const getDimension = a => {\r\n  const r = (a1, i) => {\r\n    if (a1.length) {\r\n      return r(a1[0], i + 1);\r\n    } else {\r\n      return i;\r\n    }\r\n  };\r\n\r\n  return r(a, 0);\r\n};\r\n\r\n/**\r\n * @callback deepMapCallback\r\n * @param {*} value\r\n * @param {Number} i\r\n * @param {Array} array\r\n */\r\n/**\r\n *\r\n * @param {Array} a the multidimensional array\r\n * @param {deepMapCallback} f the function to be mapped\r\n */\r\nconst deepMap = (a, f) =>\r\n  a.map((v, i, a1) => {\r\n    if (v && v.length) {\r\n      return deepMap(v, f);\r\n    } else {\r\n      return f(v, i, a1);\r\n    }\r\n  });\r\n\r\n/**\r\n * Dot product between 2 2D matrices\r\n * @param {Array<Array<Number>>} a\r\n * @param {Array<Array<Number>>} b\r\n */\r\nconst matrixDot = (a, b) => {\r\n  if (a[0].length != b.length)\r\n    throw new Error(\r\n      `invalid dimensions a -> x (${a[0].length}) should equal b -> y (${b.length})`,\r\n    );\r\n\r\n  const out = [];\r\n  for (let i = 0; i < a.length; i++) {\r\n    // y\r\n    out[i] = [];\r\n    for (let j = 0; j < b[0].length; j++) {\r\n      // x\r\n      out[i][j] = 0;\r\n      for (let j1 = 0; j1 < a[i].length; j1++) {\r\n        out[i][j] += a[i][j1] * b[j1][j];\r\n      }\r\n    }\r\n  }\r\n\r\n  return out;\r\n};\r\n\r\n/**\r\n * Multiply two matrices of the same shape elementwise\r\n * @param {Array<Array<Number>>} a\r\n * @param {Array<Array<Number>>} b\r\n */\r\nconst matrixMultiply = (a, b) => {\r\n  if (a.length != b.length) {\r\n    throw new Error(`invalid dimensions, both arrays should have equal shape`);\r\n  } else {\r\n    if (a[0] instanceof Array && b[0] instanceof Array) {\r\n      const out = [];\r\n      for (let i = 0; i < a.length; i++) {\r\n        out[i] = matrixMultiply(a[i], b[i]);\r\n      }\r\n      return out;\r\n    } else if (a[0] instanceof Array != b[0] instanceof Array) {\r\n      throw new Error(\r\n        `invalid dimensions, both arrays should have equal shape`,\r\n      );\r\n    } else {\r\n      const out = [];\r\n      for (let i = 0; i < a.length; i++) {\r\n        out[i] = a[i] * b[i];\r\n      }\r\n      return out;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Add two matrices of the same shape elementwise\r\n * @param {Array<Array<Number>>} a\r\n * @param {Array<Array<Number>>} b\r\n */\r\nconst matrixAdd = (a, b) => {\r\n  if (a.length != b.length) {\r\n    throw new Error(`invalid dimensions, both arrays should have equal shape`);\r\n  } else {\r\n    if (a[0] instanceof Array && b[0] instanceof Array) {\r\n      const out = [];\r\n      for (let i = 0; i < a.length; i++) {\r\n        out[i] = matrixAdd(a[i], b[i]);\r\n      }\r\n      return out;\r\n    } else if (a[0] instanceof Array != b[0] instanceof Array) {\r\n      throw new Error(\r\n        `invalid dimensions, both arrays should have equal shape`,\r\n      );\r\n    } else {\r\n      const out = [];\r\n      for (let i = 0; i < a.length; i++) {\r\n        out[i] = a[i] + b[i];\r\n      }\r\n      return out;\r\n    }\r\n  }\r\n};\r\n\r\nconst transpose = a => {\r\n  if (getDimension(a) > 2)\r\n    throw new Error(`transpose supports up to 2d arrays`);\r\n\r\n  if (!a[0].length) a = [a];\r\n\r\n  const out = [];\r\n\r\n  for (let i = 0; i < a[0].length; i++) {\r\n    out[i] = [];\r\n    for (let j = 0; j < a.length; j++) {\r\n      out[i][j] = a[j][i];\r\n    }\r\n  }\r\n\r\n  return out;\r\n};\r\n\r\n/**\r\n * Flips kernels (array of 3d kernels, flips only kernels)\r\n * @param {Array<Array<Array<Array<Number>>>>} a\r\n */\r\nconst doubleInverse = a => {\r\n  if (getDimension(a) == 1) {\r\n    return doubleInverse([[[a]]])[0][0][0];\r\n  } else if (getDimension(a) == 2) {\r\n    return doubleInverse([[a]])[0][0];\r\n  } else if (getDimension(a) == 3) {\r\n    return doubleInverse([a])[0];\r\n  } else {\r\n    const out = [];\r\n    for (let f = 0; f < a.length; f++) {\r\n      out[f] = [];\r\n\r\n      for (let z = 0; z < a[f].length; z++) {\r\n        out[f][z] = [];\r\n\r\n        for (let y = 0; y < a[f][z].length; y++) {\r\n          out[f][z][y] = [];\r\n\r\n          for (let x = 0; x < a[f][z][y].length; x++) {\r\n            out[f][z][y][x] =\r\n              a[f][z][a[f][z].length - y - 1][a[f][z][y].length - x - 1];\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return out;\r\n  }\r\n};\r\n\r\n/**\r\n * correlates a 3D input with a 4D filter with a 3D output\r\n * @param {Array<Array<Array<Number>>>} a input array\r\n * @param {Array<Array<Array<Array<Number>>>>} f array of filters\r\n * @param {Number} s stride\r\n * @param {Number} p zero padding\r\n * @param {Number} b array of biases (array of biases for each output layer)\r\n */\r\nconst correlate = (inputs, filters, stride = 1, padding = 0, b = null) => {\r\n  if (filters[0].length != inputs.length) {\r\n    throw new Error(\r\n      `filter depth(${filters[0].length}) doesnt match input depth(${inputs.length})`,\r\n    );\r\n  }\r\n\r\n  if (filters[0][0].length != filters[0][0][0].length) {\r\n    throw new Error(\r\n      `filter should be a square matrix(${filters[0][0].length} != ${filters[0][0][0].length})`,\r\n    );\r\n  }\r\n\r\n  if (b && b.length != filters.length)\r\n    throw new Error(\r\n      `bias depth(${b.length}), should match output depth(${filters.length})`,\r\n    );\r\n\r\n  const F = filters[0][0].length; // Filter height/width\r\n\r\n  const D = inputs.length,\r\n    H = parseInt((inputs[0].length - F + 2 * padding) / stride + 1), // output height\r\n    W = parseInt((inputs[0][0].length - F + 2 * padding) / stride + 1); // output width\r\n\r\n  return filters.map((filter, filterZ) => {\r\n    const out = [];\r\n\r\n    // for every output node\r\n    for (let i = 0; i < H; i++) {\r\n      out[i] = [];\r\n      for (let j = 0; j < W; j++) {\r\n        let sum = b ? b[filterZ] : 0;\r\n        for (let z = 0; z < D; z++) {\r\n          //for every node in filter\r\n          for (let k = 0; k < F; k++) {\r\n            for (let h = 0; h < F; h++) {\r\n              // (h and k are filter coordinates)\r\n\r\n              const i1 = i * stride + k - padding;\r\n              const j1 = j * stride + h - padding;\r\n\r\n              if (\r\n                i1 >= 0 &&\r\n                i1 < inputs[0].length &&\r\n                j1 >= 0 &&\r\n                j1 < inputs[0][0].length\r\n              )\r\n                sum += inputs[z][i1][j1] * filter[z][k][h];\r\n            }\r\n          }\r\n        }\r\n        out[i][j] = sum;\r\n      }\r\n    }\r\n\r\n    return out;\r\n  });\r\n};\r\n\r\n/**\r\n * This be the same as correlate, but with a flipped filter\r\n * @param {Array<Array<Array<Number>>>} a input array\r\n * @param {Array<Array<Array<Array<Number>>>>} f array of filters\r\n * @param {Number} s stride\r\n * @param {Number} p zero padding\r\n * @param {*} b\r\n */\r\nconst convolute = (a, f, s = 1, p = 0, b = null) => {\r\n  return correlate(a, doubleInverse(f), s, p, b);\r\n};\r\n\r\nconst max = a => {\r\n  let max = -Infinity;\r\n  deepMap(a, x => {\r\n    if (x > max) {\r\n      max = x;\r\n    }\r\n  });\r\n  return max;\r\n};\r\n\r\nconst sum = a => {\r\n  let sum = 0;\r\n  deepMap(a, x => {\r\n    sum += x;\r\n  });\r\n  return sum;\r\n};\r\n\r\nconst softmax = a => {\r\n  const exp = deepMap(a, x => Math.exp(x));\r\n  const sum1 = sum(exp);\r\n  return deepMap(exp, x => x / sum1);\r\n};\r\n\r\nconst maxIndex = a => {\r\n  if (getDimension(a) == 1) {\r\n    let max = a[0];\r\n    let index = 0;\r\n    for (let i = 1; i < a.length; i++) {\r\n      if (a[i] > max) {\r\n        max = a[i];\r\n        index = i;\r\n      }\r\n    }\r\n    return index;\r\n  } else {\r\n    throw new Error(`maxIndex works only on 1d arrays`);\r\n  }\r\n};\r\n\r\n/**\r\n * update matrix a with da multiplied by a coefficient\r\n * @param {Array<Array<Number>>} a matrix to be updated\r\n * @param {Array<Array<Number>>} dA delta a\r\n * @param {Number} c the coefficient for Da to be multiplied with\r\n */\r\nconst update2Dmatrix = (a, dA, c) =>\r\n  a.map((v, i) => {\r\n    if (v && v.length) {\r\n      return update2Dmatrix(a[i], dA[i], c);\r\n    } else {\r\n      return a[i] + dA[i] * c;\r\n    }\r\n  });\r\n\r\n/**\r\n *\r\n * @param {Array<Array<Array<Array<Number>>>>} f the filter used in the correlation\r\n * @param {Array<Array<Array<Number>>>} dOut derivative od the next layer\r\n * @param {Array<Array<Array<Number>>>} input the input used at the correlation\r\n * @param {Number} s stride\r\n * @param {Number} p padding\r\n */\r\nconst backPropagateCorrelation = (f, dOut, input, s, p) => {\r\n  if (getDimension(input) == 3 && getDimension(f) == 4) {\r\n    if (f[0].length != input.length) {\r\n      throw new Error(`filter depth doesnt match input depth`);\r\n    }\r\n\r\n    //depths dont mix, so depth is the same for input and filter\r\n    //create an array with the same dimensions as filter\r\n    const dF = [];\r\n\r\n    // m -> filter number\r\n    for (let m = 0; m < f.length; m++) {\r\n      dF[m] = [];\r\n      for (let f_d = 0; f_d < f[m].length; f_d++) {\r\n        dF[m][f_d] = [];\r\n        //console.log(m, f_d, f[m][f_d].length);\r\n        for (let f_i = 0; f_i < f[m][f_d].length; f_i++) {\r\n          dF[m][f_d][f_i] = new Array(f[m][f_d][f_i].length).fill(0);\r\n          for (let f_j = 0; f_j < f[m][f_d][f_i].length; f_j++) {\r\n            for (let dOut_i = 0; dOut_i < dOut[m].length; dOut_i++) {\r\n              for (let dOut_j = 0; dOut_j < dOut[m][dOut_i].length; dOut_j++) {\r\n                //dOut[m][dOut_i][dOut_j]\r\n                //     ^ this is important\r\n\r\n                const in_i1 = dOut_i * s + p + f_i;\r\n                const in_j1 = dOut_j * s + p + f_j;\r\n\r\n                if (\r\n                  in_i1 >= 0 &&\r\n                  in_i1 < input[f_d].length &&\r\n                  in_j1 >= 0 &&\r\n                  in_j1 < input[f_d][in_i1].length\r\n                )\r\n                  dF[m][f_d][f_i][f_j] +=\r\n                    dOut[m][dOut_i][dOut_j] * input[f_d][in_i1][in_j1];\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const dI = [];\r\n    for (let m = 0; m < f.length; m++) {\r\n      for (let in_d = 0; in_d < input.length; in_d++) {\r\n        dI[in_d] = [];\r\n        //note: f_d and in_d are the more or less the same thing\r\n        for (let in_i = 0; in_i < input[in_d].length; in_i++) {\r\n          dI[in_d][in_i] = new Array(input[in_d][in_i].length).fill(0);\r\n          for (let in_j = 0; in_j < input[in_d][in_i].length; in_j++) {\r\n            for (let dOut_i = 0; dOut_i < dOut[m].length; dOut_i++) {\r\n              for (let dOut_j = 0; dOut_j < dOut[m][dOut_i].length; dOut_j++) {\r\n                //coordinates of the filter value that affected input[in_i][in_j] => dOut[m][dOut_i][dOut_j]\r\n                const f_i1 = in_i - dOut_i * s + p;\r\n                const f_j1 = in_j - dOut_j * s + p;\r\n\r\n                if (!dI[in_d][in_i]) dI[in_d][in_i] = [];\r\n\r\n                if (\r\n                  f_i1 >= 0 &&\r\n                  f_i1 < f[m][in_d].length &&\r\n                  f_j1 >= 0 &&\r\n                  f_j1 < f[m][in_d][f_i1].length\r\n                )\r\n                  // prettier-ignore\r\n                  dI[in_d][in_i][in_j] += dOut[m][dOut_i][dOut_j] * f[m][in_d][f_i1][f_j1];\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    const dB = dOut.map(dOutM => sum(dOutM));\r\n\r\n    return {\r\n      dF,\r\n      dI,\r\n      dB,\r\n    };\r\n  } else {\r\n    throw new Error(\r\n      `invalid array dimension (${getDimension(input)}, ${getDimension(f)})`,\r\n    );\r\n  }\r\n};\r\n\r\n/**\r\n * Reduces x and y dimensions of an array by max pooling\r\n * @param {Array<Array<Array<Number>>>} a the input array\r\n * @param {Number} f filter size\r\n * @param {Number} s stride\r\n * @param {boolean} coordinateMode return only coordinates of the max number\r\n */\r\nconst maxPool = (a, f, s, coordinateMode = false) => {\r\n  if (getDimension(a) == 3) {\r\n    return a.map(layer2d => {\r\n      const outY = (layer2d.length - f) / s + 1;\r\n      const outX = (layer2d[0].length - f) / s + 1;\r\n\r\n      let outLayer = [];\r\n      for (let y = 0; y < outY; y++) {\r\n        outLayer[y] = [];\r\n        for (let x = 0; x < outX; x++) {\r\n          let max = layer2d[y * s][x * s];\r\n          let maxCoords = {x: x * s, y: y * s};\r\n\r\n          for (let i = 0; i < f; i++) {\r\n            for (let j = 0; j < f; j++) {\r\n              let y1 = y * s + i;\r\n              let x1 = x * s + j;\r\n\r\n              if (layer2d[y1][x1] > max) {\r\n                max = layer2d[y1][x1];\r\n                maxCoords = {x: x1, y: y1};\r\n              }\r\n            }\r\n          }\r\n          if (coordinateMode) outLayer[y][x] = maxCoords;\r\n          else outLayer[y][x] = max;\r\n        }\r\n      }\r\n      return outLayer;\r\n    });\r\n  } else {\r\n    throw new Error(\r\n      `invalid array dimension (${getDimension(a)}), should be 3`,\r\n    );\r\n  }\r\n};\r\n\r\n/**\r\n * Converts an n-dimensional to a 1-dimensional array\r\n * @param {Array} arr1 n-dimensional array\r\n */\r\nconst flattenDeep = arr1 =>\r\n  arr1.reduce(\r\n    (acc, val) => (val.length ? acc.concat(flattenDeep(val)) : acc.concat(val)),\r\n    [],\r\n  );\r\n\r\nconst deepNormalize = (arr, max1) => {\r\n  if (!max1) {\r\n    max1 = max(arr);\r\n  }\r\n  return deepMap(arr, e => e / max1);\r\n};\r\n\r\nconst vectorize = (label, length) => {\r\n  const outArr = new Array(length).fill(0);\r\n  outArr[label] = 1;\r\n  return outArr;\r\n};\r\n\r\n/**\r\n * Creates an array with the same shape but all the values are 0\r\n * @param {Array} arr\r\n */\r\nconst deepCopyArrayShape = arr =>\r\n  arr.map(i => (i instanceof Array ? deepCopyArrayShape(i) : 0));\r\n\r\nmodule.exports = {\r\n  matrixMultiply,\r\n  matrixDot,\r\n  transpose,\r\n  convolute,\r\n  doubleInverse,\r\n  correlate,\r\n  getDimension,\r\n  maxPool,\r\n  flattenDeep,\r\n  matrixAdd,\r\n  deepMap,\r\n  backPropagateCorrelation,\r\n  update2Dmatrix,\r\n  max,\r\n  sum,\r\n  softmax,\r\n  maxIndex,\r\n  deepNormalize,\r\n  vectorize,\r\n  deepCopyArrayShape,\r\n};\r\n","const {vectorize, deepNormalize} = require(`./math`);\r\n\r\nconst openDatasetFromBuffer = (buffer, imageColorDepth = 3, imageSize = 32) => {\r\n  const datasetArray = new Uint8Array(buffer);\r\n  const imageChannelPixelCount = imageSize * imageSize;\r\n  const imagePixelCount = imageChannelPixelCount * imageColorDepth;\r\n  const rowCount = imagePixelCount + 1;\r\n  const output = [];\r\n  console.log(datasetArray.length / rowCount, imageColorDepth, imageSize);\r\n  for (let n = 0; n < datasetArray.length / rowCount; n++) {\r\n    output[n] = {};\r\n    output[n].input = [];\r\n    output[n].label = datasetArray[n * rowCount];\r\n    for (let i = 0; i < imageColorDepth; i++) {\r\n      output[n].input[i] = [];\r\n\r\n      for (let j = 0; j < imageSize; j++) {\r\n        output[n].input[i][j] = [];\r\n        for (let k = 0; k < imageSize; k++) {\r\n          output[n].input[i][j][k] =\r\n            datasetArray[\r\n              n * (imagePixelCount + 1) +\r\n                i * imageChannelPixelCount +\r\n                j * imageSize +\r\n                k +\r\n                1\r\n            ];\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return output;\r\n};\r\n\r\nconst vectorizeDatasetLabels = (dataset, outLength) => {\r\n  dataset.forEach(c => {\r\n    c.output = vectorize(c.label, outLength);\r\n  });\r\n  return dataset;\r\n};\r\n\r\nconst uint8ArrayToString = buf => {\r\n  const arr = new Uint8Array(buf);\r\n  if (arr.length > 60000) {\r\n    let outStr = \"\";\r\n    for (let i = 0; i <= arr.length - 1; i += 60000) {\r\n      outStr += String.fromCharCode.apply(null, arr.subarray(i, i + 60000));\r\n    }\r\n    return outStr;\r\n  } else return String.fromCharCode.apply(null, arr);\r\n};\r\n\r\nconst stringToUint8Array = str => {\r\n  var buf = new ArrayBuffer(str.length);\r\n  var bufView = new Uint8Array(buf);\r\n  for (var i = 0, strLen = str.length; i < strLen; i++) {\r\n    bufView[i] = str.charCodeAt(i);\r\n  }\r\n  return bufView;\r\n};\r\n\r\nconst datasetToUint8Array = dataset => {\r\n  const imageSize = dataset[0].input[0].length;\r\n  const imageColorDepth = dataset[0].input.length;\r\n  const imageChannelPixelCount = imageSize * imageSize;\r\n  const imagePixelCount = imageChannelPixelCount * imageColorDepth;\r\n  const rowCount = imagePixelCount + 1;\r\n\r\n  const out = new Uint8Array(dataset.length * rowCount);\r\n  for (let n = 0; n < dataset.length; n++) {\r\n    out[n * rowCount] = dataset[n].label;\r\n    for (let i = 0; i < imageColorDepth; i++) {\r\n      for (let j = 0; j < imageSize; j++) {\r\n        for (let k = 0; k < imageSize; k++) {\r\n          out[\r\n            n * (imagePixelCount + 1) +\r\n              i * imageChannelPixelCount +\r\n              j * imageSize +\r\n              k +\r\n              1\r\n          ] = dataset[n].input[i][j][k];\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return out;\r\n};\r\n\r\nconst normalizeInputData = (dataset, max) => {\r\n  dataset.forEach((data, i) => {\r\n    dataset[i].input = deepNormalize(dataset[i].input, max);\r\n  });\r\n  return dataset;\r\n};\r\n\r\nmodule.exports = {\r\n  openDatasetFromBuffer,\r\n  datasetToUint8Array,\r\n  vectorizeDatasetLabels,\r\n  stringToUint8Array,\r\n  uint8ArrayToString,\r\n  normalizeInputData,\r\n};\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\n\r\n// redux\r\nimport { connect } from \"react-redux\";\r\n\r\n// router\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nconst SidebarWrapper = styled.aside`\r\n  height: 100%;\r\n  width: ${(props) => props.sidebarwidth};\r\n  /*border-top-right-radius: 20px;*/\r\n  background: ${(props) =>\r\n    props.darkMode ? props.background : props.primarycolor};\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst SidebarInside = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n  padding: 10px;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst SidebarItemLink = styled(NavLink).attrs({\r\n  activeClassName: `linkActive`,\r\n})`\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  width: 100%;\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n  text-decoration: none;\r\n  color: ${(props) => props.primarytextcolor};\r\n  border-radius: 8px;\r\n\r\n  &.linkActive {\r\n    font-weight: bold;\r\n    background: ${(props) => (props.darkMode ? props.primarycolor : `none`)};\r\n  }\r\n`;\r\n\r\nconst SidebarItemIcon = styled.img`\r\n  height: 1em;\r\n  width: 1em;\r\n`;\r\n\r\nconst CustomRightIcon = styled.div`\r\n  position: absolute;\r\n  right: 0;\r\n  transform: translateX(-100%);\r\n`;\r\n\r\nconst Sidebar = ({ colors, screens, structure }) => {\r\n  return (\r\n    <SidebarWrapper {...colors} {...structure}>\r\n      <SidebarInside>\r\n        {screens.map((screen) => {\r\n          const ScreenIcon = screen.icon;\r\n          if (screen.fullName)\r\n            return (\r\n              <>\r\n                <SidebarItemLink\r\n                  id={screen.sidebarId}\r\n                  to={screen.path}\r\n                  {...colors}\r\n                  exact={screen.exactLink}\r\n                >\r\n                  <div style={{ paddingRight: `0.5em` }}>\r\n                    <ScreenIcon\r\n                      style={{\r\n                        height: `1.5em`,\r\n                        width: `1.5em`,\r\n                      }}\r\n                    />\r\n                  </div>\r\n                  {screen.fullName}\r\n                  {screen.customRightIcon && (\r\n                    <CustomRightIcon>{screen.customRightIcon}</CustomRightIcon>\r\n                  )}\r\n                </SidebarItemLink>\r\n              </>\r\n            );\r\n        })}\r\n      </SidebarInside>\r\n    </SidebarWrapper>\r\n  );\r\n};\r\n\r\nexport default connect((state) => state)(Sidebar);\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\n// resources\r\nimport logo from \"../res/cnnjs-logo.svg\";\r\n\r\nconst Logo = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  height: 100%;\r\n  align-items: center;\r\n`;\r\n\r\nconst LogoImg = styled.img`\r\n  height: 2em;\r\n  width: 2em;\r\n`;\r\n\r\nconst LogoText = styled.h2`\r\n  margin: 0;\r\n  color: ${props => props.textcolor};\r\n`;\r\n\r\nexport default ({ textcolor }) => (\r\n  <Logo>\r\n    <LogoImg src={logo} alt=\"logo\" />\r\n    <LogoText textcolor={textcolor}>CNNjs</LogoText>\r\n  </Logo>\r\n);\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\n// redux\r\nimport { connect } from \"react-redux\";\r\n\r\n// components\r\nimport Logo from \"./Logo\";\r\n\r\nconst TopBarStyled = styled.div`\r\n  height: ${(props) => props.topbarheight};\r\n  width: 100%;\r\n  flex-grow: 0;\r\n  flex-shrink: 0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  box-shadow: ${(props) =>\r\n    props.darkMode\r\n      ? ``\r\n      : `0 2px 2px 0 rgba(0, 0, 0, 0.14),\r\n    0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2)`};\r\n  background: ${(props) => props.topbarbackground};\r\n`;\r\n\r\nconst AboveSidebar = styled.div`\r\n  width: ${(props) => props.sidebarwidth};\r\n  height: 100%;\r\n  padding-left: 30px;\r\n  box-sizing: border-box;\r\n  flex-grow: 0;\r\n`;\r\n\r\nconst AboveScreens = styled.div`\r\n  flex-grow: 1;\r\n  height: 100%;\r\n`;\r\n\r\nconst TopBar = ({ structure, colors }) => (\r\n  <TopBarStyled {...structure} {...colors}>\r\n    <AboveSidebar {...structure}>\r\n      <Logo />\r\n    </AboveSidebar>\r\n    <AboveScreens>{/*< />*/}</AboveScreens>\r\n  </TopBarStyled>\r\n);\r\n\r\nexport default connect((state) => state)(TopBar);\r\n","import React from \"react\";\r\nimport GridLoader from \"react-spinners/GridLoader\";\r\nimport { connect } from \"react-redux\";\r\n\r\nexport default connect((state) => state)((props) => {\r\n  const items = Object.keys(props.training)\r\n    .map((i) => {\r\n      return (\r\n        i !== \"trained\" &&\r\n        Object.keys(props.training[i]).map((j) => props.training[i][j])\r\n      );\r\n    })\r\n    .flat(1)\r\n    .filter((i) => !!i);\r\n  return items.length > 0 ? (\r\n    <GridLoader size={5} color={`white`} />\r\n  ) : (\r\n    <div></div>\r\n  );\r\n});\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport arrow from \"../res/arrow.png\";\r\n\r\nconst HintWrapper = styled.div`\r\n  position: absolute;\r\n  left: ${(props) => props.x}px;\r\n  top: ${(props) => props.y}px;\r\n  right: ${(props) => props.xRight}px;\r\n  bottom: ${(props) => props.yBottom}px;\r\n\r\n  display: flex;\r\n  flex-direction: row;\r\n\r\n  z-index: 99999;\r\n`;\r\n\r\nconst ArrowImage = styled.img`\r\n  height: 2em;\r\n  padding: 0.4em;\r\n`;\r\n\r\nconst HintText = styled.div`\r\n  margin-top: ${(props) => !props.yFlip && `1em`};\r\n  margin-bottom: ${(props) => props.yFlip && `1em`};\r\n  background: rgba(255, 255, 255, 1);\r\n  border-radius: 8px;\r\n  padding: 0.4em;\r\n  box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12),\r\n    0 3px 5px -1px rgba(0, 0, 0, 0.2);\r\n`;\r\n\r\nconst Hint = ({\r\n  domId,\r\n  text,\r\n  onClick,\r\n  forceFlipY,\r\n  forceDontFlipY,\r\n  disablePadding,\r\n}) => {\r\n  const [updater, setUpdater] = React.useState();\r\n  let ref = document.getElementById(domId);\r\n\r\n  const clickListener = () => {\r\n    setUpdater(Math.random());\r\n\r\n    document.removeEventListener(\"click\", clickListener);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    document.addEventListener(\"click\", clickListener);\r\n    const eventListener = function () {\r\n      onClick();\r\n      //debugger;\r\n      ref.removeEventListener(\"click\", this);\r\n    };\r\n    if (ref) {\r\n      ref.addEventListener(\"click\", eventListener);\r\n    }\r\n    return () => {\r\n      document.removeEventListener(\"click\", clickListener);\r\n      if (ref) ref.removeEventListener(\"click\", eventListener);\r\n    };\r\n  });\r\n\r\n  console.log(ref);\r\n\r\n  if (ref) {\r\n    const pos = ref.getBoundingClientRect();\r\n\r\n    const flipX = pos.x + pos.width / 2 >= window.innerWidth / 2;\r\n    const flipY =\r\n      !forceDontFlipY &&\r\n      (forceFlipY ||\r\n        pos.y + pos.height + !disablePadding * 20 >= window.innerHeight / 2);\r\n\r\n    console.log(forceFlipY, flipY);\r\n\r\n    return (\r\n      <HintWrapper\r\n        disablePadding={disablePadding}\r\n        x={!flipX && pos.x + pos.width / 2}\r\n        xRight={flipX && window.innerWidth - pos.x - pos.width / 2}\r\n        y={!flipY && pos.y + pos.height + !disablePadding * 20}\r\n        yBottom={flipY && window.innerHeight - pos.y + !disablePadding * 20}\r\n      >\r\n        {flipX && <HintText yFlip={flipY}>{text}</HintText>}\r\n        <ArrowImage\r\n          disablePadding={disablePadding}\r\n          src={arrow}\r\n          style={{\r\n            transform: `${flipX ? `scaleX(-1)` : ``} ${\r\n              flipY ? `scaleY(-1)` : ``\r\n            }`,\r\n          }}\r\n        />\r\n        {!flipX && <HintText yFlip={flipY}>{text}</HintText>}\r\n      </HintWrapper>\r\n    );\r\n  } else {\r\n    setTimeout(() => {\r\n      setUpdater(Math.random());\r\n    }, 500);\r\n  }\r\n  return <div></div>;\r\n};\r\n\r\nexport const HintList = connect(\r\n  (state) => state,\r\n  (dispatch) => ({\r\n    nextHint: () => dispatch({ type: `NEXT_HINT` }),\r\n    stopHints: () => dispatch({ type: \"SET_HINT\", hintId: -1 }),\r\n  })\r\n)(({ hints, hintArray, nextHint, stopHints }) => {\r\n  if (hints.hintId >= hintArray.length) {\r\n    stopHints();\r\n  }\r\n  return hints.hintId >= 0 && hints.hintId < hintArray.length ? (\r\n    <Hint onClick={() => nextHint()} {...hintArray[hints.hintId]} />\r\n  ) : (\r\n    <div></div>\r\n  );\r\n});\r\n\r\nexport default Hint;\r\n","import React, { useState } from \"react\";\r\n\r\nimport { useSpring, animated, config } from \"react-spring\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nconst SpringButtonStyled = styled(animated.div)`\r\n  width: ${(props) => (props.shrinkToContent ? `auto` : `100%`)};\r\n  padding: 1em;\r\n  background: ${(props) => props.color};\r\n  color: ${(props) => props.textColor};\r\n  border: none;\r\n  border-radius: 3px;\r\n  box-sizing: border-box;\r\n  text-align: center;\r\n\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst SpringButton = ({\r\n  color,\r\n  textColor,\r\n  text,\r\n  onClick,\r\n  shrinkToContent,\r\n  id,\r\n}) => {\r\n  const [hovered, setHovered] = useState(false);\r\n  const [clicked, setClicked] = useState(false);\r\n\r\n  const buttonStyle = useSpring({\r\n    transform: `scale(${clicked ? 0.8 : hovered ? 1.1 : 1}`,\r\n    config: config.gentle,\r\n  });\r\n\r\n  if (clicked) {\r\n    setTimeout(() => setClicked(false), 200);\r\n  }\r\n\r\n  return (\r\n    <SpringButtonStyled\r\n      id={id}\r\n      style={buttonStyle}\r\n      color={color}\r\n      textColor={textColor}\r\n      onMouseEnter={() => setHovered(true)}\r\n      onMouseLeave={() => {\r\n        setHovered(false);\r\n        setClicked(false);\r\n      }}\r\n      onClick={(e) => {\r\n        if (onClick) onClick(e);\r\n        setClicked(true);\r\n      }}\r\n      shrinkToContent={shrinkToContent}\r\n    >\r\n      {text}\r\n    </SpringButtonStyled>\r\n  );\r\n};\r\n\r\nexport default SpringButton;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { MdSchool, MdPhotoLibrary } from \"react-icons/md\";\r\nimport { IoMdGitNetwork } from \"react-icons/io\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport SpringButton from \"../components/SpringButton\";\r\n\r\nimport { AiFillGithub } from \"react-icons/ai\";\r\n\r\nconst DashboardWrapper = styled.div`\r\n  padding: 1em;\r\n`;\r\n\r\nconst Tab = styled.div``;\r\n\r\nconst CenterImage = styled.img`\r\n  margin: 0 auto;\r\n  max-width: 80%;\r\n`;\r\n\r\nconst CenterChild = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nconst SidebarItemLink = styled(Link)`\r\n  position: relative;\r\n  display: inline-flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  padding: 5px;\r\n  box-sizing: border-box;\r\n  text-decoration: none;\r\n  color: ${(props) => props.primarytextcolor};\r\n  border-radius: 3px;\r\n  background: ${(props) => props.primarycolor};\r\n  &.linkActive {\r\n    font-weight: bold;\r\n    background: ${(props) => (props.darkMode ? props.primarycolor : `none`)};\r\n  }\r\n`;\r\n\r\nconst TabLink = connect((state) => state)(({ colors, tab }) => {\r\n  const iconStyle = {\r\n    height: `1em`,\r\n    width: `1em`,\r\n  };\r\n  return (\r\n    <>\r\n      <SidebarItemLink to={tab} {...colors}>\r\n        <div style={{ paddingRight: `0.5em` }}>\r\n          {tab === `datasets` && <MdPhotoLibrary style={iconStyle} />}\r\n          {tab === `networks` && (\r\n            <IoMdGitNetwork\r\n              style={{ transform: `rotate(-90deg)`, ...iconStyle }}\r\n            />\r\n          )}\r\n          {tab === `training` && <MdSchool style={iconStyle} />}\r\n        </div>\r\n        {tab.charAt(0).toUpperCase() + tab.slice(1)}\r\n      </SidebarItemLink>\r\n    </>\r\n  );\r\n});\r\n\r\nconst GoBanner = styled.div`\r\n  height: 20vh;\r\n  width: 100%;\r\n\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nexport default connect(\r\n  (state) => state,\r\n  (dispatch) => ({\r\n    startHints: () => dispatch({ type: \"SET_HINT\", hintId: 0 }),\r\n    stopHints: () => dispatch({ type: \"SET_HINT\", hintId: -1 }),\r\n  })\r\n)(({ startHints, hints, stopHints }) => {\r\n  const [redirectToNetworks, setRedirectToNetworks] = React.useState(false);\r\n\r\n  return (\r\n    <DashboardWrapper>\r\n      {redirectToNetworks && hints.hintId === 0 && <Redirect to={`networks`} />}\r\n      <h1>CNNjs demo</h1>\r\n      <p>\r\n        This is a demo that can train a Convolutional neural network in your\r\n        browser, using a{\" \"}\r\n        <a href=\"https://github.com/jakic12/CNN-js\">training library</a> I made\r\n        for javascript. You can upload your own dataset or use a reduced version\r\n        of the{\" \"}\r\n        <a href=\"https://www.cs.toronto.edu/~kriz/cifar.html\">cifar-10</a>{\" \"}\r\n        dataset already provided with the demo. You can also upload images and\r\n        test the network from your browser. The trained network can be exported\r\n        as json for further use.\r\n      </p>\r\n      <GoBanner>\r\n        <SpringButton\r\n          shrinkToContent={true}\r\n          text={hints.hintId > -1 ? `Stop the tutorial` : `Start the tutorial`}\r\n          textColor={`white`}\r\n          color={`#dd2683`}\r\n          onClick={() => {\r\n            if (hints.hintId > -1) {\r\n              stopHints();\r\n              setRedirectToNetworks(false);\r\n            } else {\r\n              startHints();\r\n              setRedirectToNetworks(true);\r\n            }\r\n          }}\r\n        />\r\n      </GoBanner>\r\n      <p>\r\n        Made by{\" \"}\r\n        <a href=\"https://github.com/jakic12\">\r\n          <AiFillGithub />\r\n          Jakob Drusany\r\n        </a>\r\n        .<br /> Mentored by prof. Botjan Vouk.\r\n      </p>\r\n      <h1>Written instructions</h1>\r\n      <ol>\r\n        <h3>\r\n          <li>Network</li>\r\n        </h3>\r\n        <p>\r\n          First create a network on the <TabLink tab={`networks`} /> tab that we\r\n          will use for training.\r\n        </p>\r\n\r\n        <CenterChild>\r\n          <CenterImage\r\n            src={process.env.PUBLIC_URL + `/tutorial_images/Screenshot_1.jpg`}\r\n            alt=\"creating a network\"\r\n          />\r\n        </CenterChild>\r\n\r\n        <h3>\r\n          <li>Dataset</li>\r\n        </h3>\r\n        <p>\r\n          If you want to use your own dataset, you can upload it on the{\" \"}\r\n          <TabLink tab={`datasets`} /> tab. If not, there is a sample of the{\" \"}\r\n          <a href=\"https://www.cs.toronto.edu/~kriz/cifar.html\">cifar-10</a>{\" \"}\r\n          dataset already provided.\r\n        </p>\r\n\r\n        <CenterChild>\r\n          <CenterImage\r\n            src={process.env.PUBLIC_URL + `/tutorial_images/Screenshot_3.jpg`}\r\n            alt=\"uploading a dataset\"\r\n            width=\"80%\"\r\n          />\r\n        </CenterChild>\r\n\r\n        <h3>\r\n          <li>Training</li>\r\n        </h3>\r\n        <p>\r\n          After you have your dataset and network ready, you can train the\r\n          network. You can do that by clicking the \"train a network\" button on\r\n          the <TabLink tab={`training`} /> tab and selecting your network and\r\n          dataset. You can change the training parameters on the right and then\r\n          hit \"Start Training\".\r\n        </p>\r\n\r\n        <CenterChild>\r\n          <CenterImage\r\n            src={process.env.PUBLIC_URL + `/tutorial_images/Screenshot_4.jpg`}\r\n            alt=\"training a network\"\r\n          />\r\n        </CenterChild>\r\n\r\n        <h3>\r\n          <li>Using the network</li>\r\n        </h3>\r\n        <p>\r\n          After you have completed training, you can play around with the\r\n          network. If you go to the <TabLink tab={`datasets`} /> tab and click\r\n          on a dataset, you can build a confusion matrix on the dataset.\r\n        </p>\r\n        <CenterChild>\r\n          <CenterImage\r\n            src={process.env.PUBLIC_URL + `/tutorial_images/Screenshot_8.jpg`}\r\n            alt=\"confusion matrix\"\r\n          />\r\n        </CenterChild>\r\n        <p>\r\n          You can also click on a network on the <TabLink tab={`networks`} />{\" \"}\r\n          tab and classify a single image from a dataset\r\n        </p>\r\n\r\n        <CenterChild>\r\n          <CenterImage\r\n            src={process.env.PUBLIC_URL + `/tutorial_images/Screenshot_7.jpg`}\r\n            alt=\"Classifying a dataset image\"\r\n          />\r\n        </CenterChild>\r\n\r\n        <p>or upload your own image to classify.</p>\r\n\r\n        <CenterChild>\r\n          <CenterImage\r\n            src={process.env.PUBLIC_URL + `/tutorial_images/Screenshot_6.jpg`}\r\n            alt=\"Classifying an uploaded image\"\r\n          />\r\n        </CenterChild>\r\n      </ol>\r\n    </DashboardWrapper>\r\n  );\r\n});\r\n","const object =\r\n  \"\\u0006;+2Dbw}|\\u0010\\u0000\\u00123Xx~tjeiqmpwmi}z|y{wz\\u0019\\u00101Snyqppji|zsx~vxm!&Wjsuriky}mqvuz|}y^2;f|yxrk}jl|ylbnuxywgWKCGTnwlz{ikolb^aSXfaXvxkXC# ao{zy|xkPDJeiA:?Nzl_`YBswlH3)H}D@R{prie~fw{yJ62,VdMKJLkw}{}~Z?>FOgye`VKeyPaZbflugxo}lyTXme|ZHQTk~PYi`?BXq}~|}~|@Tpyrdlur{~z]{wxpdcdmwyl}{ooy{|qlqk[Tiv`f~sMO]~wqyzu~x~|G~~|~r8!xZ285upzh:\\\"aSpwx\\\\g{>.06I[knuxgcspiajjaqpiilx}|\\u0014\\u0000\\b\\u001b3RYVWOFCFJFHOGEY\\\\UYROY[^`XSW\\u0018\\u0007\\u001b2H\\\\]RMNOKI\\\\W\\\\YUOU_`fZYY\\\\i^TTI\\u0019\\u00146?FJH>DTZKMi[TLLWQ\\\\cc]V[Z]ZWU>  AOMMNJHXYDGSNDAJPP]j_b\\\\TOOC9/*05IRXTTMFRQAHMJA>?8:DE6J`aPD6'\\n\\rEKUTXSJJS^OOG2+)38%$%3]DVjWD;?=/RLZaXQZYVY[F'\\u001a\\u0016\\u001ffL(&5M8Qg_LEB\\\\JdR[WQRUUPa^*\\u0019\\u001d\\u001d'jmZ:*+'#C`a[YSV_xprdYVV[aa<#!'25F@OK:60&?[\\\\]]]V\\\\zuulddffoW(5-8[TWIRU\\\\c=CZW[a_V]rmma\\\\^TJgS<VNtsdtaynN?`_]_ZW\\\\sjiinY8=P9O{ySMW[]][Y[wkf\\\\;,4/7jv_`Z\\\\bYasmli_/9D3QevY__aY\\\\tddd`*+2A^i_a\\\\[XXs_acW(;EyZ{t_RoXcgY@Ihwtst{wfrKPZ[S:wt|}UQSViiRZ\\\\Y_yYb[rc~uLKBAJyhPVUVfhVfjl^q|HQX\\\\RwhLUQQuvsl_inffeenjoqdovttfPYWZo[alaejnlhihf`g~zgWY`mjhhy{p`f^komeL<=cyqkPXchmpu|jRapmJ+2IutcyXUXZ^luxvny{m[UXTS\\\\ilpi\\\\fkdOLXbjjcWRmycXWljZ_nqkpi]ZVzoXR^d_\\\\NWce^SR^lh_[gilmek]0xgdlibX\\\\feYRQXdheNUekpeW\\u001d\\u0013yk_W]b_c[YZfjgn^LTfgE\\u0018i\\u001f\\\"{vcaa\\\\][[_cb`]TPHQC\\u001f\\u0005^>5{rx|thgi_Z[`WCNv\\\\?-+*4?KPY]ML[VOGOL@NKEJMYdlfhlfg\\u0014\\u0000\\u0000\\b\\u0015+-,2,%#$#!%,!\\u001b..'/)%05:<729\\u0015\\u0000\\b\\u0017)67/+,.-&0/883+/67>3125D:22*\\u0011\\u0004\\u0019\\u001c!#%!!-5(&:/-()4+3:94,213220#\\u0015\\u000b\\\"'$$('\\\"13\\u001f!*'\\u001d\\u0017%1)2B:B3-)( \\u001b\\u0017\\u0019\\u001d\\u0018%&-*+%!,'\\u0019\\u001f\\u001f\\\"\\u001b\\u0015 &$*.$HO@-\\\"\\u0018\\u000f\\u0000\\u0004($+&,(\\u001e\\u001f.6\\\"'\\\"\\u000e\\u0011\\u0011\\u0015\\u0017\\u0010\\u0013\\u0012\\u001fSPOE1$\\u001d%&\\u001e1!/50(/.0..'\\u0013\\n\\u000e\\u0011EQ/\\u0017\\u0011\\u001e>7<=6'\\\"!;.D)30,+,,(65\\u0014\\u0010\\u0010\\u0012\\u000f8>G1\\u001b\\u0018\\u0018\\u0016$;:10+-8YMRA5204<D\\u001e\\t\\u0010\\u0014\\u001e\\u001a!%=9)!\\u0018\\u0015 55244-7^RRF@BDBQD\\r\\u0011\\u0011\\u001e916%.9Lj5\\u001a\\u0019)-397.9YIE79A7*F7\\u000e\\u0016\\u0017ME4I9RGq{^(\\u00194;893.8VED@JA\\\"!,\\u0017\\u0013;)bzcnsv[aXL2&3=<9408bRJA;$\\u0016\\u0018\\u0013\\u00192\\\\9gxppnmrdL9B;8<0=OBDA>\\u0015 (\\u001a-qk3yN9><<28O6736\\u0015\\u001f\\\"%nG?pN1:41.6O1331\\u0015)%K8TndN<>7.\\u001e(L/=B<&+BsIiiG+\\\"!&#)P%0980 hXsUOSn?\\u0010\\r\\r\\u0010\\u001b6H)3513ndI7<0?J2O@\\f\\u0010\\u000e\\u000f\\u00136B&1.-;\\\\7`i/:;N6-CpV\\u001a\\\"+2$2@ 0+'LUvcEcnB18:367<JADG%\\u001f#'-SA#.,2G4=hkvxqYA549==;;;<0'\\u001e\\u000e\\b\\n,fH,*4H@:9QWiJ78/=A?7&\\\"\\u0017\\u0019\\\"\\u0014\\u0004\\t?cJ%0;?>CN`kTk@(4B=\\u001d\\u000e\\u0019!/'\\u001f\\u0018*[KL\\u0012#0-1DSRdXKnVW\\\\G3++%$4B>4'',Wr:R\\u001a\\u0019\\\")158:?;,<M;34FA02?A?C6,.Fj[0W\\u0010\\u0013#\\\"#1553\\\")49603<E?5.9;>?69fi1\\u001a[\\u0016\\u0018\\u001c\\u001a\\u001e3KI9&/><3134<A<$)7=D;.bW\\t\\t`\\\"\\u001a\\u001b\\\" *41.9>79346:<=@.!':>(\\u000b<F\\u0007\\u0014`*\\u001e\\u0019\\\"$  &&184435:<<8+!&\\u001d'\\u001e\\u000b\\u00009^\\\"\\\"t^WCDLHFORV\\\\^\\\\TZ][SME7;:A;.9hTH\\t~if}ojm{tf_ZH<8M^[WO}|n`c_YPAT\\\\`MGseeXg^ASZODCz}y[^[MEaXL@Gw^ll }fbXPZ^EGDWx]bg`Vwa.u~|\\\\XNWbLCQ[|XUWTKNE5(6AUusSJGVVZSMQn?I:./\\u001f\\u000f\\u0013'?\\\\yXxlecaIO^SJF%\\\"/UhI^}sx:ClqYTA8XQ?GJHQz]bhw6%KmhEKPXC81bi{rl_e}evB#M`Hfc]O;gYp{ylku}gtN)P{og\\\\_ThQYvqridhq}|H*YfPVScGXicY^kjAYVASgVuVwkmfOL^ovkE7TWeFVU$CW40ViXrL8H0\\\\^=7|~|n/WK>?w~g~olHb:\\u001d\\u001f))%%28h\\\\IC)\\b<KG90&%058Ea_9=@BAGGaU#;!\\u000b\\u0010U;JOYG4 \\u0018\\u0013,3\\t/!\\f\\n;ZX`jc7@1\\u0019'\\\"Yf|}}yI=@%%\\r'TUT`[>G+\\u0019>8X,+94,0OaO`KR}%+OIHTW^H+\\\"g_|sqtrqt|b(\\u00157lw.-EGEKOvVU\\u001fMD^=(<QdA;>3,'+f7 \\u0017*=]^fl}SX?+K:-#\\u0015\\u000e\\u000b\\u000e;16Qg{+\\u0013\\u0014Jwnc=\\u001b\\u0012\\u0011\\u0019\\u001d\\u0010\\u0005\\u0006\\n\\u00193DZthexkhyue_YF<9N`_ZQ}oae`YQCV_cPIsfgYg_CV]RFEy{^a^PHd[NBIz4kh\\\\R]aIIFYsvxtlw;z}fWLVcMES]mingZ\\\\UH=PY^vyv\\\\GDUUZUOS}MRG97*!(?]}Vwnaa`HO`ULZ4'6[oZr7FpynWR?7[TBKb]Wow}40RBphDIO[F;.zsqp{zC7X\\\\s_Fef`R:yqz|VBagzqj]_X{iu}yQ@jjtfOTYv\\\\r}op{pNe|yQ=UtdS}t}]{{|mleNLauxfA5V[hGc`&BU20^w\\\\tO<K3Z\\\\:8zrZ2TH;?m{iD>&Ox?'\\\"&'#$49j]JB*\\n;1\\\"\\u001b\\u001b\\u001b\\u001c &-8W_?ABECKPjT&A)\\u0013\\u0015Q7GMYA&\\u0012\\u000f\\r(y0\\u0010<0\\u0019\\u0015Adcejb33%\\u0014(#[h~~vtmGCK32\\u0018.[ZSWU<= \\u0016C<Z.)3.%%E\\\\PcNZ+.PJFNU]@\\\"!lb{wqlilp{d,\\u00178r~1,GJGLRyQN\\u001bMBXC-BYmE<@5+$,l8\\u001a\\u000e\\\"5SX\\\\kY]E3S>/%\\u0016\\f\\u0006\\r@10H]ry \\t\\u000eD}ne]?\\u001f\\u0015\\u0014\\\"%\\u0014\\u0006\\u0006\\t\\u0016-@Zq_cnbfugSLOE=6HTGGFvfxUTWVM<LPN>=pa\\\\RcV6FK@77y|W\\\\XB7PF@5;<edTBIJ2<9J}{BuzfR@FM79GQx|wlj\\\\NBTai}fh_E8E@EHCGjcR<:.&+Ac\\\\wyp]SO5<RG>fC8C\\\\t>Iw^`EA/(LE3Elpn=8\\\\.\\\\R2;BI4)1QFgK[L;\\\\TM?CkYxQasmXKOdg[STU@HgwhwdZC4awn`Er_~zs^xtW{x]rwNqzWf~efqqkTSi|pG;Z_reiV}q0L_<9czcxUAMBikJAbZDxAcXKF{j{p4/\\u00187\\\\fu}S7.340.9@reRP0\\u0007:7!\\u001a\\u0017\\u001a\\u001e\\u0019\\u001c#(HtQOPRQ\\\\d^/O2\\u0011\\u0012`HY_hI%\\u000e\\r\\u000e,;\\u0017I:\\u001b\\u0014Jw{y=3!\\u001553k{~SKYA9\\u001d;lkfmjH>\\u001e\\u001aUOk8095,.KlZk_m6Ad\\\\YbijC!%{oyusv|t8#J=<\\\\`\\\\`eWN\\u001dTI^Q;QfwNCME9/9z@\\u001d\\u000e$9[_hx_cK=^G4,\\u001e\\u0012\\t\\u0014M:4I`xxz} \\f\\u0013Fzkc[>\\u001e\\u0014\\u0015*0\\u001c\\u000b\\u000b\\f\\u0016*Cez\\t{^rnBGox44CxK+1T2.6[{r.(3lVHtU\\u001e!Gvum\\\\XP^~%\\u001f+QmncrnlC^mpicbgT#!+Zkn^LQMC]x|49JUaixE\\u0019\\u001e<_cQHN2$xi>ibyp4]w3\\u001c(F\\\\Ucn3\\u001em_Nfc`G5oPcp\\\"\\u001f,F?Ic92gUqIJO:?:;xqE:@P[M^XW`3\\u001f\\\"+*4LILvbcg24>@?<XygH8MD:=>6&(\\u001d\\u001e!\\u001e5X[Yzt`OPC;<CCWnT9,//3<5 \\u001d'\\u001e !\\u001e*J[YyzemiC>@:36C3S;+7/7-\\u0017\\u0019/&#&#(4FJpitzgC.@B/,(.*>0*A18)\\u001d\\u001c'$\\u001d$)5>AHpipiN*\\u001e.1%$\\u001b\\u001a #\\u001f ,,0.+(''&(.6=BJtkdR<&\\u001d&' \\\"&),+*-02420.+*,./6;>FhZOD=4--.058=@=<<;>>;761.154>EDMTOG>BB9;==<8?IJJGGHII?<:9:;:>ELTOOKELLCFDA>;BKQPMLLJLOJC@A@<:>EIbda\\\\YQMNLFDDGILMMMKFDGC>9;<;=@BCpnngYUTQNKGEEGJJJHFEB>977865?FHLqoi_TVYSKDEFHJHGHFEBA@>>=<97?HHHohcYNHFGJLNKJHIIKNNFBDGF?56>BDFNjc_YRNORTSNOLKNPQPOLH@@EB74:DNOP|xpLYmwf55Vl{s*+9ZdC\\\"'<\\\\g(\\u001f'FXg~i \\\"+GPxaOyN\\u001f +CLynlZf*\\u001d\\u001b1@MnyMhvztmjlZ\\u001e\\u001b\\u001e.<Pega\\\\RhBCJYjuF\\u001a\\u0019\\u001e38?LU8*jGsnqDg|w5\\u0019\\u0017$29Yp5 qbVh`V<>rDSd~y~\\\"\\u0015\\u0014(,Eh>6j[tMLH)'%=|nI-/BL=MJQ_6\\u001d\\u0016\\u001b\\\"6SQT|lhb,,0+##VriF4IA3+./%+ \\u001c\\u001c\\u001e<bedvP8:1-,-?R_N=25560*\\u001a\\u001c)\\\"$$#1TgeyKFH1;A*/,*#U@/;15)\\u0015\\u0017/**.*/?QWzscD&!CK(* \\u0019\\u001a=1*B2<- \\u001d(*&/2<ILS{stfE\\\"\\u001b05&&\\u001c\\u0018\\u001e(%%12963/.225:BGLT|rjX?'\\u001e')%'+.24369;=;9757:<=CEHPoaUJ@70026<?DHFEEDFGD@?;;?CBKPNW\\\\VMDHH?BDFEBHRTSQQRRRHEDFHIHKOV^WUQKTULONMJGNW[ZWVVSUXSMNONJGHOSjjgcd\\\\XYWTRRUVWWWWUOLPLHFIJIJJLMxutndaa^[YWTTVVTTSPOKGBBDFDDLPQUxvpg_bd^WSUVWYUTTSQNLKJJKJGFKQPPvojaXSRRUZ^ZYWWWY\\\\\\\\TPRUTMCDLNKLTqjf`\\\\ZZ]_a]^[Y\\\\^_^\\\\ZVNNSPEBHPUUVvtzlkIU`mc77Mbuq.07T\\\\I*-<V`2,,CXlyp+'+LZ|YIsM\\u001f\\\"4OP||{~na_T_o !&;CJ~{cvwsF]fih`XXnsH!$$/<KSQYUKc<68CXVYgz9\\u0017\\u0018\\u001c484=Q8-m\\\\Elbvr=Xgufhsizz+\\u0015\\u0016&43Oi1 ^SSd[R>6X=CDbcd{~!\\u0019\\u001a,*<]60UHeHIG**'6mY2.+3@5>>I\\\\7$ $%1GEIdUWW'+00*(Q~dYH5E=2'*-&/*'%#:XZWsodG6<4025?O\\\\I?57881+\\u001d /,-+&1O_[upfDHK3<D5524*XE6B79-\\u001b\\u001e7201*/?OPhbe^H,$EN34+('D:5L:A2&$10*01=KNQmhneK*\\\"6;12'$*0./;;>;854657=CIMUrlgWD.%.0.158<<;>ABB@><9:=?@EFIQf[RJD<557=DGKOMLKKMLIED@?BFEMQNXSPJDIJACFIJFMVXWUUVWWMJHIKLKNQW_MOOJSSJMMNKIPX]\\\\YXXXZ]XRQRQMIIPT`edbaXTVTRQQTUVWWWVSRUQMILMLLKMNnoql`[[XVVTQQSTSSRPRPLGFGIGFNQRVpojaZ]_YROPRSUTSSRQPNMLLLKHGLPOOnhbYSOMNQVYUTSVWY\\\\\\\\TPRUTMCDLNIKRib^XWVVY[\\\\XYVU[^_^\\\\ZVNNSPEBHOSST\\u0004\\u001c%&*,((\\u0018 +\\u001e )4C2,+&&)/>W<1?;0LQU!\\\" '#&&(60\\u001c(8BO/*2@/7QTm\\\\;EOG_`U'(9.,()BZ90HJL]BAPZCX`SikVY]V]k_6>T>F7NUcT_Z`g]_^d^W\\\\Y``SL_haec[JHNU_MgbP]c]eiTTVWPWP[]JQMYRTNHTLDEJNQYZOBQ[WVZUQRNUW[SPW[bJ;GH^MJIFCT^bRHKKQW[RZU_gh[NO__[GAUPPOLUMSQ^z^R]Ve[[f_]dogb]NZ]SGJYM843>JKWyacsySc_W\\\\_geeVJTioJ]^[K-\\u001b%7<SqmaflY_ohpqmuhoMJ`aeSjXPXC)66?\\\\pc[h}Rmkfzttx]Y\\\\P]d`nlGE`OR[]EX{`^ihMm_]pdrr\\\\\\\\jeivywVHKS[fkzfUPLSpnUE__\\\\`[^hnohd`hd]SQQWwt~;9IXoeEK[futrh^be^\\\\YTRv{8:KXrlsqotcbSOXdn~}zB<ah~qtamNV^~r_5f~|otPO]yt\\\\(\\\\~zxhoy~yjKlase`tgw~zty{^SaZ`|najyupz}mtF?LR]hgghqMglhzmibk6\\u00101CVwquhWUV[]0RNko_[^aatrqG\\u0019\\u001e/Hi^TVNOMEY,?M]`]PRQ^xDOHHNT1\\u001e02d[MC?<I?N=MUKTOIMSXb<VkfXvV=2@4DgUGC5ZRK0;UQJUPQXYXBbfb`t{R91V:bV;9AfON:8NROXUW\\\\\\\\UCl_hSd^P<`PUO=IVX;:BDELUY[[jbVGcbcMKvqgfeQbbVdbXNMHHRORXVUT]TWO]XNS`vljpo^iyaeZOVWWSWT\\\\PSYbhf]nfmrqlruzzurx|hgdccZQXZ]^RQ_^`hlpnl|wikut|sotkmj`PLRa^]a`^`ON]ikbcjwhhjzkp\\\\P`MUTC6?H\\u0019\\\"#%'%&\\u0017\\u0019\\u001b\\u0014\\u001e%0?.##\\u001d\\u001e\\\"'2G0*83(CHL\\u001c\\u001e\\u001b!\\u001d!\\\"$/\\\"\\u0012#/9E%\\\"*8'0II_P3=H>RRH !2)&\\\"!<Q-&@<=N47FQ:QWI^`LPUKLYM.7M:A0DKZJUOOULNSZTMSPWWHAU`VPNFB@ERZDYTFTZOSWBCKMGNEQTBGBOII;5@B9:GJGIIC;GKHGJFEGCJKPKINOV?/78NB?>D?HKMCB@9EKPFMGQYZNEJVQL93IDCD@JKODIbOKQD]SS]QNV`WTTIQND7;OD//.9HEGblQU_ikEURGJHOPUI@FV\\\\7LRO?+\\u0019$44@XXRQRlGM^W`]SWO\\\\><OMQ?WJCK=#004IWNJRya@\\\\[Wlb\\\\^EELBMRN]]<:UDFPS6EcKKRjK;\\\\ONbT^^FHYVZgigI@CKJTZjTA:8>VO73MNLRLMWYZVTRZVOGJJPb`pqhi(&3=NF07HSdo~]^WNSVOOPKIafshkp&(3;miplm]Zb`]bSUGBDOY``d3*HJyujpqlp[cQ\\\\;DK`^\\\\P$Ldkmuupdh[_><HZb]J\\u0013@tfftu|yhimaRW^he`R.JyP^OJs|rzxnjp^T`dob[_^cQFMFIu}tqgjdcWOUb_[dfSX98;?GkouiTTST[>TWUhZVMRm(\\r\\\"/A`\\\\bYKJJKJ$C=Z^NJLNIoRdsNN8\\u001a\\u0012\\u001c4TMGMFIG;H#4>NRNACAJ]%.&&.t~C2\\u0013 \\u001fPKC<:8F9B6DI@IC=BHGK!;PK>XmB<)2\\\"1WJ@>3XNE,4KIBLGJPLC*NRON\\\\adL1&F)SJ22<bMO73FKGOLQVPA.]PXCR[kTF0P?EB3BPS9;@A@DKOQTeWE5WSQ:;VRSSUBNPL[ZPHHDCMJJNLKNXIE=RI:>P\\\\LRY^PTfX]PFPQPIMJRFIP[bZK[[]^\\\\\\\\YXbcdecj_^ZZ]TKHJMRHGUWY[X\\\\b\\\\ibYU[h^ke\\\\bad`WJFLNKKUVTVGENTVUSWbXUUcU`Q>NCLK9/8A\\n\\u0013\\u0014\\u0017\\u0019\\u0016\\u0017\\t\\u000f\\u0013\\n\\u0011\\u0017\\\"2 \\u0019\\u0019\\u0014\\u0014\\u0017\\u0019!2\\u001b\\u0018)(\\u0019'+/\\r\\u000e\\f\\u0012\\u000e\\u0011\\u0012\\u0013\\u001e\\u0013\\u0004\\u0013 *7\\u0019\\u0012\\u0019(\\u0017\\u001f54F: *4(78-\\u000f\\u0011!\\u0017\\u0015\\u0011\\u0011(;\\u0018\\u0013+-.?&\\\"1;$8=.AI998/4B6\\u001c$:'.\\u001e36@0;7=D;<:@:362880-:=5;91/-2=F1H>*7=5>C--01*1&05$/-3'(% +-%&03363'\\u001e+1/.1,)+'.+0..67=#\\u0014##:,)(+'278*&% )/4*2-7?<0+2>96% 510.+426/6N718,>44?97>H<9<5;50(-;/\\u001a\\u001f\\u001e)437HO77@LK$2.*237:<//4>F$9;8'\\u001d\\u000b\\u0016#'2:6620L*.;2@E>>;D\\\"+?59'?3+3*\\u0011\\u001d\\u001d%8:026ZC)C>7KIFC/,0/::6DE'%@-/9=$1G289M/)H72@8E>+-=ADLOM0-080;@R=*!#/@2\\u001b#;92//25:<:<8=92-88>FCTWNP\\u0011\\u0014$'/'\\u001e#17@Raf]>B<25704=86DHVLMQ\\u0013\\u0019$\\\"H]QVabGLA;A@=C6>0,(3=C>C \\u001c5,cifkpqU|hZJNRMP=I7B!)0B:9=\\u00166Atrrv~mnpgHIWXRGJ=B&#/;<:4\\u0006(Yu}zqqUsbMANU][JJMA>@FGA@6\\u001d1ixnd>MA5NSNXWOLQ=@JLN@=DJIo~p=8B<:UVPOGMHD6<@J?:GM>=f}}t$,39<RLRI69:7:,?@7I?=77Edfz~tv\\u0015\\u0005\\u001e-;M=A9.040)\\u0012/&>B5471#H/@P,+dr\\\"\\u0010\\u000e\\u001c0E2)0,22!*\\u0011 (488..%&>\\u0010\\u001a\\u0015\\u0013\\u0016EY'$\\f\\u001d\\u001bC3(#$#/ (%04'1.+-+&1\\u0012*>:*0J#)\\u001d+\\u001d#A4,,\\u001f=5/\\u001b 61+9653-.\\u001a6:649@B6 \\u0019>\\u0019>8\\\"$)C3<%\\u001f141<;;93.\\u001d</8$1;I9/\\u001eC,00\\\"4=3\\u001f+++*-38;<K<-\\u001b458#\\u001d83224%381<?:.//-7414324?.*\\u001f0,%,3?/.48.6M;91.8984849-07AH?/=:BHHA=:@@ADHRC<=CF=4348:/.<==?;=DARL>:>G=KGBMFDDB517855==;=,(158:9>J>:7C6B5';*,0&\\u001c%.\\u0001eht{ztrhqqd^`TVMEJMJB?JS[XMLjPOPQORXPF56=ILQIGK[xGLLKJPYJAB5/6<IL>ADKVo>@AIHOWH6><2.2;A>AHJIG[h897??HNF:9?>4044;AGEACCADYs~441/3<@??CCC@<:57=@=::9:66:AKSZ_-.,++*/29>?=<:0*,1650/1132443334#'''\\u001e$<EGJI:1PC294740-,251110.\\u001b\\u001b #4B99AMc[URU_`[YQG/*/3615310 \\u0014\\b 2D) \\u0019\\u001a;c32<K(4@\\u001f\\u001c,8$-A7'-\\u001f(;$\\u0014\\t\\\"J3$$\\\"\\u001eZR-0>;\\u001b&-.\\u0011\\u00110>.6%\\u0017\\u0014\\u0005\\u000e5 \\f\\u000b4^:6=9O|Q=9TV02!@$\\u0013\\u001e2J/\\u001d\\u001c\\u0016\\b\\u0007 \\u001c\\u000e\\u000bS}y{la}yJI>C;\\u0019\\u0012\\u0019=I-\\u0017\\f\\b\\u0015$\\u001f\\t\\baxw\\\\7C%%:UjX1\\u001b&&\\u0017\\n\\rUab\\\\YjrmiW6\\u0012\\f\\u000fev^LDM]fQ#\\u000e~p{R#\\u0016*TW&P}Y1lhD0glA?>cH;UX:o|jQ\\u001a!\\u0016z[WLbgVSP@8]gnnu&^(Jf,1H_kROUKz\\u001c7?:9@KNW_]?&p\\u001ftqU&0>=G>9=<IT\\u001711\\u0018\\u0010\\u0016\\u001b\\u001c!&#\\u0017)\\r.&\\u0013\\b\\f\\u000f 6;:1($7\\u0018\\u000b\\r\\f\\t\\u0004\\u0005\\b\\t\\n\\t\\n\\n z\\u0006\\u000e\\u000f\\n\\u0007\\u000b\\u0015+,MMD=?/+'#!\\u001d\\u001a\\u0015\\u0013\\u0010\\t\\u0007\\u0007\\t\\u0010tO\\u0003\\b\\u000b\\b\\u0002\\u0004\\u000b\\u000e\\u0011JHHKOPPNPLJGED@4-(%\\u001e(H\\u0014\\u0004\\u0005\\u0004\\u0001\\u0000\\u0000\\u0000\\u0002\\nKMNNTTSWWVWSPPRSNMJH=04'\\u001d\\u001d\\u0019\\u0016\\u0015\\u0017\\u0019\\u001bJLNORWWXZZ]\\\\WTTSQMMOQXVMHFGFDGD=DEHMMUVVVW\\\\a[^^^]YTRNNKCDDCBHLGGCDEHOPMRPTTXWY[\\\\]^\\\\]ZXSMKGJHGKGIu}w|~xrrgg`]cababhiprgefeefgiiii_]^hlnbbft`eeccfe`di[U\\\\bhead`dpY[\\\\ddggaYb`VU]cecddefdv~XXV^^ehc]\\\\`_Y]bacddcced]_tWWTRV_abbb``_adb`a]]``_^ZZ[aksy~RSQPOOUVZ[ZXVURRTUTVXWZ[\\\\\\\\ZXVSLMJLJH=CZWW`bQEfaPYTTUTSVVYTRSL<! FELURSNJ`ieY[tusrp[POOMHKKMC\\\"\\u0010\\u0004BLV=C@(;gOMBM>V]7BguVJI=05-=F\\\"\\u0011\\u0006?XGJWX;mm`a[M6LNE9Rw}S8!\\u0016\\u0012\\t\\u001a7\\u0018\\b\\bMdFR\\\\W^hgbsoQ^I[KOf}7\\u0018\\u0019\\u0013\\u0007\\n\\u001a\\u000e\\u000b\\be|u|wmdl][ZDK_vb2\\u0018\\u0007\\u0005\\u0012\\u001a\\u0012\\u0004\\u0004h~|dCT?Igh6\\u001e\\u001f\\u0018\\u000f\\u0002\\u0007V]rtx\\\\0\\r\\b\\f_|heob(\\u0010qc~yZMTbyf-@^qF!bb:$\\\\uqad[yT0EH-dtXsyG\\u0012\\u0017\\u000e|tmqasoPPK8%@IRRV`int|s\\u001eV\\\"Ed?JXjpPNRFu|\\r!(##(/3;CF1\\u001di\\u001bldM,<FGN@<>:GN\\r%#\\n\\u0003\\u0007\\n\\n\\u0010\\u0015\\u0014\\f \\n&\\u001a\\u0007\\b\\u0011\\u0010'>A?5)%7\\u0013\\u0007\\n\\b\\u0005\\u0000\\u0000\\u0000\\u0000\\u0001\\u0002\\u0002\\u0001\\u0017s\\u0003\\u0006\\u0002\\u0000\\b\\u0011\\u0015.3TTH@A0(%#\\\"\\u001d\\u0019\\u0014\\u000f\\f\\u0005\\u0004\\u0003\\u0002\\tmI\\u0000\\u0001\\u0001\\u0001\\u0005\\n\\u000b\\u000f\\u0016TROOSRNLOIFCA@;0)$ \\u0019\\\"C\\u0010\\u0002\\u0002\\u0001\\u0000\\u0001\\u0002\\u0002\\u0004\\u000eUWURXWSVWSSNLKNOJIFD9,0%\\u001c\\u001c\\u001b\\u001a\\u0018\\u001b\\u001d\\u001fTUUSV[[\\\\][][VSTRPMLNQWUOJHKJHKHALMOQQZ^^^\\\\^d^aaa`\\\\VUQQNJKKHFLPKKKLKLSUW][[Y]\\\\^`abcab_]YWTQPLKOKMuzyyxvy~}~vz{yyxnpqyysyv}lljrrz{sxwy}|~jjfeirttt|~}||}zz|zwvvv{yx}dedc`_dfkrusppljmnomjjmnnnpqnh\\\\]\\\\^b`IHdfgqp]Ov{lwqnljimiefhj_B \\\"XXgqd^[]s{vgfzjda[NX`dR\\\"\\t\\u0002R_kSZV7MxabYaUy~Teu\\\\P@*69NO\\u001d\\t\\u0004MkUTgjExvkoj]Lie\\\\Ym=\\u001e\\u000b\\r\\u000e#8\\u000f\\u0002\\u0005ZxTYhflsqkzv_oQmguE\\u0014\\f\\f\\b\\r\\u0016\\u0005\\u0004\\u0005lynvbjp`k6\\u0013\\u0006\\u0003\\u000b\\r\\u0005\\u0001\\u0002dqSiYnL%\\u0014\\t\\b\\u0003\\u0006SlvA\\u001b\\u0010\\u000e^7\\u0016m_|sw|78Nc;\\u001b^]>,h}a.9;\\\"[oK^aol~@\\u0011\\u0017\\u0013~RE=.v\\u001c-4=>COY_hob\\u0016T\\\"LwQZj{}ODG=lz\\t\\u0017 \\u001d\\u001d!&)1;<%\\u0017g\\u001akeV6CNMS<463@M\\u000b #\\f\\u0004\\b\\b\\b\\r\\u0011\\u000f\\u0006\\u001d\\u0005!\\u0016\\n\\f\\u0013\\u0014)A::0$ 3\\u0014\\b\\u000b\\n\\u0007\\u0002\\u0001\\u0003\\u0004\\u0005\\u0001\\u0001\\u0000\\u0016q\\u0001\\u0005\\u0002\\u0002\\f\\u0013\\u001a5>LOD<>.*)(\\\"\\u001b\\u0017\\u0014\\u0013\\u0010\\n\\u0004\\u0002\\u0003\\bjH\\u0001\\u0004\\u0005\\u0007\\n\\u000e\\u0012\\u0018%JJJNRRONQGA?==9-& \\u001d\\u0016\\u001f@\\u000e\\u0006\\u0007\\u0006\\u0005\\u0005\\u0006\\u0006\\t\\u0013MOPQWWSVWQOKIHKKGEC@6)/*! \\u001f\\u001d\\u001b\\u001e !PQRRUZZ[\\\\Z\\\\[VSSRPLLNPVURNLNMKNKDMNNPPY\\\\[[\\\\afaccdc_YWSTQLMMKIOSNNNOLKRTTYW\\\\]a`bceffefca\\\\XURSONRNP\\u0001M=@AFXfLLSbhb^^e[JL[dVVWMIL_USiwkkrzVmcii]e<;<D??GOZZu~]dQReiU.-*-114@NtrwdvUkjzk\\\\83.&*3:Xr`XcTHiqQ6g~\\\\?A@``L|MFkelYZDa\\\\ejSzlv|dI}~elnt$K~x =bpz;Y{sr{dqsGbl]|#>[}vkucVX?A3hwBNX{}|P08>CD<150RY[kwc[hsqqx4\\u001d5HUT@58aM`Z^wlVZ{~QnP4=9=UZ`erR]Vsd]iyaskVWXZqy{qgeM{uux}pwuqkdbkE}|}ysstuxzyo_ZX]SY]9uzvxmcgecdd\\\\ZOGGOV^Z)anop^FHKKMR;, ;KRmM\\u001a'8FQL8014:D;0*9ET|:\\u0016\\u0012\\u0019#-43238762/09CVz?$\\u001c\\u001e\\u001f\\\"$$'(*)().4BOaS?70.,)+,..15>HUbuw`OG@<;=@AFJU\\\\cqf[_|g.'*+2GPn~>BGLPKFEHG?:KHL^U~aB99:356HxEETv`WKMQioEC:;IJ_E,%&.*,5?s~|JHwjRchpHF<9M[T8$&#&&!&4Dhzajfa]_s<GFF^]]9%1-&&+2Qma}GQKG|wPR_^dUe?*awS584S[vB}AIfLbN>mg=4quZKEMvporhN>_X]^GOb\\\\=f~QCLNLMHINPL`\\\\NQCA^{l`=e\\\\OQYOeRIB@@BHHJLYVONSLMxB>APE<?JE>>?FKKLo_^}yqab^no6+)BS<BB4.BhdPNGZaq~kkFPbrZDu.!\\u0013@pdV<((NtNA\\\\hd}{tNXZGzK*\\u0018:qY91(\\\"3UUptpuYg_H^utQe0);sE\\n\\u001d%$((=NNtXVZ\\\\?<DQx}}b/->o<\\t\\\"*)+*;8:WYtjqQH<+(0BJJR|a-/Aj4\\u001eC76>:9KGB0FPI5,($!*9'($KyX)+8T'Ho@AFE9KQ.#PV,\\u001f\\u001b\\u0018\\u001b\\u001d\\u001f'1+!0iM\\u001a-6>\\\"{92676/A?+[O\\u001c\\u0019\\u001c\\u001b(17JJ5%A?\\u0007\\u00151;&6(-,.(/3.HnW$-9.B<8E-5 3^-\\f\\u0011327!+./*$\\u001c\\u0011\\u001e%%.*%#,4/('9%Dxh4\\r\\u00132xx5\\u001b+-,).(\\u001d-'\\u0014,\\\"\\u001f$7B9)+'$7rpZ)\\u000e\\u001bpv3\\u0013$,*'5-;fd\\u001d$3,02/9=?- GunjJ#\\u0013s9\\u000f\\u0017\\u001f$$\\u001e\\u001b\\u001f6G\\u001e\\u001c/,;@4=>8 #etlh\\\\<\\u001cjE\\r\\u0011\\u0011\\u0014\\u0015\\u0017\\u0017\\r\\u0017\\u001e\\u001e\\u001f&)+8/*# \\u0019Culd`Y/SP\\u000e\\u0010\\u000e\\f\\t\\n\\u000f\\r\\u0013\\u001a\\u001c\\u0018\\u0017\\u0014\\u000f\\u0017\\u001e%.$\\u001fa~}mhpJCG\\f\\u0010\\f\\u000b\\b\\n\\u000e\\r\\f\\f\\u000e\\f\\u0010\\f\\n\\u0016 *+\\\"6gtvovcGzE\\b\\r\\u000f\\u000e\\f\\n\\b\\t\\b\\b\\b\\b\\n\\n\\b\\u0018\\u001b\\u0018\\u001c9V^d~utqpnUe-\\u000b\\u000b\\f\\r\\r\\f\\u0006\\u0006\\u0006\\b\\u000b\\u000b\\u000b\\f\\f\\u0013\\u0015\\u0015$4ESZ|svxom`8\\u0013\\f\\f\\b\\u0005\\u0006\\t\\f\\u000e\\u000f\\u0013\\u0012\\u000f\\u000b\\u000b\\r\\u000e\\u0011\\u0015$(3GQ{z}ujm=\\u000b\\t\\n\\t\\t\\u0007\\b\\t\\b\\b\\u000b\\n\\u000b\\u000b\\f\\u0010\\u0011\\u0013\\u0016!$*;Izlnh3\\u0015\\u000e\\f\\f\\f\\f\\n\\n\\u000b\\r\\r\\u000e\\r\\u000f\\u0012\\u0016\\u0018\\u001c\\\"$,8A~lkrb8!\\u0016\\u0012\\u0010\\u000f\\r\\u000e\\u0011\\u0014\\u0014\\u0012\\u0010\\u0013\\u0014\\u0017\\u001b %*/39e_azX(#%&.BDY~p79;@=897>877DBAZUwQ<76701.;mb67EiNA5::G]=K<4PV`5$ !)&(/9kznb77hsS9S\\\\PiGL9-TgX.\\u001f\\u001c\\u0019\\u001c\\u001e\\u001d!.=agR_wO]nT\\\\H:52]ZV-#&!\\u001a\\u001e',Gd\\\\vyAB\\\\lud>PTeIP# UkG,1)DVrC~;hC[J9aV#\\u001f`jN=17uqfchaG<bcvzWK^W.RkD9DGBB>9>C<GEBN<<Y~xpEZUJHJ=SC:2113:8<>?@?@HGMp342>80-1+)148==>accthb^a]izy#\\u001b\\u0017/C+24&!=aUGHATeqs`jFR_xlPi\\u001b\\u000f\\u0004,YPL7\\u001c\\u001aF|rTCO{SUnrmJUaOo7\\u001c\\u000f+^K/\\\"\\u0013\\u000e+UTol^oKQPE\\\\r||cPN#\\u001d2_8\\u0004\\u0010\\u001b\\u0013\\u001f+:IHbVELU;:DKgozt=\\u0014\\u00181V7\\b\\u0019%\\u0017\\u001b$0/7HId^]BA7\\\"!(7BAFq;\\u000f\\u0019-P5\\u001d:1$)-)==0&>D?$ \\\"\\u0017\\u0011\\u0019)\\u001b\\u001c\\u0018BhE\\u001e\\u0016\\u001d7$>c<435*<E\\u001d\\u001fPK+\\u0012\\u0011\\u0014\\u0010\\u0012\\u0015\\u001c)\\\"\\u001b+Z@\\u001a\\u0016\\u0017\\u001f\\u0015f6,'*+$61\\\"VK\\u0015\\u0014\\u001b\\u0015(36GJ8$5&\\u0003\\t\\u001d\\u001a\\u00110&#!' $(!>\\\\N!+8-?74>2=\\u001e&1\\u000f\\u0005\\u000e\\u0019\\u0018-\\u001e\\\"#)\\\"\\u0018\\u0014\\f\\u001b \\\"/(\\\"\\\"$()\\\"/B\\u001f65-\\u0012\\u0006\\t#ln+\\u0014!%$ $ \\u0018($\\u0016-\\u001f\\u001e#0;3 %%%1+,&\\u0010\\u0001\\u0012cg-\\r\\u001a%#\\u001f,$/WW\\u0018&4.,'&237(\\u001c5/(.\\u001f\\b\\bd7\\f\\r\\u0017 \\u001f\\u0017\\u0013\\u001a->\\u001a\\u001c10571<<9\\u001b\\u0011=0%'#\\u0014\\r\\\\F\\u000b\\u0007\\b\\u000f\\u0012\\u0012\\u0012\\u000b\\u0012\\u0017\\u0018\\u0016\\\"+&73,\\\"\\\"\\u0010&R2(#$(\\u0016CO\\r\\t\\u0004\\u0005\\u0006\\b\\t\\u0005\\b\\u000e\\u000f\\u000b\\u000e\\u0013\\r\\u0016\\u001c\\u001c!\\u001b\\u000e>X=<0-7 ,pA\\u000b\\u000b\\u0003\\u0001\\u0005\\t\\n\\u0007\\u0006\\u0006\\u0007\\u0006\\b\\n\\t\\u000f\\u0013\\u001a\\u001b\\u0014\\u001b=H@E<76*&e;\\u0005\\t\\u0006\\u0002\\u0006\\t\\u0007\\t\\n\\n\\n\\r\\b\\u0007\\u0007\\u0010\\u0010\\r\\u0015,517B;<825/O%\\u0007\\u0004\\u0004\\u0007\\b\\b\\u0006\\u0006\\u0006\\b\\u000b\\u000e\\u000b\\t\\b\\f\\r\\n\\u0011\\u001e*/2A:=>355#\\u000e\\u000b\\b\\u0002\\u0002\\u0002\\u0004\\n\\f\\r\\u0012\\u0010\\u000b\\b\\u0006\\u0006\\b\\n\\t\\f\\u000e\\u001a'+FAAE;/9 \\u0005\\u0006\\b\\u0004\\u0002\\u0000\\u0002\\u0005\\u0004\\u0005\\u0007\\u0006\\u0004\\u0004\\u0007\\u000b\\r\\r\\n\\f\\u000b\\u000f\\u001a$JHFJ@03:\\u001a\\u0006\\u0004\\u0003\\u0003\\u0004\\u0006\\u0005\\u0003\\u0004\\u0006\\u0006\\u0006\\u0006\\u000b\\u0010\\u0011\\u000f\\r\\u000e\\n\\u000e\\u0016\\u001bRNMQE40:5\\u0018\\n\\u0005\\u0006\\t\\t\\u0005\\u0005\\b\\u000b\\u000b\\n\\n\\u000f\\u0012\\u0010\\f\\r\\u0010\\u000e\\u000e\\u0011\\u0013\\u0002iv{ml[tHer~roiiYwn]xepzqhhTNfvkvPLMntl[JKIexphu^ywszsOxkgbOFNEU`gxgmv`0.Q{pehZNRSLPqVYXryn\\u000e\\b/G`ii\\\\XRX?M^^RM_n{vlul\\u000e1YfwmgOLUX@ORiaGQQUhw~^\\u001cqxq[GF[X4CPdcPS`]_^<-mUNW^\\\\7:7I_[L`oZ]|\\u001f8|dono89LO[YFL_ezx`N\\u001bE8?X]YZP=IrrY[L-kFNWhd`N@Prqbkb4IKR^TY\\\\U[}oEGGEXZ\\\\[Sq~KqnkxftzqyynkhvcCseSXagf[W]SFRO7^hm}J8EAKanb\\\\N:>@+RmCRlq|32Z68LecC8.12+Qk|f]fytv/@S+'39<3*\\u001d  <gu{}v1DC\\u0017\\u0011#/+)\\u001f\\u0015\\u0016\\u001aPswpV9,*')4\\u001e\\u0016::'`jsyys>*=\\u0014#hG:zqLqh{@?F\\r2c:U{]bx~{uz~WW^Kr`DC\\u0011Ia8_Z <`easf^ye}j\\\\cQV}M<&wMJUIW_bIVP@wtsulqqs[/'e^dGBA_fgB0;a}x|}sdxH&\\\\_j^F?_guc-7Sevg[atvhziggui.DQYa~~msuc\\\\rcivxpsl]`^UbuuunvycQf|xoennjn^[zmsrxsjf[~mp{{qsistyxwtvuuz=0Ma~uwdx;]~rlrrb|vI|d`tpUq}t`sgowv\\\\ibm}Yu{[aofzuRV_ult}p~tQepy|y}nbtwA^fonbhidpzEHQS\\\\ab^Z~Pdns{p}zSxnr~qpvj]ecNy[S_ZasupbMKIAwq6BkDEVqqRH>;:B|z*KV.,9AH?6,.1[k1VB\\u0015\\u0014)993*'-6w~wmD8949G*$T]NwS?T!3sj{KQP]\\u001cGfpsF?_WzmVW\\\"e\\\\JtX]G6G>TkQ;po{su~wkbSYS[VmzD;mglnOT}wv{rM`6ukjJJrb4SQ]pnb[9Rzq\\\\^W]iGiT=esw|th]SCIYUHdnaZ^myx_XIE9T1+]fi{xQAGNMO[\\\\c{yZkt\\\\bUOH9ABOzXPq~mE27=QP\\\\xseyIVlaTPT:14Im[OYADicC\\u001f)CMbyt}Y\\\\nkURG211@PA<abSaN@D7;Uvzxxq_RNF8.56:?>N]iGM_FUT>MbqqxycQOA9=>;3R;3(N_lyVAH;/Hhqzyn_Q[WOGF@J/.9:/%-08U[6\\u001e\\u001c*@LTcw_PIOZU86@I00)?>*5/##4=:>WZURPerIUXXK/,BF#%)5+#2?+\\u0016\\u001dH]\\\\hrla]inbcL>6=BD% \\u0018 \\u001f&\\\"+.\\u001d)KS^xniZNmwhl|]VKUOO!\\u001d,(-1$ !(C_ux~lT3\\u001cNtJT~{\\u0019\\u001e30-)+\\u001f Eflzk6\\u0015\\u0012SvBRjx#,4<5*!\\u001e(Jz_HMn^tni^QBj\\\"(/4)(+.<iChhoYNgXaiz!&'5<:48lMW_ayest6CqT[`teaWBAJAGgh<Vwqw{Q/OJ\\u0018\\u001b0?*Fddpkwyc_Y4+BA/\\f\\u000e\\u001b\\u0016\\u001d:nv:EpQZpi[OLA$)%0K8,  \\u001e+Kc#DY45LY\\\\OA.2*(7763QlA%.JKV$HK\\u0018\\u0010+DG=(\\u0012\\u0017\\u0016/XAA*?~[3\\\"akfaP5\\u001f\\u001a!8R.\\u0013$#\\u00108]BM0No=5kbsVeSLN1=_\\\"\\u0018C\\u001c\\u0011Pvw`FSThLNh[J&N60N)Wj (=\\b\\u001dH?=:A>+E`npfpCO.\\u001e\\u001f\\u0017@3Pf&%1\\u000e$#\\u0007\\u000b\\r &*\\\"3py]q1!L1\\u000e\\u001c\\u0013\\u001a9@T#%9,\\u001a'#\\u0019\\u0010$\\u001b\\u001f\\u0017\\u0013G]/ynK( (+\\u001c(+5ABD&(%A\\\"\\u001c\\u0016\\u0016\\u0011%\\u0019\\u0011\\u001948F,yd\\\\L2#\\u0016(H0!UTN<%+\\u001e84 \\u0011\\u0010\\u000e,6\\u0019!-&(8QJHPL/%6>&\\u0018/3?F<52@XU1\\u0013\\u00152<\\u0019\\u001f \\u001c\\u00181URZ\\\\S</#/9()979MI6*Bq^8+:=9(\\u001e\\u0013\\u001b0ftdMFK9+6GCBQA*/>9C8SjbG0:@0)\\u001d\\u001a,\\u0007\\u001c\\u001e!>?\\u001f\\u001d*7C\\\\L9KE9JbVG;>9*3.)&%+4.\\u001b\\u001b\\u0015&<')/0HxgBKn}mLRUR[cpus\\\"!\\u0018&R4+7Aqll-1.7S>,-6[ldwMTP5,.%&/:=9MfQ8\\\"\\u001f(7BUeeehk|BK4 Aein~nxGW: Gx~ln:I>\\u001fC~y~kfj?YS!<qua\\\\TPaS\\u001f2`~pPH@mbS>3DHn{{ydA:3e\\\\E5o^Zt{xzwd4-)hQ4Neyghy}ud|[+%\\u001bkJNmkliiUg}rurcYS5\\u001e\\u001c\\u0014yd_FLGET~l\\\\^cV[6\\u001d1\\u0017\\u0010{`:>06usT=@COD\\u001cB\\n``D/9ot^F1#%1zX\\u0012\\u001c0U::\\\\pR?5,Byr\\u0010gC\\u0010^+,y\\u0014Ew\\u0012{j\\u0013\\\"!K#yz\\u000f$2dAx\\u0012))nLm\\u0014\\u0019~\\u001apCH\\u0017\\t>e\\u0014t?)\\\"H(2qA\\u0014qH.\\u001ekn# fu41dWJ\\u0019YZ\\\"E~hYiwsvum|l0jyIOry}nyvyiy{~wx|z}}ujbvypjhe#\\\",ST1/>MSl`PcR;HgcPCC<.?<7538@:\\u001e\\u001c\\u001f:N56<<QuR\\\\{oPbjky$!\\u001e6_<09Cx}42/=Y@($.^uo_WJ/+*\\u001a\\u0016\\u001d*0/FbF(\\u001a\\u0017\\u0017 %-:>AGSoyaZL\\\\o52#\\u0016&667HQQYdYiwQO=8G_78!\\u0015%CJLFBKVemq~cUD10T&)\\\"\\u0011!>MP?GW]Zbry}vk^ioUL/)6&86\\u0014\\u001e6CJ:\\\\o\\\\U^lwtk]KZoPA($\\\"|x0>7\\u0018\\u001f/DKEk{_GUpwleW?@aR4 \\u001b\\u0016ak<.%7B&<HWu~mAJnka[I21IV2\\u001c\\u001a\\u0014_l3! |K0Kdoqj:>\\\\ZXL:366Y<\\u001a\\u0018\\u0015i0!KWGYPKO34SSO?694,S?\\u001a\\u0018\\u0011v9OO6/+1(9\\\\N?995,.8$\\u0017\\u0016\\u0011[\\\\+%\\u001e\\u001d%R]H70051A%\\u00175\\u0019\\u0011g1&\\u0013\\u0017EshG-#&*B? N\\u000foZ-\\u0010\\u0018IP@+\\u001c\\u001d .]\\u001b#;B\\u001d\\u001dKfL;69N~\\u0019|J\\u0018Z\\u0019\\u001d\\u001bV|\\u0018t\\u000e\\u001d)[+\\u0011\\\"=vN\\u0017*7[~\\u001d\\u001e*SZ%\\u0015Qz&Q<4Z=CW(]D40'vKGpb/pl-WuDdh',/HH.2?GJbUDXO<Id\\\\I>B?094/,)-5/&)'7B0;B=GufCLgw~xkoZ=KNHPVaed*+(:V87DGkhg.03BV@202OaZpECB2/3(\\u001f\\u001d#'%;S{jb]zl4'$&%$!-<?BEFWbMD4@O`{*4/\\u001d#0-1DOQZ[IP~a99*'5Bh5=+\\u0015\\u001e;>>;:GRZ]\\\\ficlobB;2##>e%-&\\u0017*@>@3<OUNR]__UQGMN<<% &te':5\\u001b.=3:-OaNHNW]VKD6?P83\\\"\\u001f\\u0019WT4A5\\u0018%05;6YgK9E[]OJB.*E9&\\u001b\\u0019\\u0012CJA3$).\\u00181:FaeS1:YQEE:(\\\"1<\\\"\\u0017\\u0018\\u0013FN:'\\u001f^w-(?RYUN+/G@=;2/-#?+\\u0015\\u0017\\u0016Rq7\\u001d3{83JD=?,*@=9/.61!>7 \\u001e\\u0012Y7:r{.(,*-%-F9--10($)#\\u001e\\u001d\\u0013h~DFX\\u0016!\\u001e\\u001a\\u001b@E2+220!+\\u0018\\u0011'\\u0012\\u0015n~>m}\\u0017 \\u0017\\u0019<bV<-0- #e/\\u0015k2\\u0013Y<'\\u0019\\\"DC4(\\\"%\\u001c\\u0017TD\\u0012qp\\u001f-~7%(>M4+,(3]V\\u0017P8\\u0011eE\\u001c!_|wsh\\\"5\\\\\\u0013_U\\u000f\\u001dp{*@\\u001d_f\\u0014$/Z0`r\\u0017-%c?]n\\u0018\\u001f{f\\u0017e>Bj\\u001a\\u000e@uqvS\\u0014i<(}j$L'-c}zvp3\\u0014e|>,~r kc$(Zy}z|w]+2XlpBBto\\u0019XX->amylSNfi^a]_iz\\\\-hzmBDai{xvovrrl]fenvv~uy~}i`}xlv{}vniryswpw|}vjl|u}}zngimr~wwo{||rxuu|y{xvow|fvuYSknaqudc`\\by|||}}~~~y{}}~~~~~~~zz}|~~z{|}|w}}{~~y|~{|~~~~~~~^afghoqvt|~~}}~~~}{,,.37;@E=Ssypmpvuxqrtmjnwyxt---,-**4/HrgCDDELQKLMFACKMLR,+,****07JZp{tdU9+-,0023220//../))*(()*,=RFRTJRPD305420/..-++++*+,,+*++-:YFDONYJOP0+0110//.-,++*+++*****2UEIfo@.12-,--,,))*&(*))))(/Zyr+-.10///,+**%'))('('2]zm7/...++)'++*(''&%$%%3@5P_]MHLo58GT[\\\\UL=((+)/+$#$$49\\\";]ZYQLok?&12A7\\\"$##:9&YufT;X<'<?/%\\u001f\\\"##<9XxcJG_6').+%$%%$&?`]xk0\\u001f1'%'(')*)%*)Vq<\\u0018\\u000b\\b\\u0019((**)(*0?847rp?\\u001c\\u000f\\f\\n\\r\\u0013&'%''00VyyR)\\u0015\\u000f\\f\\f\\f\\r\\u0010\\u0018')('&o'\\u0013\\u0011\\u000f\\r\\u000e\\r\\u000e\\u0014\\u001a\\u001e')&'&svpSO9&#\\u001f\\u0018\\u0014\\u001d\\u001f\\u0017\\u0017#&%$%\\\"8Wjy`;..prd>\\u0017\\u0015\\u001b!  \\\"#\\u001f}dBE6Px5\\u001b\\u001a\\u0017\\u0014\\u001d\\u001f \\u001esoeHBNl3\\u0015\\u0012\\u000e\\u0016\\u001a\\u001c\\u001dlNTU\\u0018\\u0011\\u0011\\u0015\\u001a\\u001b\\u001bxsy2\\u0016\\u0015\\u0017\\u001b\\u001d\\u001cr,\\u0016\\u0019\\u001e\\u001e\\u001e?\\u0019\\u001c\\u001f  zy{||~|}}}~~~~zz|zy{{|~~}}~~}|}~}|}~~}~~~}|||||}|||{|y~~}}{{|yyzyyzy{}~|{{{vwyyxwwy~zx{{zvvwvutuv}~l[yyuuyxtstt}vkZ~}}uz|ssssuiLfxsysprsr~|}\\\\Zwquwrrttttsqw:>xsrstquxuuvryG$\\u0018\\u0018Ouorrtqtz~y{L*\\u001d\\u0019\\u0016\\u0015(dqmooww]5\\\"\\u001e\\u001c\\u0019\\u0019\\u0019\\u001f;jopon9#!!\\u001f\\u001b\\u0019\\u001e%+QnmmnmzlXbT<683).-#3bkiijgYcotjNFJW$ LeabghdcYKXUBOST^decd[]aGEJW^`ao]l|FCLV]^^~ZHPW^`^^OX_`_oPY^^^k}iz]uklDT~O-\\u001f\\\"rV4&\\\"\\u001f\\u001f9iF5.,%!#-WK6671)#(27r~ubzlRNNH;<9.Frpyux^\\\\cn4+krcZfmZjuuxjb{\\\\aizx~\\\\^l{rdt}ut\\u0003}nfjjjJGIP`n|vXCGPMRZ^foA>@?BHKPT^mzv039>@BCA?>>AH+\\u001f)3:;:876654puQ\\\\m^QE:1,+,28Bi\\\\ly]SLrMXtyRd^b_aNJHU`]J'&(,AAE8KlLf{z~~yYXXO0$\\\"&30?2CT2'+0.03/zF=YQ2%!$/:1$;WjwbQ1 \\u001d\\u001c\\u001c\\u0019\\u0018\\u0017\\u0016\\u0018A9RA-*&#+95(4+\\u0018\\\"('\\u001e\\u001c\\u001b\\u001e\\u001d\\u001c\\u001b\\u001b\\u001b\\u001b\\u001a\\u001aM8@5))$!%(.)+\\u001f\\u0011\\u0014\\u0017\\u0016\\u0017\\u0019\\u0017\\u0019\\u001b\\u001b\\u0018\\u0018\\u0018\\u0018\\u0017\\u0018^II6/&\\\"%&*&(+\\u0019\\u0011\\u0013\\u0015\\u0014\\u0014\\u0014\\u0014\\u0016\\u0017\\u0019\\u0019\\u0019\\u0019\\u0018\\u0017\\u0017gYR8D>5/).-('\\u0016\\u0011\\u0012\\u0013\\u0013\\u0013\\u0012\\u0013\\u0015\\u0017\\u0019\\u0019\\u0019\\u0019\\u0017\\u0016\\u0016x]bNRD`Q@>-0,\\u001f\\\"\\u0016\\u0011\\u0012\\u0014\\u0014\\u0014\\u0012\\u0013\\u0014\\u0017\\u0019\\u001a\\u0019\\u0018\\u0017\\u0016\\u0015UCeUM>eRC3,7,\\u001e\\u001c\\u0014\\u0011\\u0012\\u0013\\u0014\\u0015\\u0013\\u0013\\u0014\\u0017\\u0019\\u001a\\u0019\\u0017\\u0017\\u0016\\u0017A?e^?JXW;*3('(\\u001a\\u0012\\u0013\\u0013\\u0012\\u0014\\u0016\\u0013\\u0013\\u0013\\u0017\\u001b\\u001a\\u0018\\u0017\\u0017\\u0017\\u00183=W[IOQ]3).'&$\\u0016\\u0012\\u0014\\u0013\\u0012\\u0014\\u0015\\u0013\\u0013\\u0013\\u0016\\u001e\\u001c\\u0017\\u0017\\u0017\\u0017\\u0016*6EZdlZI139D,\\u001b\\u0012\\u0012\\u0015\\u0014\\u0014\\u0015\\u0014\\u0013\\u0013\\u0013\\u0015\\u001b\\u001d\\u0018\\u0015\\u0017\\u0017\\u0017&4E[h9KTJ?(\\u0019\\u0014\\u0013\\u0015\\u0015\\u0016\\u0016\\u0013\\u0012\\u0013\\u0013\\u0014\\u0019\\u001d\\u0018\\u0017\\u0019\\u0018\\u0017DWgldoVkg:& \\u001a\\u0015\\u0014\\u0015\\u0015\\u0015\\u0015\\u0014\\u0013\\u0014\\u0014\\u0015\\u0019\\u001e\\u0018\\u0019\\u001c\\u0018\\u0017gqvWD:ZnY7\\u001c\\u001c\\u001b\\u0019\\u0016\\u0015\\u0015\\u0015\\u0015\\u0014\\u0016\\u0015\\u0015\\u0016\\u0016\\u0017\\u001d\\u0018\\u0019\\u001c\\u0018\\u0017rtlUHCMO-\\u001b\\u0017\\u0017\\u0018\\u0017\\u0016\\u0014\\u0013\\u0014\\u0014\\u0014\\u0015\\u0019\\u0017\\u0016\\u0014\\u0015\\u0018\\u0015\\u0017\\u001b\\u0016\\u0016cDA;334&\\u0019\\u001b\\u0019\\u0017\\u0015\\u0015\\u0014\\u0012\\u0012\\u0013\\u0017\\u0015\\u0018\\u0018\\u0016\\u0017\\u0015\\u0014\\u0013\\u0016\\u001c\\u0017\\u0017zG(\\\"\\\"\\u001e(,#\\u0018\\u001d\\u001a\\u0015\\u0014\\u0015\\u0016\\u0014\\u0012\\u0014\\u0018\\u0015\\u0015\\u0018\\u0017\\u001d\\u001c\\u001b\\u0019\\u0017\\u001a\\u0019\\u001bqB*\\u001f\\u001f\\\"+0)!\\u001b\\u001a\\u0015\\u0014\\u0016\\u0018\\u0014\\u0012\\u0016\\u0019\\u0018\\u001a\\u001c\\u001f(,-)%%%(i>+\\\"\\u001f#*40(\\u001d\\u0017\\u0014\\u0014\\u0013\\u0014\\u0013\\u0012\\u0015\\u0017\\u0019$.<FHLNMNRWgPB;:?EKH90,&\\\" \\u001d\\u001c\\u001d &5L[cefimnoruheecehhfdV[]VPMLKMS\\\\hruxz}~~~}himrwwvsmgtrsstuuvxz{|}~ils{~{rw|xy|~}eZacX68=FSbq~lM56<6:BIVcvs0$&'.428?J]or! #%%\\\"$%%&)+2%\\u0014\\u0018\\u001b\\u001f#$$%%#\\\"!ieALeUG9.%  !%*4_GcwQ>8hDOk~p=Z[`_\\\\C:5zxAUYF%&),>9;,9fF`uu}}sDLRJ,\\\"!%.&6*2~Q/#',+.1-w53SK.#!$(/)\\u001e,Lhw\\\\L,\\u001c\\u001b\\u0019\\u001a\\u0017\\u0015\\u0013\\u0012\\u0014>7M=-,)!&20\\\"+'\\u0019\\\"&%\\u001c\\u001b\\u001a\\u001d\\u001c\\u001b\\u001a\\u001a\\u001a\\u0019\\u0018\\u0018N7<2)+&\\u001e!$*$$\\u001d\\u0014\\u0015\\u0015\\u0016\\u0018\\u0019\\u0017\\u0019\\u001a\\u001a\\u0017\\u0017\\u0017\\u0017\\u0016\\u0017\\\\FE3-% !\\\"&\\\"#$\\u0017\\u0014\\u0014\\u0013\\u0014\\u0014\\u0014\\u0014\\u0016\\u0016\\u0018\\u0018\\u0018\\u0018\\u0017\\u0015\\u0016dTO5@:0+%*)$ \\u0015\\u0013\\u0013\\u0011\\u0012\\u0013\\u0012\\u0013\\u0014\\u0016\\u0018\\u0018\\u0018\\u0018\\u0016\\u0015\\u0015xZ^HPAZH79),)\\u001b\\u001b\\u0014\\u0013\\u0013\\u0012\\u0013\\u0014\\u0012\\u0013\\u0014\\u0016\\u0018\\u0019\\u0018\\u0017\\u0016\\u0015\\u0014Q=_QK;^H8/+4)\\u0018\\u0016\\u0013\\u0013\\u0013\\u0012\\u0014\\u0015\\u0013\\u0013\\u0014\\u0016\\u0018\\u0019\\u0018\\u0016\\u0016\\u0015\\u001652][<DRN0)3%!!\\u0018\\u0012\\u0013\\u0013\\u0012\\u0014\\u0016\\u0013\\u0013\\u0013\\u0016\\u001a\\u0019\\u0017\\u0016\\u0016\\u0016\\u0017,1MVEIJT(!(! \\u001f\\u0015\\u0012\\u0014\\u0013\\u0012\\u0014\\u0015\\u0013\\u0013\\u0013\\u0015\\u001c\\u001b\\u0016\\u0016\\u0016\\u0016\\u0015&,9P_fS?%#*;'\\u0019\\u0012\\u0012\\u0015\\u0014\\u0014\\u0015\\u0014\\u0013\\u0013\\u0013\\u0014\\u001a\\u001c\\u0017\\u0014\\u0016\\u0016\\u0016\\u001d&6Ocz0>C;6%\\u0019\\u0014\\u0013\\u0015\\u0015\\u0016\\u0016\\u0013\\u0012\\u0013\\u0013\\u0014\\u0018\\u001c\\u0017\\u0016\\u0018\\u0017\\u00161CT^`kK_\\\\1!\\u001f\\u001b\\u0015\\u0014\\u0015\\u0015\\u0015\\u0015\\u0014\\u0013\\u0014\\u0014\\u0014\\u0018\\u001d\\u0017\\u0018\\u001b\\u0017\\u0016N[fL?4RfQ1\\u0019\\u001a\\u001b\\u0019\\u0016\\u0015\\u0015\\u0015\\u0015\\u0014\\u0016\\u0016\\u0014\\u0015\\u0016\\u0017\\u001c\\u0017\\u0018\\u001c\\u0017\\u0017]dcO@;GM-\\u001b\\u0017\\u0017\\u0017\\u0016\\u0016\\u0014\\u0013\\u0014\\u0014\\u0015\\u0017\\u0019\\u0016\\u0014\\u0015\\u0017\\u0019\\u0016\\u0018\\u001c\\u0017\\u0017qX?@7.05(\\u001a\\u001b\\u0018\\u0016\\u0014\\u0015\\u0014\\u0012\\u0012\\u0013\\u0017\\u0016\\u0019\\u001b\\u0018\\u0019\\u0016\\u0016\\u0015\\u0017\\u001d\\u0018\\u0019m>&$\\\"\\u001c',#\\u0018\\u001d\\u0019\\u0014\\u0014\\u0015\\u0016\\u0014\\u0012\\u0014\\u0017\\u0015\\u0016\\u001b\\u001a\\u001a\\u0019\\u0018\\u0016\\u0014\\u0017\\u0016\\u0019b9'\\u001f\\u001f\\u001f&+#\\u001f\\u001b\\u0019\\u0014\\u0013\\u0015\\u0018\\u0014\\u0012\\u0016\\u0017\\u0015\\u0016\\u0018\\u001a\\u001e\\\"#\\u001e\\u001b\\u001b\\u001b\\u001eV0$\\u001f\\u001c\\u001d!($&\\u001e\\u0017\\u0014\\u0013\\u0013\\u0014\\u0013\\u0012\\u0015\\u0016\\u0015\\u001a\\u001f)36:<;<?ER>40.15751+& \\u001b\\u0019\\u0017\\u0016\\u0016\\u0019\\u001d(:CIMNQUVX[^RPQOOQQOMCJLD=;:9;@FPY\\\\^aceeeggeQTX]``_\\\\VO]\\\\\\\\\\\\^__`aabcdehjlmoqqpSW^fiigdZ[`]_aceefedeghikmnpruttt[S^`S115?M\\\\k|~lK,,1'*;CNZol\\\"\\u0019\\u001a\\u001b!'(.5>Uqk\\u0014\\u0013\\u0018\\u001b\\u001b\\u0016\\u0017\\u0018\\u0016\\u0019#&-z\\u001d\\f\\u0011\\u0016\\u001a\\u001d\\u001d\\u001d\\u001d\\u001b\\u0016\\u0015\\u0014^\\\\{4?hTB2'\\u001e\\u0019\\u0018\\u001a\\u001f$.R;WmK1+}c?Jg~d2MOVYX;.)}zn6GJ9\\u001c!&*:22!-fD_stk9=A: \\u001a\\u001c\\\"&\\u001b+ &wP)\\u001d!%&,/+p*#A;\\\"\\u001a\\u001a\\u001e\\u001f#\\u001e\\u0017\\\"EhyaL'\\u0014\\u0011\\u0010\\u0010\\r\\r\\u000e\\r\\u000f1%@3#\\\" \\u0019\\u001e*(\\u001b$ \\u0015!%&\\u001c\\u0019\\u0017\\u0019\\u0017\\u0016\\u0015\\u0014\\u0015\\u0014\\u0013\\u0014C(1*\\u001f \\u001b\\u0015\\u0018\\u001c!\\u001c\\u001e\\u0016\\u000e\\u0012\\u0014\\u0014\\u0016\\u0017\\u0015\\u0017\\u0016\\u0016\\u0013\\u0013\\u0013\\u0013\\u0012\\u0013T::(\\\"\\u001a\\u0015\\u0016\\u0018\\u001b\\u0017\\u0019\\u001d\\u0010\\u000e\\u0011\\u0011\\u0012\\u0012\\u0012\\u0012\\u0014\\u0013\\u0014\\u0014\\u0014\\u0014\\u0013\\u0011\\u0012ZGB(4.$\\u001f\\u001a\\u001e\\u001d\\u0019\\u001a\\u000e\\r\\u0010\\u0010\\u0010\\u0011\\u0010\\u0011\\u0012\\u0013\\u0014\\u0014\\u0014\\u0014\\u0012\\u0011\\u0011oNM7@4M=++\\u001b\\u001e\\u001b\\u000e\\u0014\\r\\r\\u0010\\u0010\\u0011\\u0012\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0014\\u0013\\u0012\\u0011\\u0010C/N?<,O:,#\\u001e'\\u001a\\u000b\\u0010\\r\\u000e\\u0010\\u0010\\u0012\\u0013\\u0011\\u0011\\u0012\\u0013\\u0014\\u0015\\u0014\\u0012\\u0012\\u0011\\u0012()RO38>;$#,\\u001b\\u0015\\u0016\\u0013\\u000f\\u0010\\u0011\\u0010\\u0012\\u0014\\u0011\\u0011\\u0011\\u0012\\u0016\\u0015\\u0013\\u0012\\u0012\\u0012\\u0013 (BJ;;7B\\u001b\\u0016\\u001d\\u0015\\u0015\\u0015\\u0011\\u0010\\u0012\\u0011\\u0010\\u0012\\u0013\\u0011\\u0011\\u0011\\u0011\\u0018\\u0017\\u0012\\u0012\\u0012\\u0012\\u0011\\u001b\\u001c(@QWC0\\u0016\\u0011\\u0019-\\u001e\\u0012\\u000f\\u0010\\u0013\\u0012\\u0012\\u0013\\u0012\\u0011\\u0011\\u0011\\u0010\\u0016\\u0018\\u0013\\u0010\\u0012\\u0012\\u0012\\f\\u000e\\u001e<Oon$00**\\u001d\\u0014\\u0011\\u0011\\u0013\\u0013\\u0014\\u0014\\u0011\\u0010\\u0011\\u0010\\u0010\\u0014\\u0018\\u0013\\u0012\\u0014\\u0013\\u0012\\u0016 7JIY|BRM$\\u0017\\u0017\\u0016\\u0013\\u0012\\u0013\\u0013\\u0013\\u0013\\u0012\\u0012\\u0012\\u0012\\u0010\\u0015\\u0019\\u0013\\u0014\\u0017\\u0013\\u0012*6G6(\\\"G[C&\\u000f\\u0012\\u0015\\u0014\\u0014\\u0013\\u0013\\u0013\\u0013\\u0012\\u0013\\u0012\\u0010\\u0010\\u0011\\u0012\\u0017\\u0012\\u0014\\u0017\\u0013\\u00125FI8.+8=\\u001c\\u000e\\r\\u0010\\u0013\\u0012\\u0014\\u0012\\u0011\\u0012\\u0012\\u0011\\u0012\\u0013\\u000f\\r\\u000e\\u0010\\u0013\\u0010\\u0012\\u0018\\u0012\\u0011M@+,(\\\"#'\\u0019\\u000e\\u0011\\u0012\\u0011\\u0011\\u0012\\u0012\\u0010\\u0010\\u0010\\u0012\\u0010\\u0014\\u0016\\u0014\\u0015\\u0012\\u0012\\u0011\\u0014\\u001c\\u0016\\u0013M*\\u0015\\u0014\\u0016\\u0012\\u001d!\\u0018\\r\\u0013\\u0013\\u0010\\u0010\\u0013\\u0015\\u0012\\u0011\\u0011\\u0011\\u000f\\u0011\\u0017\\u0016\\u0018\\u0016\\u0015\\u0013\\u0012\\u0015\\u0013\\u0012C%\\u0017\\u0011\\u0012\\u0014\\u001c!\\u0019\\u0014\\u0011\\u0012\\u000f\\u000f\\u0013\\u0016\\u0012\\u0011\\u0012\\u0010\\f\\u000e\\u000f\\u0010\\u0014\\u0017\\u0019\\u0014\\u0011\\u0010\\u000e\\u000f6\\u001c\\u0015\\u0010\\r\\u0010\\u0015\\u001d\\u0019\\u001c\\u0015\\u0011\\u0010\\u0010\\u0011\\u0012\\u0012\\u0011\\u0013\\u0011\\f\\f\\r\\u0014\\u001c\\u001f#%##%'.!\\u001a\\u0015\\u0016\\u001b #\\\"\\u001e\\u0019\\u0016\\u0014\\u0013\\u0013\\u0011\\u0010\\u0011\\u0012\\u000e\\u0014#'*,-16769;)'&#*..,*$)*''%$#&(#*4689=BDCCED()+.5652..825854567778:;@CHLMNPQ*-27<=;809:/056788888;<>CFKOQRTV\";\r\n\r\nexport default {\r\n  id: `testDataset`,\r\n  name: `cifar-10`,\r\n  imageSize: 32,\r\n  colorDepth: 3,\r\n  data: object,\r\n  vectorize: true,\r\n  normalizeMax: 255,\r\n};\r\n","import testDataset from \"./testDataset\";\r\nimport {\r\n  stringToUint8Array,\r\n  uint8ArrayToString,\r\n} from \"../CNN-js/datasetProcessor\";\r\nimport { CNN, NetworkArchitectures } from \"../CNN-js/cnn\";\r\n\r\nwindow.deleteDatabase = () => {\r\n  window.indexedDB.deleteDatabase(\"CNNjs-localStore\");\r\n};\r\n\r\n//init database\r\nconst openDb = () => {\r\n  return new Promise((resolve, reject) => {\r\n    const promiseDb = window.indexedDB.open(\"CNNjs-localStore\", 1);\r\n\r\n    promiseDb.onupgradeneeded = (event) => {\r\n      const db = event.target.result;\r\n      if (!db.objectStoreNames.contains(\"networks\")) {\r\n        db.createObjectStore(\"networks\", { keyPath: \"id\" });\r\n      }\r\n      if (!db.objectStoreNames.contains(\"datasets\")) {\r\n        db.createObjectStore(\"datasets\", { keyPath: \"id\" });\r\n      }\r\n    };\r\n\r\n    promiseDb.onsuccess = (db) => {\r\n      resolve(promiseDb.result);\r\n    };\r\n    promiseDb.onerror = (e) => reject(e);\r\n  });\r\n};\r\n\r\nconst addRecord = (store_name, data) => {\r\n  return new Promise((resolve, reject) => {\r\n    openDb().then((db) => {\r\n      const tx = db\r\n        .transaction(store_name, \"readwrite\")\r\n        .objectStore(store_name)\r\n        .put(data);\r\n\r\n      tx.onsuccess = () => {\r\n        resolve();\r\n      };\r\n      tx.onerror = (e) => {\r\n        reject(e);\r\n      };\r\n    });\r\n  });\r\n};\r\n\r\nconst getRecord = (store_name, id) => {\r\n  return new Promise((resolve, reject) => {\r\n    openDb().then((db) => {\r\n      const tx = db.transaction(store_name).objectStore(store_name).get(id);\r\n\r\n      tx.onsuccess = (event) => {\r\n        resolve(tx.result);\r\n      };\r\n      tx.onerror = (e) => {\r\n        reject(e);\r\n      };\r\n    });\r\n  });\r\n};\r\n\r\nconst getAllRecordsAsObject = (store_name, keyProp) => {\r\n  return new Promise((resolve, reject) => {\r\n    openDb().then((db) => {\r\n      const out = {};\r\n      db\r\n        .transaction(store_name, \"readonly\")\r\n        .objectStore(store_name)\r\n        .openCursor().onsuccess = function (event) {\r\n        var cursor = event.target.result;\r\n        if (cursor) {\r\n          out[cursor.value[keyProp]] = cursor.value;\r\n          cursor.continue();\r\n        } else {\r\n          resolve(out);\r\n        }\r\n      };\r\n    });\r\n  });\r\n};\r\n\r\nexport function getNetworks(server) {\r\n  return new Promise(async (resolve, reject) => {\r\n    if (server.url === `local`) {\r\n      let localExisting = await getAllRecordsAsObject(`networks`, `id`);\r\n      if (!localExisting) {\r\n        localExisting = {};\r\n      }\r\n\r\n      const deserialized = {};\r\n\r\n      Object.keys(localExisting).forEach((stringCNNIndex) => {\r\n        const o = new CNN(localExisting[stringCNNIndex]);\r\n        o.name = localExisting[stringCNNIndex].name;\r\n        o.id = localExisting[stringCNNIndex].id;\r\n        deserialized[stringCNNIndex] = o;\r\n      });\r\n\r\n      resolve(deserialized);\r\n    } else {\r\n      fetch(`${server.url}/getNetworks`, {\r\n        method: `GET`,\r\n        headers: {\r\n          Authorization: `Bearer ${server.apiToken}`,\r\n        },\r\n      })\r\n        .then((response) => response.json())\r\n        .then((json) => {\r\n          if (json.err) throw json.err;\r\n          resolve(json);\r\n        })\r\n        .catch(reject);\r\n    }\r\n  });\r\n}\r\n\r\nexport function createNetwork(name, shape, server) {\r\n  return new Promise((resolve, reject) => {\r\n    if (server.url === `local`) {\r\n      const neuralNet = new CNN(shape || NetworkArchitectures.LeNet5);\r\n      neuralNet.serializeParams = [\"id\", \"name\"];\r\n      const net_id = new Date().getTime();\r\n      neuralNet.name = name || net_id;\r\n      neuralNet.id = net_id;\r\n      addRecord(\"networks\", JSON.parse(JSON.stringify(neuralNet)))\r\n        .then(() => {\r\n          resolve();\r\n        })\r\n        .catch((e) => reject(e));\r\n    } else {\r\n      fetch(\r\n        `${server.url}/createCnn?name=${name}&shape=${JSON.stringify(shape)}`,\r\n        {\r\n          method: `POST`,\r\n          headers: {\r\n            Authorization: `Bearer ${server.apiToken}`,\r\n          },\r\n        }\r\n      )\r\n        .then((response) => response.json())\r\n        .then((json) => {\r\n          if (json.err) throw json.err;\r\n          resolve(json);\r\n        })\r\n        .catch(reject);\r\n    }\r\n  });\r\n}\r\n\r\nexport function getNetwork(id, server) {\r\n  return new Promise((resolve, reject) => {\r\n    if (server.url === `local`) {\r\n      getRecord(`networks`, parseInt(id))\r\n        .then((saved) => {\r\n          console.log(saved);\r\n          if (saved) {\r\n            resolve(\r\n              Object.assign(new CNN(saved), {\r\n                name: saved.name,\r\n                id: saved.id,\r\n              })\r\n            );\r\n          } else {\r\n            reject(`Network doesn't exist`);\r\n          }\r\n        })\r\n        .catch(() => reject(`Local database error`));\r\n    } else {\r\n      fetch(`${server.url}/getNetwork/${id}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${server.apiToken}`,\r\n        },\r\n      })\r\n        .then((res) => res.json())\r\n        .then((json) => {\r\n          if (json.err) throw json.err;\r\n          else resolve(json);\r\n        })\r\n        .catch(reject);\r\n    }\r\n  });\r\n}\r\n\r\nexport function login(user, pass, server) {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(`${server.url}/login`, {\r\n      method: `POST`,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        user,\r\n        pass,\r\n      }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((json) => {\r\n        if (json.err) throw json.err;\r\n        else resolve(json.token);\r\n      })\r\n      .catch(reject);\r\n  });\r\n}\r\n\r\nexport function getDatasets(server) {\r\n  return new Promise((resolve, reject) => {\r\n    if (server.url === `local`) {\r\n      getAllRecordsAsObject(`datasets`, `id`)\r\n        .then((localExisting) => {\r\n          if (!localExisting) {\r\n            localExisting = { testDataset: testDataset };\r\n          }\r\n\r\n          Object.keys(localExisting).forEach((id) => {\r\n            if (typeof localExisting[id].data === \"string\") {\r\n              localExisting[id].data = stringToUint8Array(\r\n                localExisting[id].data\r\n              );\r\n            }\r\n            localExisting[id].full = true;\r\n          });\r\n          resolve(localExisting);\r\n        })\r\n        .catch((e) => reject(e));\r\n    } else {\r\n      fetch(`${server.url}/getDatasets`, {\r\n        method: `GET`,\r\n        headers: {\r\n          Authorization: `Bearer ${server.apiToken}`,\r\n        },\r\n      })\r\n        .then((response) => response.json())\r\n        .then((json) => {\r\n          if (json.err) throw json.err;\r\n          //TODO: parse string data to uint8Array\r\n          resolve(json);\r\n        })\r\n        .catch(reject);\r\n    }\r\n  });\r\n}\r\n\r\nexport function getDataset(id, server) {\r\n  return new Promise((resolve, reject) => {\r\n    if (server.url === `local`) {\r\n      getRecord(`datasets`, id)\r\n        .then((dataset) => {\r\n          resolve(dataset);\r\n        })\r\n        .catch((e) => reject(e));\r\n    } else {\r\n      fetch(`${server.url}/getDataset/${id}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${server.apiToken}`,\r\n        },\r\n      })\r\n        .then((res) => res.json())\r\n        .then((json) => {\r\n          if (json.err) throw json.err;\r\n          else resolve(json);\r\n        })\r\n        .catch(reject);\r\n    }\r\n  });\r\n}\r\n\r\nexport function newDataset(dataset, server) {\r\n  return new Promise((resolve, reject) => {\r\n    if (server.url === `local`) {\r\n      addRecord(`datasets`, dataset)\r\n        .then(() => resolve())\r\n        .catch((e) => reject(e));\r\n    } else {\r\n      //TODO: newDataset on server\r\n    }\r\n  });\r\n}\r\n\r\nexport function setNetwork(network, server) {\r\n  return new Promise((resolve, reject) => {\r\n    if (server.url === `local`) {\r\n      addRecord(`networks`, JSON.parse(JSON.stringify(network)))\r\n        .then(() => resolve())\r\n        .catch((e) => reject(e));\r\n    } else {\r\n      //TODO: newDataset on server\r\n    }\r\n  });\r\n}\r\n\r\nexport function getDemoNetwork() {\r\n  return new Promise((resolve) => {\r\n    fetch(process.env.PUBLIC_URL + `/Cifar-10-LeNet5.cnn`)\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        resolve(res);\r\n      });\r\n  });\r\n}\r\n\r\nexport function getDemoDatasets() {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(process.env.PUBLIC_URL + `/datasets_metadata.json`)\r\n      .then((res) => res.json())\r\n      .then((metadata) => {\r\n        let responded = 0;\r\n        metadata.forEach((m, i) => {\r\n          fetch(process.env.PUBLIC_URL + `/` + m.name + \".bin\")\r\n            .then((res) => res.arrayBuffer())\r\n            .then((dataset) => {\r\n              metadata[i].data = new Uint8Array(dataset);\r\n              responded++;\r\n              if (responded === metadata.length)\r\n                resolve(metadata.filter((e) => e.data));\r\n            })\r\n            .catch((e) => reject(e));\r\n        });\r\n      });\r\n  });\r\n}\r\n","import {\r\n  getNetworks,\r\n  createNetwork,\r\n  getNetwork,\r\n  setNetwork as setNetworkApi,\r\n  getDemoNetwork,\r\n} from \"../../other/api\";\r\n\r\nimport { CNN } from \"../../CNN-js/cnn.js\";\r\n\r\nexport const FETCH_NETWORKS_REQUEST = `FETCH_NETWORKS_REQUEST`;\r\nexport const FETCH_NETWORKS_SUCCESS = `FETCH_NETWORKS_SUCCESS`;\r\nexport const FETCH_NETWORKS_ERROR = `FETCH_NETWORKS_ERROR`;\r\nexport const UNLOAD_NETWORKS = `UNLOAD_NETWORKS`;\r\n\r\nexport const NEW_NETWORK_REQUEST = `NEW_NETWORK_REQUEST`;\r\nexport const NEW_NETWORK_SUCCESS = `NEW_NETWORK_SUCCESS`;\r\nexport const NEW_NETWORK_ERROR = `NEW_NETWORK_ERROR`;\r\n\r\nexport const FETCH_NETWORK_REQUEST = `FETCH_NETWORK_REQUEST`;\r\nexport const FETCH_NETWORK_SUCCESS = `FETCH_NETWORK_SUCCESS`;\r\nexport const FETCH_NETWORK_ERROR = `FETCH_NETWORK_ERROR`;\r\n\r\nexport const SET_NETWORK_REQUEST = `SET_NETWORK_REQUEST`;\r\nexport const SET_NETWORK_SUCCESS = `SET_NETWORK_SUCCESS`;\r\nexport const SET_NETWORK_ERROR = `SET_NETWORK_ERROR`;\r\n\r\nexport const setNetworkRequest = ({ server, network }) => ({\r\n  type: SET_NETWORK_REQUEST,\r\n  server,\r\n  network,\r\n});\r\n\r\nexport const setNetworkSuccess = ({ server, network }) => ({\r\n  type: SET_NETWORK_SUCCESS,\r\n  server,\r\n  network,\r\n});\r\n\r\nexport const setNetworkError = ({ server, network, err }) => ({\r\n  type: SET_NETWORK_ERROR,\r\n  server,\r\n  network,\r\n  err,\r\n});\r\n\r\nexport const newNetworkRequest = () => ({\r\n  type: NEW_NETWORK_REQUEST,\r\n});\r\nexport const newNetworksSuccess = () => ({\r\n  type: NEW_NETWORK_SUCCESS,\r\n});\r\nexport const newNetworkError = ({ error }) => ({\r\n  type: NEW_NETWORK_ERROR,\r\n  error,\r\n});\r\n\r\nexport const requestNetworks = ({ server }) => ({\r\n  type: FETCH_NETWORKS_REQUEST,\r\n  server,\r\n});\r\nexport const networksSuccess = ({ networks, server }) => ({\r\n  type: FETCH_NETWORKS_SUCCESS,\r\n  networks,\r\n  server,\r\n});\r\nexport const networksError = ({ err, server }) => ({\r\n  type: FETCH_NETWORKS_ERROR,\r\n  error: err,\r\n  server,\r\n});\r\n\r\nexport const unloadNetworks = ({ server }) => ({\r\n  type: UNLOAD_NETWORKS,\r\n  server,\r\n});\r\n\r\nexport const requestNetwork = ({ server, networkId }) => ({\r\n  type: FETCH_NETWORK_REQUEST,\r\n  networkId: networkId,\r\n  server,\r\n});\r\nexport const networkSuccess = ({ server, network }) => ({\r\n  type: FETCH_NETWORK_SUCCESS,\r\n  network,\r\n  networkId: network.id,\r\n  server,\r\n});\r\nexport const networkError = ({ server, networkId, err }) => ({\r\n  type: FETCH_NETWORK_ERROR,\r\n  error: err,\r\n  networkId: networkId,\r\n  server,\r\n});\r\n\r\nexport const fetchNetworks = (server, dispatch) => {\r\n  dispatch(requestNetworks({ server }));\r\n  getNetworks(server)\r\n    .then(async (networks) => {\r\n      Object.keys(networks).forEach((n) => (networks[n].reduced = true));\r\n      if (Object.keys(networks).length === 0) {\r\n        setNetwork(server, await getDemoNetwork(), dispatch);\r\n      }\r\n      dispatch(networksSuccess({ networks, server }));\r\n    })\r\n    .catch((err) => dispatch(networksError({ err, server })));\r\n};\r\n\r\nexport const newNetwork = (name, shape, server, dispatch) => {\r\n  dispatch(newNetworkRequest());\r\n  createNetwork(name, shape, server)\r\n    .then(() => {\r\n      console.log(`complete`);\r\n      fetchNetworks(server, dispatch)\r\n        .then(() => {\r\n          dispatch(newNetworksSuccess());\r\n        })\r\n        .catch((err) => {\r\n          throw err;\r\n        });\r\n    })\r\n    .catch((err) => {\r\n      dispatch(newNetworkError({ error: err }));\r\n    });\r\n};\r\n\r\nexport const fetchNetwork = (networkId, server, dispatch) => {\r\n  dispatch(requestNetwork({ server, networkId }));\r\n  getNetwork(networkId, server)\r\n    .then((net) => {\r\n      dispatch(networkSuccess({ server, network: net }));\r\n    })\r\n    .catch((err) => {\r\n      dispatch(networkError({ server, networkId, err }));\r\n    });\r\n};\r\n\r\nexport const setNetwork = (\r\n  server,\r\n  network,\r\n  dispatch\r\n  //fetchNetworksAfter = true\r\n) => {\r\n  if (!(network instanceof CNN)) {\r\n    network = Object.assign(new CNN(network), {\r\n      id: network.id,\r\n      name: network.name,\r\n    });\r\n  }\r\n\r\n  dispatch(setNetworkRequest({ server, network }));\r\n  setNetworkApi(network, server)\r\n    .then(() => {\r\n      //if (fetchNetworksAfter) fetchNetworks(server, dispatch);\r\n      dispatch(setNetworkSuccess({ server, network }));\r\n    })\r\n    .catch((err) => dispatch(setNetworkError({ server, network, err })));\r\n};\r\n","import React, { useState } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\n\r\n//redux\r\nimport { connect } from \"react-redux\";\r\n\r\n//res\r\nimport { TiPlus } from \"react-icons/ti\";\r\n\r\n// router\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst cardWrapperCss = css`\r\n  width: 13em;\r\n  height: 15em;\r\n  box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12),\r\n    0 3px 5px -1px rgba(0, 0, 0, 0.2);\r\n  border-radius: 5px;\r\n  margin: 0.7em;\r\n  flex-grow: 0;\r\n  flex-shrink: 0;\r\n\r\n  transform: scale(1);\r\n  transition: transform 0.5s;\r\n\r\n  &:hover {\r\n    transform: scale(1.1);\r\n    cursor: pointer;\r\n  }\r\n\r\n  background: ${(props) => props.backgroundbyelevation(1)};\r\n  text-decoration: none;\r\n  color: ${(props) => props.accenttextcolor};\r\n  display: block;\r\n`;\r\n\r\nconst CardWrapper = styled(Link)`\r\n  ${cardWrapperCss}\r\n`;\r\n\r\nconst CardWrapperNoLink = styled.div`\r\n  ${cardWrapperCss}\r\n\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst BottomWrapper = styled.div`\r\n  height: 30%;\r\n  width: 100%;\r\n  border-bottom-right-radius: 5px;\r\n  border-bottom-left-radius: 5px;\r\n`;\r\n\r\nconst NetworkTitle = styled.h4`\r\n  height: 100%;\r\n  width: 100%;\r\n  text-align: center;\r\n  margin: 0;\r\n  &:before {\r\n    content: \"\";\r\n    display: inline-block;\r\n    height: 100%;\r\n    vertical-align: middle;\r\n  }\r\n`;\r\n\r\nconst NetworkImage = styled.img`\r\n  width: 100%;\r\n  display: block;\r\n  flex-grow: 0;\r\n`;\r\n\r\nconst NetworkImageDiv = styled.div`\r\n  height: 70%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: row;\r\n`;\r\n\r\nexport default connect((state) => state)(\r\n  ({ colors, network, server, draggable, onClick, getRef, id }) => {\r\n    /*\r\n    // draggable too buggy\r\n    const [dragging, setDragging] = useState(false);\r\n    const [cardPosition, setCardPosition] = useState();\r\n\r\n    const cardRef = React.createRef();\r\n    const replacementCardRef = React.createRef();*/\r\n\r\n    const Wrapper = onClick ? CardWrapperNoLink : CardWrapper;\r\n\r\n    return (\r\n      <Wrapper\r\n        id={id}\r\n        to={onClick ? \"\" : `/networks/${server}/${network.id}`}\r\n        onClick={onClick}\r\n        {...colors}\r\n        ref={getRef && ((ref) => getRef(ref))}\r\n        /*\r\n        // draggable too buggy\r\n        \r\n        ref={cardRef}\r\n        onMouseDown={\r\n          draggable\r\n            ? function(e) {\r\n                var draggingElement = cardRef.current;\r\n                var clientRect = draggingElement.getBoundingClientRect();\r\n                e.preventDefault();\r\n                var dragStart = { x: e.clientX, y: e.clientY };\r\n                var localDragging = false;\r\n                var draggingOffset = {\r\n                  x: e.clientX - clientRect.left,\r\n                  y: e.clientY - clientRect.top\r\n                };\r\n\r\n                const dragHandler = e1 => {\r\n                  if (!localDragging) {\r\n                    if (\r\n                      Math.abs(e1.clientX - dragStart.x) > 10 ||\r\n                      Math.abs(e1.clientY - dragStart.y) > 10\r\n                    ) {\r\n                      setDragging(true);\r\n                      localDragging = true;\r\n                    }\r\n                  } else {\r\n                    draggingElement.style.position = `absolute`;\r\n                    draggingElement.style.left =\r\n                      e1.clientX - draggingOffset.x + `px`;\r\n                    draggingElement.style.top =\r\n                      e1.clientY - draggingOffset.y + `px`;\r\n                  }\r\n                };\r\n\r\n                const mouseUpHandler = () => {\r\n                  localDragging = false;\r\n                  document.removeEventListener(\"mousemove\", dragHandler);\r\n                  document.removeEventListener(\"mousemove\", mouseUpHandler);\r\n                };\r\n\r\n                document.addEventListener(\"mousemove\", dragHandler);\r\n                document.addEventListener(\"mouseup\", mouseUpHandler);\r\n              }\r\n            : undefined\r\n        }\r\n        onClick={\r\n          dragging\r\n            ? e => {\r\n                e.preventDefault();\r\n                setDragging(false);\r\n              }\r\n            : undefined\r\n        }*/\r\n      >\r\n        <NetworkImageDiv>\r\n          <NetworkImage\r\n            src={process.env.PUBLIC_URL + `/cnn-diagram.png`}\r\n            alt=\"neural network icon\"\r\n          />\r\n        </NetworkImageDiv>\r\n        <BottomWrapper>\r\n          <NetworkTitle>{network.name}</NetworkTitle>\r\n        </BottomWrapper>\r\n      </Wrapper>\r\n    );\r\n  }\r\n);\r\n\r\nconst AddNetworkWrapper = styled.div`\r\n  ${cardWrapperCss}\r\n  border:2px ${(props) => props.color} dashed;\r\n  display:flex;\r\n  justify-content:center;\r\n  flex-direction:row;\r\n  align-items:center;\r\n  background:${(props) => props.backgroundbyelevation(1)};\r\n  box-sizing:border-box;\r\n  font-size: 1em;\r\n  position:relative;\r\n\r\n  /* &:hover{\r\n    cursor:pointer;\r\n  } */\r\n\r\n  ${(props) =>\r\n    props.nohover &&\r\n    css`\r\n      &:hover {\r\n        transform: scale(1);\r\n      }\r\n    `}\r\n`;\r\n\r\nconst StyledForm = styled.form`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\n\r\nconst StyledSubmit = styled.input`\r\n  position: absolute;\r\n  bottom: 1em;\r\n  width: calc(100% - 2em);\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst InputRow = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst StyledInput = styled.input`\r\n  padding: 5px;\r\n  box-sizing: border-box;\r\n  /*border-radius: 5px;*/\r\n  border: none;\r\n  width: calc(100% - 5em);\r\n  margin: 1em;\r\n  border-bottom: 1px solid black;\r\n`;\r\n\r\nconst StyledSelect = styled.select`\r\n  border: none;\r\n  padding: 0.3em;\r\n`;\r\n\r\nexport const AddNetworkCard = connect((state) => state)(\r\n  ({ colors, onclick, networks, id }) => {\r\n    const [name, setName] = useState(``);\r\n    const [networkShapeIndex, setNetworkShapeIndex] = useState(0);\r\n    const [show, setShow] = useState(false);\r\n\r\n    return (\r\n      <AddNetworkWrapper\r\n        id={id}\r\n        color={colors.primaryColor}\r\n        backgroundbyelevation={colors.backgroundbyelevation}\r\n        onClick={() => setShow(true)}\r\n        nohover={show}\r\n      >\r\n        {show && (\r\n          <StyledForm\r\n            onSubmit={(e) => {\r\n              e.preventDefault();\r\n              if (name) {\r\n                onclick(\r\n                  name,\r\n                  networks.networkArchitectures[\r\n                    Object.keys(networks.networkArchitectures)[\r\n                      networkShapeIndex\r\n                    ]\r\n                  ]\r\n                );\r\n              }\r\n            }}\r\n          >\r\n            <StyledInput\r\n              type=\"text\"\r\n              value={name}\r\n              onChange={(evt) => setName(evt.target.value)}\r\n              placeholder={`Network name`}\r\n            />\r\n            <StyledSelect\r\n              onChange={(e) => setNetworkShapeIndex(JSON.parse(e.target.value))}\r\n              value={networkShapeIndex}\r\n            >\r\n              {Object.keys(networks.networkArchitectures).map((name, i) => {\r\n                return <option value={i}>{name}</option>;\r\n              })}\r\n            </StyledSelect>\r\n            <StyledSubmit\r\n              type=\"submit\"\r\n              value=\"create network\"\r\n              id={`createNetworkHint`}\r\n            />\r\n          </StyledForm>\r\n        )}\r\n        {!show && <TiPlus color={colors.primaryColor} />}\r\n      </AddNetworkWrapper>\r\n    );\r\n  }\r\n);\r\n\r\nconst NetworkCardParentWrapper = styled.div`\r\n  padding: 1em;\r\n  /* padding-right: 0; */\r\n  padding-bottom: 0;\r\n\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n\r\n  transition: 0.5s padding;\r\n\r\n  ${(props) =>\r\n    props.small &&\r\n    css`\r\n      padding-right: 1em;\r\n    `}\r\n`;\r\n\r\nconst Title = styled.h3`\r\n  margin: 0.5em;\r\n  margin-left: 0;\r\n  margin-right: 0;\r\n\r\n  box-shadow: 0;\r\n  box-sizing: border-box;\r\n\r\n  ${(props) =>\r\n    props.cardMode &&\r\n    css`\r\n      box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14),\r\n        0 1px 18px 0 rgba(0, 0, 0, 0.12), 0 3px 5px -1px rgba(0, 0, 0, 0.2);\r\n      margin: 0;\r\n      padding: 0.5em;\r\n      border-radius: 5px;\r\n    `}\r\n\r\n  transition: .5s;\r\n`;\r\n\r\nconst NetworkCards = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n  overflow: auto;\r\n  box-sizing: border-box;\r\n  padding: 1em;\r\n  padding-right: 0;\r\n  box-sizing: border-box;\r\n  height: auto;\r\n\r\n  ${CardWrapper}:first-child {\r\n    margin-left: 0;\r\n  }\r\n\r\n  transition: 0.5s height, 0.5s padding;\r\n  ${(props) =>\r\n    props.small &&\r\n    css`\r\n      height: 0;\r\n      padding: 0;\r\n    `}\r\n`;\r\n\r\nconst NetworkScreenTitleWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst FlexCenter = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nexport const NetworkCardParent = ({\r\n  children,\r\n  title,\r\n  small,\r\n  customRightButton,\r\n}) => (\r\n  <NetworkCardParentWrapper small={small}>\r\n    <div>\r\n      {!customRightButton && <Title cardMode={small}>{title}</Title>}\r\n      {customRightButton && (\r\n        <NetworkScreenTitleWrapper>\r\n          <Title cardMode={small}>{title}</Title>\r\n          <FlexCenter>{customRightButton}</FlexCenter>\r\n        </NetworkScreenTitleWrapper>\r\n      )}\r\n    </div>\r\n    <NetworkCards small={small}>{children}</NetworkCards>\r\n  </NetworkCardParentWrapper>\r\n);\r\n","import { login } from \"../../other/api\";\r\n\r\nexport const FETCH_SERVER_LOGIN_REQUEST = `FETCH_SERVER_LOGIN_REQUEST`;\r\nexport const FETCH_SERVER_LOGIN_SUCCESS = `FETCH_SERVER_LOGIN_SUCCESS`;\r\nexport const FETCH_SERVER_LOGIN_ERROR = `FETCH_SERVER_LOGIN_ERROR`;\r\n\r\nexport const requestLogin = ({ server }) => ({\r\n  type: FETCH_SERVER_LOGIN_REQUEST,\r\n  server\r\n});\r\n\r\nexport const loginSuccess = ({ server, apiToken }) => ({\r\n  type: FETCH_SERVER_LOGIN_SUCCESS,\r\n  server,\r\n  apiToken\r\n});\r\n\r\nexport const loginError = ({ err, server }) => ({\r\n  type: FETCH_SERVER_LOGIN_ERROR,\r\n  error: err,\r\n  server\r\n});\r\n\r\nexport const loginToServer = (user, pass, server, dispatch) => {\r\n  dispatch(requestLogin({ server }));\r\n  login(user, pass, server)\r\n    .then(apiToken => {\r\n      dispatch(loginSuccess({ apiToken, server }));\r\n    })\r\n    .catch(err => dispatch(loginError({ err, server })));\r\n};\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { loginToServer } from \"../redux/actions/servers\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { unloadNetworks } from \"../redux/actions/networks\";\r\n\r\nconst ServerLoginWrapper = styled.div`\r\n  background: ${props => props.backgroundbyelevation(1)};\r\n  height: 2em;\r\n  padding: 10px;\r\n  box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12),\r\n    0 3px 5px -1px rgba(0, 0, 0, 0.2);\r\n  border-radius: 5px;\r\n  display: flex;\r\n  flex-direction: row;\r\n`;\r\n\r\nconst StyledInput = styled.input`\r\n  padding: 5px;\r\n  &:not(:first-child) {\r\n    margin-left: 1em;\r\n  }\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  border-radius: 5px;\r\n  border: none;\r\n  background: none;\r\n  color: ${props => props.subaccenttextcolor};\r\n`;\r\n\r\nconst StyledInputButton = styled.input`\r\n  box-sizing: border-box;\r\n  margin-left: 1em;\r\n  border-radius: 5px;\r\n  height: 100%;\r\n  background: white;\r\n  border-width: 1px;\r\n  border-style: solid;\r\n  border-color: rgba(0, 0, 0, 0.16) rgb(0, 0, 0, 0.18) rgb(0, 0, 0, 0.27);\r\n  background: none;\r\n  color: ${props => props.textcolor};\r\n\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst ErrorDiv = styled.div`\r\n  background: ${props => props.errorcolor};\r\n  border-radius: 5px;\r\n  padding: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: row;\r\n  margin: 10px;\r\n  color: white;\r\n`;\r\n\r\nexport default connect(\r\n  state => state,\r\n  dispatch => ({\r\n    loginServer: (user, pass, server) =>\r\n      loginToServer(user, pass, server, dispatch),\r\n    unload: server => dispatch(unloadNetworks({ server }))\r\n  })\r\n)(({ server, loginServer, colors, unload }) => {\r\n  const [user, setUser] = useState(``);\r\n  const [pass, setPass] = useState(``);\r\n\r\n  return (\r\n    <>\r\n      <ServerLoginWrapper {...colors}>\r\n        <form\r\n          onSubmit={evt => {\r\n            evt.preventDefault();\r\n            unload(server);\r\n            loginServer(user, pass, server);\r\n          }}\r\n        >\r\n          <StyledInput\r\n            type=\"text\"\r\n            value={user}\r\n            onChange={event => setUser(event.target.value)}\r\n            placeholder={`username`}\r\n            {...colors}\r\n          />\r\n          <StyledInput\r\n            type=\"password\"\r\n            value={pass}\r\n            onChange={event => setPass(event.target.value)}\r\n            placeholder={`password`}\r\n            {...colors}\r\n          />\r\n          <StyledInputButton type=\"submit\" value={`Login`} {...colors} />\r\n        </form>\r\n      </ServerLoginWrapper>\r\n      {server.error && <ErrorDiv {...colors}>{server.error}</ErrorDiv>}\r\n    </>\r\n  );\r\n});\r\n","import React, { useState } from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport { connect } from \"react-redux\";\r\nimport { MdReplay } from \"react-icons/md\";\r\n\r\nconst ErrorDiv = styled.div`\r\n  background: ${(props) => props.errorcolor};\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n  color: white;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nexport const translateError = (error) => {\r\n  let strError = `${error}`;\r\n  console.error(error);\r\n  console.error(error.stack);\r\n  return `Server unavailable`;\r\n};\r\n\r\nconst rotate = keyframes`\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n\r\n  to {\r\n    transform: rotate(-360deg);\r\n  }\r\n`;\r\n\r\nconst StyledReplay = styled(MdReplay)`\r\n  margin-left: 5px;\r\n  animation: ${(props) => (props.spinning ? rotate : `none`)} 2s linear infinite;\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nexport default connect((state) => state)(({ error, colors, retryFunction }) => {\r\n  const [animation, setAnimation] = useState(false);\r\n  console.log(error);\r\n  if (!(error instanceof String)) error = error.toString() || error;\r\n  return (\r\n    <ErrorDiv errorcolor={colors.errorcolor}>\r\n      {error}\r\n      {retryFunction && (\r\n        <StyledReplay\r\n          spinning={animation}\r\n          onClick={(props) => {\r\n            setAnimation(true);\r\n            retryFunction(props);\r\n          }}\r\n        />\r\n      )}\r\n    </ErrorDiv>\r\n  );\r\n});\r\n","import React, { useState } from \"react\";\r\n\r\nimport { useSpring, animated, config } from \"react-spring\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { connect } from \"react-redux\";\r\n\r\nconst Wrapper = styled(animated.div)`\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  height: 100vh;\r\n  width: 100vw;\r\n`;\r\n\r\nconst AnimatedCard = styled(animated.div)`\r\n  background: ${(props) => props.backgroundbyelevation(1)};\r\n  position: absolute;\r\n  z-index: 2000;\r\n`;\r\n\r\nconst AnimFSC = ({\r\n  startFromElement,\r\n  contentFunction,\r\n  colors,\r\n  fullscreen,\r\n  onCloseCallback,\r\n}) => {\r\n  const [innerDivRef, setInnerDivRef] = useState();\r\n  const [wrapperRef, setWrapperRef] = useState();\r\n  const [resizeUpdater, setResizeUpdater] = useState(0);\r\n  const [closing, setClosing] = useState(false);\r\n  const [closed, setClosed] = useState(false);\r\n  const prevStyle = startFromElement.getBoundingClientRect();\r\n  const startComputedStyle = window.getComputedStyle(startFromElement);\r\n\r\n  if (startFromElement.style) {\r\n    startFromElement.style.opacity = `0`;\r\n  } else {\r\n    startFromElement.style = `opacity:0`;\r\n  }\r\n\r\n  if (closed) {\r\n    if (onCloseCallback) onCloseCallback();\r\n  }\r\n\r\n  const wrapperDivStyle = (wrapperRef &&\r\n    wrapperRef.getBoundingClientRect()) || {\r\n    top: 0,\r\n    left: 0,\r\n    height: 0,\r\n    width: 0,\r\n  };\r\n\r\n  const innerDivStyle = (!fullscreen &&\r\n    innerDivRef &&\r\n    innerDivRef.getBoundingClientRect()) || {\r\n    top: 0,\r\n    left: 0,\r\n    height: Math.max(0, wrapperDivStyle.height - 50),\r\n    width: Math.max(0, wrapperDivStyle.width - 50),\r\n  };\r\n\r\n  const startAnimatedProps = {\r\n    top: prevStyle.top + `px`,\r\n    left: prevStyle.left + `px`,\r\n    width: prevStyle.width + `px`,\r\n    height: prevStyle.height + `px`,\r\n    boxShadow: startComputedStyle.boxShadow,\r\n    borderWidth:\r\n      startComputedStyle.borderWidth || startComputedStyle[\"border-top-width\"],\r\n  };\r\n\r\n  const cardProps = useSpring({\r\n    from: startAnimatedProps,\r\n    to: closing\r\n      ? startAnimatedProps\r\n      : {\r\n          width: innerDivStyle.width + `px`,\r\n          height: innerDivStyle.height + `px`,\r\n          top:\r\n            parseInt((wrapperDivStyle.height - innerDivStyle.height) / 2) +\r\n            `px`,\r\n          left:\r\n            parseInt((wrapperDivStyle.width - innerDivStyle.width) / 2) + `px`,\r\n          borderRadius: startComputedStyle[\"border-top-left-radius\"],\r\n          borderColor:\r\n            startComputedStyle.borderColor ||\r\n            startComputedStyle[\"border-top-color\"],\r\n          borderStyle:\r\n            startComputedStyle.borderStyle ||\r\n            startComputedStyle[\"border-top-style\"],\r\n          borderWidth: `0px`,\r\n          opacity: 1,\r\n          overflow: `hidden`,\r\n        },\r\n    config: closing ? { ...config.gentle, clamp: true } : config.gentle,\r\n    onRest: () => {\r\n      if (closing) {\r\n        setClosed(true);\r\n        setClosing(false);\r\n        startFromElement.style.opacity = 1;\r\n      }\r\n    },\r\n  });\r\n\r\n  const wrapperProps = useSpring({\r\n    to: {\r\n      background: closing ? `rgba(0, 0, 0, 0)` : `rgba(0, 0, 0, 0.2)`,\r\n    },\r\n    from: {\r\n      background: `rgba(0, 0, 0, 0)`,\r\n    },\r\n  });\r\n\r\n  const resizeHandler = () => setResizeUpdater(Math.random());\r\n\r\n  React.useEffect(() => {\r\n    window.addEventListener(\"resize\", resizeHandler);\r\n    return () => {\r\n      window.removeEventListener(\"resize\", resizeHandler);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Wrapper\r\n      ref={(ref) => setWrapperRef(ref)}\r\n      onClick={(e) => (e.target === wrapperRef ? setClosing(true) : false)}\r\n      style={wrapperProps}\r\n    >\r\n      <AnimatedCard {...colors} style={cardProps}>\r\n        <div\r\n          ref={(ref) => setInnerDivRef(ref)}\r\n          style={\r\n            fullscreen\r\n              ? { height: `100%`, width: `100%`, boxSizing: `border-box` }\r\n              : {}\r\n          }\r\n        >\r\n          {contentFunction(() => setClosing(true))}\r\n        </div>\r\n      </AnimatedCard>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default connect((state) => state)(AnimFSC);\r\n","import React, { Component } from \"react\";\r\n\r\n// redux\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  fetchNetworks,\r\n  newNetwork,\r\n  setNetwork,\r\n} from \"../redux/actions/networks\";\r\n\r\n// components\r\nimport NetworkCard, {\r\n  NetworkCardParent,\r\n  AddNetworkCard,\r\n} from \"../components/NetworkCard\";\r\nimport ServerLogin from \"../components/ServerLogin\";\r\nimport Error, { translateError } from \"../components/Error\";\r\n\r\nimport { NetworkArchitectures, CNN } from \"../CNN-js/cnn\";\r\nimport { SyncLoader } from \"react-spinners\";\r\n\r\nimport styled from \"styled-components\";\r\nimport AnimatedFullScreenCard from \"../components/AnimatedFullScreenCard\";\r\nimport Dropzone from \"react-dropzone\";\r\n\r\nconst DownloadButton = styled.div`\r\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),\r\n    0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\r\n  background: ${(props) => props.primarycolor};\r\n  color: ${(props) => props.primarytextcolor};\r\n  border: none;\r\n  text-decoration: none;\r\n  border-radius: 5px;\r\n  box-sizing: content-box;\r\n  padding: 1em;\r\n\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst InnerNetworkSelect = styled.div`\r\n  border-radius: 5px;\r\n  padding: 1em;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Title = styled.h3`\r\n  margin: 0.5em;\r\n  margin-left: 0;\r\n  margin-right: 0;\r\n\r\n  box-shadow: 0;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst FileSelect = styled.div`\r\n  padding: 1em;\r\n  border-radius: 5px;\r\n  margin-top: 1em;\r\n  border: 1px solid gray;\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst ConfirmButton = styled.div`\r\n  background: ${(props) => props.primarycolor};\r\n  color: ${(props) => props.primarytextcolor};\r\n  padding: 1em;\r\n  border-radius: 5px;\r\n  margin-top: 1em;\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nclass Networks extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      networkGroupsSmall: false,\r\n      downloadRef: {},\r\n      importServer: undefined,\r\n      importNetworkName: undefined,\r\n    };\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.props.servers.servers.map((server) => {\r\n      this.props.getNetworks(server);\r\n    });\r\n  }\r\n  componentWillUpdate() {\r\n    this.props.servers.servers.map((server) => {\r\n      if (\r\n        !this.props.networks.networks[server.uniqueName] &&\r\n        !this.props.networks.isLoading[server.uniqueName] &&\r\n        !this.props.networks.error[server.uniqueName]\r\n      )\r\n        this.props.getNetworks(server);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <div>\r\n          {this.props.servers.servers.map((server) => {\r\n            return (\r\n              <NetworkCardParent\r\n                title={server.uniqueName}\r\n                customRightButton={\r\n                  <DownloadButton\r\n                    ref={(r) =>\r\n                      !this.state.downloadRef[server.uniqueName] &&\r\n                      this.setState((prevState) => ({\r\n                        downloadRef: Object.assign({}, prevState.downloadRef, {\r\n                          [server.uniqueName]: r,\r\n                        }),\r\n                      }))\r\n                    }\r\n                    onClick={() => {\r\n                      this.setState({ importServer: server });\r\n                    }}\r\n                    {...this.props.colors}\r\n                  >\r\n                    Import\r\n                  </DownloadButton>\r\n                }\r\n                small={this.props.networkGroupsSmall}\r\n                key={`${server.uniqueName}_network_display_group`}\r\n              >\r\n                {!this.props.networks.isLoading[server.uniqueName] &&\r\n                  !this.props.networks.error[server.uniqueName] &&\r\n                  this.props.networks.networks[server.uniqueName] && (\r\n                    <>\r\n                      {Object.keys(\r\n                        this.props.networks.networks[server.uniqueName]\r\n                      ).map((id, i) => {\r\n                        return (\r\n                          <NetworkCard\r\n                            id={i === 0 && `firstNetworkHint`}\r\n                            network={\r\n                              this.props.networks.networks[server.uniqueName][\r\n                                id\r\n                              ]\r\n                            }\r\n                            draggable={true}\r\n                            server={server.uniqueName}\r\n                          />\r\n                        );\r\n                      })}\r\n                      <AddNetworkCard\r\n                        id={`hint0`}\r\n                        onclick={(name, shape) => {\r\n                          this.props.createNewNetwork(name, shape, server);\r\n                        }}\r\n                      />\r\n                    </>\r\n                  )}\r\n\r\n                {this.props.networks.isLoading[server.uniqueName] && (\r\n                  <div>\r\n                    <SyncLoader />\r\n                  </div>\r\n                )}\r\n                {this.props.networks.error[server.uniqueName] &&\r\n                  this.props.networks.error[server.uniqueName] !==\r\n                    `Unauthorized` && (\r\n                    <div>\r\n                      <Error\r\n                        error={translateError(\r\n                          this.props.networks.error[server.uniqueName]\r\n                        )}\r\n                        retryFunction={() => this.props.getNetworks(server)}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                {this.props.networks.error[server.uniqueName] ===\r\n                  `Unauthorized` && <ServerLogin server={server} />}\r\n              </NetworkCardParent>\r\n            );\r\n          })}\r\n        </div>\r\n        {this.state.importServer && (\r\n          <AnimatedFullScreenCard\r\n            startFromElement={\r\n              this.state.downloadRef[this.state.importServer.uniqueName]\r\n            }\r\n            fullscreen={true}\r\n            onCloseCallback={() => this.setState({ importServer: undefined })}\r\n            contentFunction={(close) => (\r\n              <InnerNetworkSelect {...this.props.colors}>\r\n                <Title>Upload network file</Title>\r\n                <Dropzone\r\n                  onDrop={(acceptedFiles) => {\r\n                    const file = acceptedFiles[0];\r\n\r\n                    const reader = new FileReader();\r\n\r\n                    reader.onabort = () =>\r\n                      console.log(\"file reading was aborted\");\r\n                    reader.onerror = () =>\r\n                      console.log(\"file reading has failed\");\r\n                    reader.onload = () => {\r\n                      const networkJSON = JSON.parse(reader.result);\r\n                      this.setState({\r\n                        importNetworkName: networkJSON.name,\r\n                        networkJSON,\r\n                      });\r\n                    };\r\n                    reader.readAsText(file);\r\n                  }}\r\n                >\r\n                  {({ getRootProps, getInputProps }) => (\r\n                    <section>\r\n                      <div {...getRootProps()}>\r\n                        <input {...getInputProps()} />\r\n                        <FileSelect>\r\n                          {this.state.importNetworkName ||\r\n                            `Drag 'n' drop some file here, or click to select files`}\r\n                        </FileSelect>\r\n                      </div>\r\n                    </section>\r\n                  )}\r\n                </Dropzone>\r\n                <ConfirmButton\r\n                  {...this.props.colors}\r\n                  onClick={() => {\r\n                    this.props.setNetwork(\r\n                      this.state.importServer,\r\n                      this.state.networkJSON\r\n                    );\r\n                    close();\r\n                  }}\r\n                >\r\n                  Confirm\r\n                </ConfirmButton>\r\n              </InnerNetworkSelect>\r\n            )}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  (state) => state,\r\n  (dispatch) => ({\r\n    getNetworks: (server) => fetchNetworks(server, dispatch),\r\n    createNewNetwork: (name, shape, server) =>\r\n      newNetwork(name, shape, server, dispatch),\r\n    setNetwork: (server, network) => setNetwork(server, network, dispatch),\r\n  })\r\n)(Networks);\r\n","/**\r\n * Computes the maximum of each property\r\n * @param {Array<Object>} dataArray array of data objects\r\n */\r\nconst maxProperties = (dataArray) => {\r\n  const max = Object.assign({}, dataArray[0]);\r\n  dataArray.forEach((d) => {\r\n    Object.keys(d).forEach((key) => {\r\n      if (d[key] > max[key] || max[key] == undefined) {\r\n        max[key] = d[key];\r\n      }\r\n    });\r\n  });\r\n  return max;\r\n};\r\n\r\n/**\r\n * Computes the minimum of each property\r\n * @param {Array<Object>} dataArray array of data objects\r\n */\r\nexport const minProperties = (dataArray) => {\r\n  const min = Object.assign({}, dataArray[0]);\r\n  dataArray.forEach((d) => {\r\n    Object.keys(d).forEach((key) => {\r\n      if (d[key] < min[key] || min[key] == undefined) {\r\n        min[key] = d[key];\r\n      }\r\n    });\r\n  });\r\n  return min;\r\n};\r\n\r\n/**\r\n * Normalizes all properties min-max -> 0-1\r\n * @param {Array<Object>} dataArray\r\n * @param {Number} nanValue (optional) if all props are the same, normalization returns NaN. Instead of NaN, this function returns `nanValue`\r\n */\r\nexport const normalizeData = (dataArray, nanValue = NaN) => {\r\n  const max = maxProperties(dataArray);\r\n  const min = minProperties(dataArray);\r\n  const normalized = dataArray.map((data) => {\r\n    const normalizedRecord = {};\r\n    Object.keys(min).forEach((key) => {\r\n      normalizedRecord[key] =\r\n        data[key] === min[key]\r\n          ? nanValue\r\n          : (data[key] - min[key]) / (max[key] - min[key]);\r\n    });\r\n    return normalizedRecord;\r\n  });\r\n  return normalized;\r\n};\r\n\r\nexport const exportText = (data, fileName) => {\r\n  var a = window.document.createElement(\"a\");\r\n  a.href = window.URL.createObjectURL(new Blob([data], { type: \"text/plain\" }));\r\n  a.download = fileName;\r\n\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  document.body.removeChild(a);\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { deepMap } from \"../CNN-js/math\";\r\n\r\nexport default ({ style, array, slice, width, height }) => {\r\n  const [ref, setRef] = useState(null);\r\n\r\n  if (ref) {\r\n    let imageData = [];\r\n    let width, height;\r\n    if (array) {\r\n      for (let i = 0; i < array[0].length; i++) {\r\n        imageData = imageData.concat(\r\n          array[0][i].reduce(\r\n            (prev, d, j) =>\r\n              prev.concat([\r\n                array[0][i][j],\r\n                (array[1] && array[1][i][j]) || array[0][i][j],\r\n                (array[2] && array[2][i][j]) || array[0][i][j],\r\n                255,\r\n              ]),\r\n            []\r\n          )\r\n        );\r\n      }\r\n      width = array[0][0].length;\r\n      height = array[0].length;\r\n    } else if (slice) {\r\n      const positiveSlice = deepMap(slice, (x) => Math.max(0, x));\r\n      const negativeSlice = deepMap(slice, (x) => Math.min(0, x));\r\n\r\n      for (let i = 0; i < slice.length; i++) {\r\n        imageData = imageData.concat(\r\n          slice[i].reduce(\r\n            (prev, d, j) =>\r\n              prev.concat([\r\n                negativeSlice[i][j] * 255,\r\n                positiveSlice[i][j] * 255,\r\n                0,\r\n                255,\r\n              ]),\r\n            []\r\n          )\r\n        );\r\n      }\r\n\r\n      width = slice[0].length;\r\n      height = slice.length;\r\n    }\r\n    ref\r\n      .getContext(\"2d\")\r\n      .putImageData(\r\n        new ImageData(new Uint8ClampedArray(imageData), width, height),\r\n        0,\r\n        0\r\n      );\r\n  }\r\n\r\n  return (\r\n    <canvas\r\n      style={height && width ? { width, height, ...style } : style}\r\n      height={array ? array[0].length : slice.length}\r\n      width={array ? array[0][0].length : slice[0].length}\r\n      ref={(r) => setRef(r)}\r\n    ></canvas>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useSpring, animated } from \"react-spring\";\r\n\r\n//utils\r\nimport { normalizeData } from \"../other/utils\";\r\n\r\n// components\r\nimport Error from \"./Error\";\r\nimport { IoIosArrowRoundForward } from \"react-icons/io\";\r\nimport { connect } from \"react-redux\";\r\nimport LayerCanvas from \"./LayerCanvas\";\r\n\r\nimport { LayerType } from \"../CNN-js/cnn\";\r\n\r\nconst WrapperCard = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst NetworkVisualWrapper = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n  overflow-x: auto;\r\n  padding: 2em;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst NetworkLayer = styled.div`\r\n  width: 7em;\r\n  height: 7em;\r\n  margin: 1em;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst FilterLayer = styled.div`\r\n  width: 16em;\r\n  height: 7em;\r\n  margin: 1em;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst NetworkFilterAndInput = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst NetworkLayerWrapper = styled.div`\r\n  box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12),\r\n    0 3px 5px -1px rgba(0, 0, 0, 0.2);\r\n  border-radius: 5px;\r\n  padding: 10px;\r\n  background: ${(props) => props.backgroundbyelevation(1)};\r\n\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst LayerTypeTitle = styled.h5`\r\n  width: 100%;\r\n  text-align: center;\r\n`;\r\n\r\nconst LayerSpacer = styled.div`\r\n  width: 1em;\r\n  flex-shrink: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  margin-bottom: ${0.83 + 1.67 + 1.3}em;\r\n  padding: 10px;\r\n`;\r\n\r\n//NETWORK LAYERS\r\nconst minCONVSize = 1;\r\nconst maxCONVSize = 5;\r\n\r\nconst getSliceSize = (\r\n  normalizedLayer,\r\n  min = minCONVSize,\r\n  max = maxCONVSize\r\n) => ({\r\n  w: min + normalizedLayer.w * (max - min),\r\n  h: min + normalizedLayer.h * (max - min),\r\n});\r\n\r\nconst getFilterSliceSize = (sliceSize, filterSize) =>\r\n  Math.min(sliceSize.w, sliceSize.h) * filterSize;\r\n\r\nconst LAYER_STACK_slice = styled(animated.div)`\r\n  width: ${(props) => getSliceSize(props).w}em;\r\n  height: ${(props) => getSliceSize(props).h}em;\r\n  margin: 1em;\r\n  background: ${(props) => props.backgroundbyelevation(3)};\r\n  border: 1px solid ${(props) => (props.darkMode ? `gray` : props.primarycolor)};\r\n  border-radius: 3px;\r\n  position: absolute;\r\n  z-index: ${(props) => 300 - props.i};\r\n  overflow: hidden;\r\n`;\r\nconst LAYER_STACK_filter_wrapper = styled(animated.div)`\r\n  width: ${(props) => getSliceSize(props).w}em;\r\n  height: ${(props) => getSliceSize(props).h}em;\r\n  margin: 1em;\r\n\r\n  position: absolute;\r\n  z-index: ${(props) => 300 - props.i};\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst LAYER_STACK_FILTER_inner = styled(animated.div)`\r\n  width: ${(props) => {\r\n    return getFilterSliceSize(getSliceSize(props), props.f);\r\n  }}em;\r\n  height: ${(props) => {\r\n    return getFilterSliceSize(getSliceSize(props), props.f);\r\n  }}em;\r\n  box-sizing: border-box;\r\n  max-height: 100%;\r\n  max-width: 100%;\r\n  background: ${(props) => props.backgroundbyelevation(3)};\r\n  border: 1px solid ${(props) => (props.darkMode ? `gray` : props.primarycolor)};\r\n  border-radius: 3px;\r\n  overflow: hidden;\r\n  position: relative;\r\n`;\r\nconst LAYER_STACK_wrapper = styled(animated.div)`\r\n  position: relative;\r\n`;\r\nconst LAYER_STACK_slice_component = connect((state) => ({\r\n  colors: state.colors,\r\n}))(\r\n  ({\r\n    layer,\r\n    i,\r\n    withData,\r\n    layerNormalized,\r\n    extended,\r\n    filter,\r\n    colors,\r\n    layerData,\r\n    filterData,\r\n  }) => {\r\n    const { w: slicewidth, h: sliceheight } = getSliceSize(layerNormalized);\r\n    const layerSliceProps = useSpring({\r\n      top: extended ? `${(sliceheight + 2) * i}em` : `-${i / 5}em`,\r\n      //                                ^ don't forget the margin\r\n      left: extended ? `0em` : `${i / 5}em`,\r\n      opacity: extended ? `1` : `${Math.max(1 - i / 10, 0)}`,\r\n      from:\r\n        i < 10\r\n          ? {\r\n              left: `${i / 5}em`,\r\n              top: `-${i / 5}em`,\r\n              opacity: `${Math.max(1 - i / 10, 0)}`,\r\n            }\r\n          : {},\r\n    });\r\n\r\n    const filterProps = useSpring({\r\n      boxShadow: extended\r\n        ? `0 4px 5px 0 rgba(0,0,0,0.14), 0 1px 10px 0 rgba(0,0,0,0.12), 0 2px 4px -1px rgba(0,0,0,0.20)`\r\n        : `0 0px 0px 0 rgba(0,0,0,0.14), 0 0px 0px 0 rgba(0,0,0,0.12), 0 0px 0px 0px rgba(0,0,0,0.20)`,\r\n      from: {\r\n        boxShadow: `0 0px 0px 0 rgba(0,0,0,0.14), 0 0px 0px 0 rgba(0,0,0,0.12), 0 0px 0px 0px rgba(0,0,0,0.20)`,\r\n      },\r\n    });\r\n\r\n    const sliceSizeProps = getSliceSize(layerNormalized);\r\n\r\n    if (filter) {\r\n      return (\r\n        <LAYER_STACK_filter_wrapper\r\n          style={layerSliceProps}\r\n          key={`LAYER_STACK_layer_filter_${i}`}\r\n          w={layerNormalized.w}\r\n          h={layerNormalized.h}\r\n          i={i}\r\n        >\r\n          <LAYER_STACK_FILTER_inner\r\n            {...colors}\r\n            style={filterProps}\r\n            f={layerNormalized.f}\r\n            w={layerNormalized.w}\r\n            h={layerNormalized.h}\r\n          >\r\n            {withData && (\r\n              <LayerCanvas\r\n                slice={layerData}\r\n                style={{ position: `absolute`, top: 0 }}\r\n                width={\r\n                  getFilterSliceSize(sliceSizeProps, layerNormalized.f) + `em`\r\n                }\r\n                height={\r\n                  getFilterSliceSize(sliceSizeProps, layerNormalized.f) + `em`\r\n                }\r\n              />\r\n            )}\r\n          </LAYER_STACK_FILTER_inner>\r\n        </LAYER_STACK_filter_wrapper>\r\n      );\r\n    } else {\r\n      return (\r\n        <LAYER_STACK_slice\r\n          {...colors}\r\n          style={Object.assign({}, layerSliceProps, filterProps)}\r\n          key={`LAYER_STACK_layer_${i}`}\r\n          w={layerNormalized.w}\r\n          h={layerNormalized.h}\r\n          i={i}\r\n        >\r\n          {withData && (\r\n            <LayerCanvas\r\n              style={{ position: `absolute`, top: 0 }}\r\n              slice={layerData}\r\n              width={sliceSizeProps.w + `em`}\r\n              height={sliceSizeProps.h + `em`}\r\n            />\r\n          )}\r\n        </LAYER_STACK_slice>\r\n      );\r\n    }\r\n  }\r\n);\r\n\r\nconst LAYER_STACK = ({\r\n  layer,\r\n  withData,\r\n  layerNormalized,\r\n  layerData,\r\n  filterData,\r\n  extended,\r\n  withFilter,\r\n}) => {\r\n  const { w: sliceWidth, h: sliceHeight } = getSliceSize(layerNormalized);\r\n  const emPadding = 1 * 2;\r\n  const wrapperStyle = useSpring({\r\n    height: extended\r\n      ? `${(sliceHeight + emPadding) * layer.d}em`\r\n      : `${sliceHeight + emPadding}em`,\r\n    width: `${sliceWidth + emPadding}em`,\r\n    marginTop: `-${(sliceHeight + emPadding) / 2}em`,\r\n\r\n    from: {\r\n      height: `${sliceHeight + emPadding}em`,\r\n      width: `${sliceWidth + emPadding}em`,\r\n      marginTop: `-${(sliceHeight + emPadding) / 2}em`,\r\n      marginLeft: `-${(sliceWidth + emPadding) / 2}em`,\r\n    },\r\n  });\r\n  return (\r\n    <>\r\n      {withFilter && (\r\n        <div\r\n          style={{\r\n            height: 0,\r\n            width: 0,\r\n          }}\r\n        >\r\n          <LAYER_STACK_wrapper style={wrapperStyle}>\r\n            {new Array(layer.d)\r\n              .fill(0)\r\n              .map(\r\n                (_, i) =>\r\n                  (extended || i < 10) && (\r\n                    <LAYER_STACK_slice_component\r\n                      layer={layer}\r\n                      i={i}\r\n                      withData={withData}\r\n                      layerData={layerData && layerData[i]}\r\n                      filterData={filterData && filterData[i]}\r\n                      layerNormalized={layerNormalized}\r\n                      extended={extended}\r\n                      filter={true}\r\n                    />\r\n                  )\r\n              )}\r\n          </LAYER_STACK_wrapper>\r\n        </div>\r\n      )}\r\n      <div\r\n        style={{\r\n          height: 0,\r\n          width: 0,\r\n          marginLeft: withFilter ? `${sliceHeight + emPadding}em` : ``,\r\n        }}\r\n      >\r\n        <LAYER_STACK_wrapper style={wrapperStyle}>\r\n          {new Array(layer.d)\r\n            .fill(0)\r\n            .map(\r\n              (_, i) =>\r\n                (extended || i < 10) && (\r\n                  <LAYER_STACK_slice_component\r\n                    layer={layer}\r\n                    i={i}\r\n                    withData={withData}\r\n                    layerData={layerData && layerData[i]}\r\n                    filterData={filterData && filterData[i]}\r\n                    layerNormalized={layerNormalized}\r\n                    extended={extended}\r\n                  />\r\n                )\r\n            )}\r\n        </LAYER_STACK_wrapper>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\n//NETWORK LAYERS\r\n\r\n//normalize layers, normalize f as percentage of width and height minimum\r\nconst normalizeLayers = (shape) => {\r\n  const out = normalizeData(shape, 0);\r\n  shape.forEach((s, i) => {\r\n    if (s.f) {\r\n      out[i].f = s.f / Math.min(shape[i - 1].w, shape[i - 1].h);\r\n    }\r\n  });\r\n  return out;\r\n};\r\n\r\nexport default connect((state) => ({\r\n  colors: state.colors,\r\n}))(({ colors, network, small, withData }) => {\r\n  const [extended, setExtended] = useState(\r\n    new Array(network.shape.length).fill(false)\r\n  );\r\n  const [layersNormalized] = useState(\r\n    network && network.shape ? normalizeLayers(network.shape) : undefined\r\n  );\r\n\r\n  return (\r\n    <WrapperCard>\r\n      {network && network.shape && (\r\n        <NetworkVisualWrapper>\r\n          {network.shape.map((layerShape, i) => {\r\n            return (\r\n              <>\r\n                <div key={`network_layer_${i}`}>\r\n                  <NetworkLayerWrapper\r\n                    {...colors}\r\n                    onClick={() => {\r\n                      setExtended(\r\n                        extended.map((_, i1) =>\r\n                          i1 === i ? !extended[i1] : extended[i1]\r\n                        )\r\n                      );\r\n                    }}\r\n                  >\r\n                    <NetworkFilterAndInput>\r\n                      {layerShape.type === LayerType.CONV && (\r\n                        <FilterLayer>\r\n                          <LAYER_STACK\r\n                            layerData={network.layers[i]}\r\n                            filterData={network.weights[i]}\r\n                            layer={layerShape}\r\n                            layerNormalized={layersNormalized[i]}\r\n                            withData={withData}\r\n                            extended={extended[i]}\r\n                            withFilter={true}\r\n                          />\r\n                        </FilterLayer>\r\n                      )}\r\n                      {layerShape.type !== LayerType.CONV && (\r\n                        <NetworkLayer>\r\n                          {layerShape.type === LayerType.INPUT && (\r\n                            <LAYER_STACK\r\n                              layerData={network.layers[i]}\r\n                              layer={layerShape}\r\n                              layerNormalized={layersNormalized[i]}\r\n                              withData={withData ? { layer: i } : null}\r\n                              extended={extended[i]}\r\n                            />\r\n                          )}\r\n                          {layerShape.type === LayerType.POOL && (\r\n                            <LAYER_STACK\r\n                              layerData={network.layers[i]}\r\n                              layer={layerShape}\r\n                              layerNormalized={layersNormalized[i]}\r\n                              withData={withData ? { layer: i } : null}\r\n                              extended={extended[i]}\r\n                            />\r\n                          )}\r\n                          {layerShape.type === LayerType.FC}\r\n                          {layerShape.type === LayerType.FLATTEN}\r\n                        </NetworkLayer>\r\n                      )}\r\n                    </NetworkFilterAndInput>\r\n                    <LayerTypeTitle>\r\n                      {Object.keys(LayerType).find(\r\n                        (key) => LayerType[key] === layerShape.type\r\n                      )}\r\n                    </LayerTypeTitle>\r\n                  </NetworkLayerWrapper>\r\n                </div>\r\n\r\n                <LayerSpacer>\r\n                  {layerShape.type !== LayerType.FC && (\r\n                    <IoIosArrowRoundForward />\r\n                  )}\r\n                </LayerSpacer>\r\n              </>\r\n            );\r\n          })}\r\n        </NetworkVisualWrapper>\r\n      )}\r\n      {(!network || !network.shape) && (\r\n        <Error error={`invalid network shape`} />\r\n      )}\r\n    </WrapperCard>\r\n  );\r\n});\r\n","import React from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Card = styled.div`\r\n  box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12),\r\n    0 2px 4px -1px rgba(0, 0, 0, 0.2);\r\n  display: flex;\r\n  flex-direction: row;\r\n  background: ${(props) => props.backgroundbyelevation(1)};\r\n\r\n  &:not(:first-child) {\r\n    margin-top: 1em;\r\n  }\r\n  border-radius: 5px;\r\n`;\r\n\r\nconst Key = styled.div`\r\n  width: 50%;\r\n  height: 100%;\r\n  padding: 1em;\r\n  text-align: right;\r\n`;\r\n\r\nconst Value = styled.div`\r\n  width: 50%;\r\n  height: 100%;\r\n  padding: 1em;\r\n`;\r\n\r\nconst StyledInput = styled.input`\r\n  padding: 5px;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  border-radius: 5px;\r\n  border: none;\r\n  background: none;\r\n  color: ${(props) => props.subaccenttextcolor};\r\n`;\r\n\r\nconst KeyValueWrapper = styled.div`\r\n  padding: 2em;\r\n`;\r\n\r\nconst KeyValueTable = ({ data, editFunction, colors, include }) => (\r\n  <KeyValueWrapper>\r\n    {!include &&\r\n      Object.keys(data).map((key) => (\r\n        <Card {...colors} key={`key_value_table_${key}`}>\r\n          <Key>{key}</Key>\r\n          <Value>\r\n            <StyledInput\r\n              value={data[key]}\r\n              onChange={(evt) => editFunction(key, evt.target.value)}\r\n            />\r\n          </Value>\r\n        </Card>\r\n      ))}\r\n    {include &&\r\n      include.map((key) => (\r\n        <Card {...colors} key={`key_value_table_${key}`}>\r\n          <Key>{key}</Key>\r\n          <Value>\r\n            <StyledInput\r\n              value={data[key]}\r\n              onChange={(evt) => editFunction(key, evt.target.value)}\r\n            />\r\n          </Value>\r\n        </Card>\r\n      ))}\r\n  </KeyValueWrapper>\r\n);\r\n\r\nexport default connect((state) => state)(KeyValueTable);\r\n","import React, { useState } from \"react\";\r\nimport { imageToArray, resizeImage } from \"../CNN-js/imageProcessor\";\r\nimport { softmax } from \"../CNN-js/math\";\r\nimport styled from \"styled-components\";\r\nimport LayerCanvas from \"./LayerCanvas\";\r\nimport { deepNormalize, deepMap } from \"../CNN-js/math\";\r\nimport { connect } from \"react-redux\";\r\n//import { setNetwork as setNetworkAction } from \"../redux/actions/networks\";\r\n\r\nconst PropagationWrapper = styled.div`\r\n  padding-top: 1em;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n`;\r\n\r\nconst FirstLayerDisplay = styled.div`\r\n  padding: 1em;\r\n`;\r\n\r\nconst OutputLayer = styled.div`\r\n  padding: 1em;\r\n`;\r\n\r\nconst Row = styled.tr`\r\n  background: lightgray;\r\n\r\n  & td {\r\n    text-align: center;\r\n    padding: 0.5em;\r\n  }\r\n`;\r\n\r\nconst OutputTable = styled.table`\r\n  border-radius: 5px;\r\n`;\r\n\r\nconst Prediction = styled.tr`\r\n  box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12),\r\n    0 3px 5px -1px rgba(0, 0, 0, 0.2);\r\n  border-radius: 5px;\r\n  background: ${(props) => props.backgroundbyelevation(1)};\r\n\r\n  font-weight: bold;\r\n\r\n  & td {\r\n    padding: 1em;\r\n    text-align: center;\r\n  }\r\n`;\r\n\r\nconst round = (x, c) => parseInt(x * 10 ** c) / 10 ** c;\r\n\r\nexport default connect(\r\n  (state) => state\r\n  /*(dispatch) => ({\r\n    setNetwork: (server, network) =>\r\n      setNetworkAction(server, network, dispatch),\r\n  })*/\r\n)(({ network, rawData, image, setNetwork, server, colors }) => {\r\n  const [output, setOutput] = useState();\r\n  const [imageArray, setImageArray] = useState();\r\n  const [softmaxed, setSoftmaxed] = useState();\r\n\r\n  React.useEffect(() => {\r\n    (async () => {\r\n      if (image || rawData) {\r\n        const imageArr = image\r\n          ? deepNormalize(\r\n              await imageToArray(image, {\r\n                y: network.layers[0][0].length,\r\n                x: network.layers[0][0][0].length,\r\n                z: network.layers[0].length,\r\n              }),\r\n              255\r\n            )\r\n          : rawData;\r\n        const out = network.forwardPropagate(imageArr);\r\n\r\n        setImageArray(deepMap(imageArr, (x) => x * 255));\r\n        setOutput(out);\r\n        setSoftmaxed(softmax(out));\r\n        //setNetwork(server, network);\r\n      }\r\n    })();\r\n  }, [image, rawData]);\r\n\r\n  return (\r\n    <PropagationWrapper>\r\n      <FirstLayerDisplay\r\n        width={network.layers[0][0].length}\r\n        height={network.layers[0][0][0].length}\r\n      >\r\n        {imageArray && (\r\n          <LayerCanvas width={`10em`} height={`10em`} array={imageArray} />\r\n        )}\r\n      </FirstLayerDisplay>\r\n      <OutputLayer>\r\n        {output && (\r\n          <OutputTable {...colors}>\r\n            <thead>\r\n              <tr style={{ textAlign: `center` }}>\r\n                <td>class</td>\r\n                <td>label</td>\r\n                <td>value</td>\r\n                <td>softmax</td>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {output\r\n                .map((v, i) => ({ v, i }))\r\n                .sort((a, b) => b.v - a.v)\r\n                .map(({ v, i }, j) => {\r\n                  const inner = (\r\n                    <>\r\n                      <td>{i}</td>\r\n                      <td>{network.labels && network.labels[i]}</td>\r\n                      <td>{round(v, 2)}</td>\r\n                      <td>\r\n                        {`${round(\r\n                          parseInt(softmaxed && softmaxed[i] * 100),\r\n                          2\r\n                        )}%`}\r\n                      </td>\r\n                    </>\r\n                  );\r\n\r\n                  if (j == 0) {\r\n                    return <Prediction {...colors}>{inner}</Prediction>;\r\n                  }\r\n                  return <Row>{inner}</Row>;\r\n                })}\r\n            </tbody>\r\n          </OutputTable>\r\n        )}\r\n      </OutputLayer>\r\n    </PropagationWrapper>\r\n  );\r\n});\r\n","import {\r\n  getDatasets,\r\n  getDataset,\r\n  newDataset as apiNewDataset,\r\n  getDemoDatasets,\r\n} from \"../../other/api\";\r\n\r\nexport const FETCH_REDUCED_DATASETS_REQUEST = `FETCH_REDUCED_DATASETS_REQUEST`;\r\nexport const FETCH_REDUCED_DATASETS_SUCCESS = `FETCH_REDUCED_DATASETS_SUCCESS`;\r\nexport const FETCH_REDUCED_DATASETS_ERROR = `FETCH_REDUCED_DATASETS_ERROR`;\r\n\r\nexport const FETCH_DATASET_REQUEST = `FETCH_DATASET_REQUEST`;\r\nexport const FETCH_DATASET_SUCCESS = `FETCH_DATASET_SUCCESS`;\r\nexport const FETCH_DATASET_ERROR = `FETCH_DATASET_ERROR`;\r\n\r\nexport const NEW_DATASET_REQUEST = `NEW_DATASET_REQUEST`;\r\nexport const NEW_DATASET_SUCCESS = `NEW_DATASET_SUCCESS`;\r\nexport const NEW_DATASET_ERROR = `NEW_DATASET_ERROR`;\r\n\r\nexport const requestNewDataset = ({ dataset, server }) => ({\r\n  type: NEW_DATASET_REQUEST,\r\n  server,\r\n  dataset,\r\n});\r\n\r\nexport const newDatasetSuccess = ({ dataset, server }) => ({\r\n  type: NEW_DATASET_SUCCESS,\r\n  server,\r\n  dataset,\r\n});\r\n\r\nexport const newDatasetsError = ({ err, dataset, server }) => ({\r\n  type: NEW_DATASET_ERROR,\r\n  err,\r\n  server,\r\n  dataset,\r\n});\r\n\r\nexport const requestDatasets = ({ server }) => ({\r\n  type: FETCH_REDUCED_DATASETS_REQUEST,\r\n  server,\r\n});\r\n\r\nexport const datasetsSuccess = ({ datasets, server }) => ({\r\n  type: FETCH_REDUCED_DATASETS_SUCCESS,\r\n  server,\r\n  datasets,\r\n});\r\n\r\nexport const datasetsError = ({ err, server }) => ({\r\n  type: FETCH_REDUCED_DATASETS_ERROR,\r\n  err,\r\n  server,\r\n});\r\n\r\nexport const requestDataset = ({ datasetId, server }) => ({\r\n  type: FETCH_DATASET_REQUEST,\r\n  server,\r\n  datasetId,\r\n});\r\n\r\nexport const datasetSuccess = ({ dataset, server }) => ({\r\n  type: FETCH_DATASET_SUCCESS,\r\n  server,\r\n  dataset,\r\n});\r\n\r\nexport const datasetError = ({ err, datasetId, server }) => ({\r\n  type: FETCH_DATASET_ERROR,\r\n  err,\r\n  server,\r\n  datasetId,\r\n});\r\n\r\nexport const fetchDatasets = (server, dispatch) => {\r\n  dispatch(requestDatasets({ server }));\r\n  getDatasets(server)\r\n    .then(async (datasets) => {\r\n      Object.keys(datasets).forEach((datasetId) => {\r\n        if (!datasets[datasetId].full) datasets[datasetId].reduced = true;\r\n      });\r\n\r\n      if (Object.keys(datasets).length === 0) {\r\n        const demos = await getDemoDatasets();\r\n        demos.forEach((d) => newDataset(d, server, dispatch));\r\n      }\r\n\r\n      dispatch(\r\n        datasetsSuccess({\r\n          server,\r\n          datasets,\r\n        })\r\n      );\r\n    })\r\n    .catch((err) => {\r\n      if (err.message) {\r\n        err = err.message;\r\n      }\r\n      dispatch(datasetsError({ err, server }));\r\n    });\r\n};\r\n\r\nexport const fetchDataset = (datasetId, server, dispatch) => {\r\n  dispatch(requestDataset({ datasetId, server }));\r\n  getDataset(datasetId, server)\r\n    .then((dataset) => {\r\n      dispatch(datasetSuccess({ dataset, server }));\r\n    })\r\n    .catch((err) => {\r\n      if (err.message) {\r\n        err = err.message;\r\n      }\r\n      dispatch(datasetError({ err, datasetId, server }));\r\n    });\r\n};\r\n\r\nexport const newDataset = (dataset, server, dispatch) => {\r\n  dispatch(requestNewDataset({ dataset, server }));\r\n  apiNewDataset(dataset, server).then(() => {\r\n    dispatch(newDatasetSuccess({ dataset, server }));\r\n  });\r\n};\r\n","import React, { Component } from \"react\";\r\n\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\n// redux\r\nimport { connect } from \"react-redux\";\r\n\r\n// components\r\nimport NetworkShapeVisual from \"../components/NetworkShapeVisual\";\r\nimport styled from \"styled-components\";\r\nimport Error from \"../components/Error\";\r\nimport KeyValueTable from \"../components/KeyValueTable\";\r\nimport Dropdown from \"react-dropdown\";\r\nimport \"react-dropdown/style.css\";\r\n\r\n// redux actions\r\nimport { fetchNetwork } from \"../redux/actions/networks\";\r\n\r\n// utils\r\nimport { exportText } from \"../other/utils\";\r\nimport NetworkPropagation from \"../components/NetworkPropagation\";\r\nimport Dropzone from \"react-dropzone\";\r\nimport { fetchDatasets } from \"../redux/actions/datasets\";\r\nimport { openDatasetFromBuffer } from \"../CNN-js/datasetProcessor\";\r\nimport { deepNormalize } from \"../CNN-js/math\";\r\n\r\nconst NetworkWrapper = styled.div`\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst Title = styled.h2`\r\n  margin: 0.5em;\r\n  margin-left: 0;\r\n  margin-right: 0;\r\n\r\n  box-shadow: 0;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst Subtitle = styled.h3`\r\n  margin: 0.5em;\r\n  margin-left: 0;\r\n  margin-right: 0;\r\n\r\n  box-shadow: 0;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst NetworkScreenTitleWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst FlexCenter = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst DownloadButton = styled.div`\r\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),\r\n    0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\r\n  background: ${(props) => props.primarycolor};\r\n  color: ${(props) => props.primarytextcolor};\r\n  border: none;\r\n  text-decoration: none;\r\n  border-radius: 5px;\r\n  box-sizing: content-box;\r\n  padding: 1em;\r\n\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst ImageSelect = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst UploadRoot = styled.div`\r\n  padding: 1em;\r\n  border: 1px solid gray;\r\n  border-radius: 5px;\r\n  margin-right: 1em;\r\n`;\r\n\r\nconst getDatasetLen = (dataset) => {\r\n  return (\r\n    dataset &&\r\n    dataset.data &&\r\n    dataset.data.length / (dataset.imageSize ** 2 * dataset.colorDepth + 1)\r\n  );\r\n};\r\n\r\nclass Network extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      network:\r\n        props.match.params.serverUniqueName &&\r\n        props.match.params.networkId &&\r\n        props.networks.networks[props.match.params.serverUniqueName] &&\r\n        props.networks.networks[props.match.params.serverUniqueName][\r\n          props.match.params.networkId\r\n        ],\r\n      error: undefined,\r\n      server: this.props.servers.servers.find(\r\n        (server) =>\r\n          server.uniqueName === this.props.match.params.serverUniqueName\r\n      ),\r\n      uploadedImage: null,\r\n      selectedDatasetImageIndex: 0,\r\n    };\r\n\r\n    this.checkForError = this.checkForError.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.checkForError();\r\n\r\n    this.props.servers.servers.map((s) => {\r\n      this.props.fetchDatasets(s);\r\n    });\r\n  }\r\n\r\n  checkForError() {\r\n    const network =\r\n      this.props.match.params.serverUniqueName &&\r\n      this.props.match.params.networkId &&\r\n      this.props.networks.networks[this.props.match.params.serverUniqueName] &&\r\n      this.props.networks.networks[this.props.match.params.serverUniqueName][\r\n        this.props.match.params.networkId\r\n      ];\r\n    if (network !== this.state.network) this.setState({ network });\r\n    let error = undefined;\r\n    if (!this.props.match.params.serverUniqueName) {\r\n      error = `invalid server name`;\r\n    } else if (!this.props.match.params.networkId) {\r\n      error = `invalid network name`;\r\n    } else if (\r\n      !this.props.networks.networks[this.props.match.params.serverUniqueName]\r\n    ) {\r\n      error = `server has no networks`;\r\n      if (!this.state.server.apiToken) {\r\n        error = `not logged in, redirecting...`;\r\n        this.setState({ notLoggedIn: true });\r\n      } else {\r\n        if (!this.state.refreshRequestSent) {\r\n          this.setState({ needToRefreshNetwork: true });\r\n        }\r\n      }\r\n    } else if (\r\n      !this.props.networks.networks[this.props.match.params.serverUniqueName][\r\n        this.props.match.params.networkId\r\n      ]\r\n    ) {\r\n      error = `network has not been cached`;\r\n      if (!this.state.refreshRequestSent)\r\n        this.setState({ needToRefreshNetwork: true });\r\n    }\r\n\r\n    if (network && network.reduced) {\r\n      if (!this.state.refreshRequestSent)\r\n        this.setState({ needToRefreshNetwork: true });\r\n    }\r\n\r\n    error =\r\n      this.props.networks.networkError[\r\n        this.props.match.params.serverUniqueName +\r\n          this.props.match.params.networkId\r\n      ] || error;\r\n    if (this.state.error !== error) {\r\n      this.setState({ error });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.checkForError();\r\n    if (this.state.needToRefreshNetwork) {\r\n      this.setState(\r\n        { needToRefreshNetwork: false, refreshRequestSent: true },\r\n        () => {\r\n          this.props.getNetwork(\r\n            this.props.match.params.networkId,\r\n            this.state.server\r\n          );\r\n        }\r\n      );\r\n    }\r\n\r\n    if (this.state.notLoggedIn) {\r\n      setTimeout(() => {\r\n        this.setState({\r\n          notLoggedIn: false,\r\n          redirect: true,\r\n        });\r\n      }, 3000);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <NetworkWrapper>\r\n        {this.state.redirect && (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/networks\",\r\n            }}\r\n          />\r\n        )}\r\n        {this.state.network && (\r\n          <>\r\n            <NetworkScreenTitleWrapper>\r\n              <Title>{this.state.network.name}</Title>\r\n              <FlexCenter>\r\n                <DownloadButton\r\n                  onClick={() => {\r\n                    exportText(\r\n                      JSON.stringify(this.state.network),\r\n                      this.state.network.name.replace(` `, `_`) + `.cnn`\r\n                    );\r\n                  }}\r\n                  {...this.props.colors}\r\n                >\r\n                  Export\r\n                </DownloadButton>\r\n              </FlexCenter>\r\n            </NetworkScreenTitleWrapper>\r\n            <NetworkShapeVisual\r\n              network={this.state.networkNew || this.state.network}\r\n              withData={false}\r\n            />\r\n            <Subtitle>Classify</Subtitle>\r\n            <ImageSelect>\r\n              <Dropzone\r\n                accept={\".jpg, .png\"}\r\n                onDrop={(acceptedFiles) => {\r\n                  acceptedFiles.forEach((file) => {\r\n                    const reader = new FileReader();\r\n\r\n                    reader.onabort = () =>\r\n                      console.log(\"file reading was aborted\");\r\n                    reader.onerror = () =>\r\n                      console.log(\"file reading has failed\");\r\n                    reader.onload = () => {\r\n                      this.setState({\r\n                        uploadedImage: reader.result,\r\n                        selectedDatasetIndex: null,\r\n                      });\r\n                    };\r\n                    reader.readAsArrayBuffer(file);\r\n                  });\r\n                }}\r\n              >\r\n                {({ getRootProps, getInputProps }) => (\r\n                  <section>\r\n                    <UploadRoot {...getRootProps()}>\r\n                      <input {...getInputProps()} />\r\n                      Drag 'n' drop image file here, or click to select it\r\n                    </UploadRoot>\r\n                  </section>\r\n                )}\r\n              </Dropzone>\r\n              <div style={{ padding: `1em` }}>or</div>\r\n              <div id={`datasetSelectHint`}>\r\n                <Dropdown\r\n                  placeholder=\"Select a dataset\"\r\n                  options={(() => {\r\n                    const out = Object.keys(this.props.datasets.datasets).map(\r\n                      (s) => ({\r\n                        type: `group`,\r\n                        name: s,\r\n                        items: Object.keys(this.props.datasets.datasets[s]).map(\r\n                          (dId) => ({\r\n                            value: dId,\r\n                            label:\r\n                              this.props.datasets.datasets[s][dId].name +\r\n                              ` (${\r\n                                this.props.datasets.datasets[s][dId].data\r\n                                  .length /\r\n                                (this.props.datasets.datasets[s][dId]\r\n                                  .imageSize **\r\n                                  2 *\r\n                                  this.props.datasets.datasets[s][dId]\r\n                                    .colorDepth +\r\n                                  1)\r\n                              })`,\r\n                          })\r\n                        ),\r\n                      })\r\n                    );\r\n                    return out;\r\n                  })()}\r\n                  onChange={(v) => {\r\n                    this.setState({ selectedDatasetIndex: v.value });\r\n                  }}\r\n                  value={this.state.selectedDatasetIndex}\r\n                />\r\n              </div>\r\n              <input\r\n                id={`imageIndexHint`}\r\n                type=\"number\"\r\n                min={0}\r\n                max={\r\n                  this.state.selectedDatasetIndex &&\r\n                  getDatasetLen(\r\n                    this.props.datasets.datasets[this.state.server.uniqueName][\r\n                      this.state.selectedDatasetIndex\r\n                    ]\r\n                  ) - 1\r\n                }\r\n                value={this.state.selectedDatasetImageIndex}\r\n                onChange={(e) => {\r\n                  this.setState({\r\n                    selectedDatasetImageIndex:\r\n                      (e.target.value || e.target.value === 0) &&\r\n                      e.target.value <\r\n                        getDatasetLen(\r\n                          this.props.datasets.datasets[\r\n                            this.state.server.uniqueName\r\n                          ][this.state.selectedDatasetIndex]\r\n                        )\r\n                        ? parseInt(e.target.value)\r\n                        : this.state.selectedDatasetImageIndex,\r\n                    uploadedImage: null,\r\n                  });\r\n                }}\r\n                style={{ padding: `8px`, width: `5em`, fontSize: `1em` }}\r\n              />\r\n\r\n              {/*<DownloadButton\r\n                {...this.props.colors}\r\n                style={{ marginLeft: `1em` }}\r\n                onClick={\r\n\r\n                }\r\n              >\r\n                Classify\r\n              </DownloadButton>*/}\r\n            </ImageSelect>\r\n            <NetworkPropagation\r\n              network={this.state.network}\r\n              image={this.state.uploadedImage}\r\n              server={this.state.server}\r\n              rawData={(() => {\r\n                if (this.state.selectedDatasetIndex) {\r\n                  const inputDataset = openDatasetFromBuffer(\r\n                    this.props.datasets.datasets[this.state.server.uniqueName][\r\n                      this.state.selectedDatasetIndex\r\n                    ].data\r\n                  );\r\n\r\n                  const inputArray =\r\n                    inputDataset[this.state.selectedDatasetImageIndex].input;\r\n\r\n                  //debugger;\r\n\r\n                  const datasetProps = this.props.datasets.datasets[\r\n                    this.state.server.uniqueName\r\n                  ][this.state.selectedDatasetIndex];\r\n                  if (datasetProps.normalizeMax) {\r\n                    return deepNormalize(inputArray, datasetProps.normalizeMax);\r\n                  } else {\r\n                    return inputArray;\r\n                  }\r\n                }\r\n              })()}\r\n            />\r\n            <Subtitle>Parameters</Subtitle>\r\n            <KeyValueTable\r\n              data={this.state.network}\r\n              include={[`name`, `learningRate`]}\r\n              editFunction={(key, newValue) => {}}\r\n            />\r\n          </>\r\n        )}\r\n        {this.props.networks.networkLoading[\r\n          this.props.match.params.serverUniqueName +\r\n            this.props.match.params.networkId\r\n        ] && <div>Loading</div>}\r\n        {!this.props.networks.networkLoading[\r\n          this.props.match.params.serverUniqueName +\r\n            this.props.match.params.networkId\r\n        ] &&\r\n          this.state.error && <Error error={this.state.error} />}\r\n      </NetworkWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  (state) => state,\r\n  (dispatch) => ({\r\n    getNetwork: (networkId, server) =>\r\n      fetchNetwork(networkId, server, dispatch),\r\n    fetchDatasets: (server) => fetchDatasets(server, dispatch),\r\n  })\r\n)(Network);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"styled-components\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst TrainingWrapper = styled.div`\r\n  width: 100%;\r\n  padding: 1em;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst TrainingHeader = styled.div`\r\n  padding: 1em;\r\n  display: flex;\r\n  flex-direction: row;\r\n`;\r\n\r\nconst Card = styled(Link)`\r\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),\r\n    0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\r\n  display: flex;\r\n  flex-direction: row;\r\n  background: ${(props) => props.backgroundbyelevation(1)};\r\n  color: ${(props) => props.textcolor};\r\n  text-decoration: none;\r\n\r\n  &:not(:first-child) {\r\n    margin-top: 2em;\r\n  }\r\n  border-radius: 5px;\r\n`;\r\n\r\nconst Column = styled.div`\r\n  flex: 1 1 0px;\r\n  padding: 1em;\r\n  text-align: center;\r\n`;\r\n\r\nconst round = (x, n) => parseInt(x * 10 ** n) / 10 ** n;\r\n\r\nconst TrainingList = connect((state) => state)(\r\n  ({ data, colors, networks, customLinkFunction, id }) => {\r\n    console.log(data, colors);\r\n    return (\r\n      <>\r\n        <TrainingHeader {...colors}>\r\n          {[\r\n            `network`,\r\n            `server`,\r\n            `epoch`,\r\n            `learning rate`,\r\n            `error`,\r\n            `accuracy`,\r\n          ].map((c, i) => (\r\n            <Column key={`header_item_${i}`}>{c}</Column>\r\n          ))}\r\n        </TrainingHeader>\r\n        <TrainingWrapper>\r\n          {data.map((row, i) => (\r\n            <Card\r\n              id={i === 0 && id + `First`}\r\n              key={`trainingList_${i}_row`}\r\n              {...colors}\r\n              to={\r\n                customLinkFunction\r\n                  ? customLinkFunction(row, i)\r\n                  : `/training/${row.server}/${row.network}`\r\n              }\r\n            >\r\n              <Column>{networks.networks[row.server][row.network].name}</Column>\r\n              <Column>{row.server}</Column>\r\n              <Column>\r\n                {row.epoch === `initializing`\r\n                  ? `initializing`\r\n                  : `${row.epoch}/${row.epochs}`}\r\n              </Column>\r\n              <Column>{round(row.learningRate, 5)}</Column>\r\n              <Column>{round(row.err, 5)}</Column>\r\n              <Column>{`${round(row.accuracy, 4) * 100}%`}</Column>\r\n            </Card>\r\n          ))}\r\n        </TrainingWrapper>\r\n      </>\r\n    );\r\n  }\r\n);\r\n\r\nconst StartButton = styled(Link)`\r\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),\r\n    0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\r\n  background: ${(props) => props.primarycolor};\r\n  color: ${(props) => props.primarytextcolor};\r\n  border: none;\r\n  text-decoration: none;\r\n  border-radius: 5px;\r\n  box-sizing: content-box;\r\n  padding: 1em;\r\n\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst Title = styled.h3`\r\n  margin: 0.5em;\r\n  margin-left: 0;\r\n  margin-right: 0;\r\n\r\n  box-shadow: 0;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst TrainingScreenWrapper = styled.div`\r\n  padding: 1em;\r\n`;\r\n\r\nconst TrainingScreenTitleWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst FlexCenter = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nclass Training extends Component {\r\n  render() {\r\n    return (\r\n      <TrainingScreenWrapper>\r\n        <TrainingScreenTitleWrapper>\r\n          <Title>Currently training</Title>\r\n          <FlexCenter>\r\n            <StartButton\r\n              to={`startTraining`}\r\n              {...this.props.colors}\r\n              id={`trainANetworkHint`}\r\n            >\r\n              train a network\r\n            </StartButton>\r\n          </FlexCenter>\r\n        </TrainingScreenTitleWrapper>\r\n\r\n        <TrainingList\r\n          id={`hintTraining`}\r\n          data={Object.keys(this.props.training)\r\n            .map((i) =>\r\n              i === `trained`\r\n                ? null\r\n                : Object.keys(this.props.training[i]).map((j) =>\r\n                    Object.assign({}, this.props.training[i][j], {\r\n                      server: i,\r\n                      network: j,\r\n                    })\r\n                  )\r\n            )\r\n            .flat(1)\r\n            .filter((a) => !!a)}\r\n        />\r\n\r\n        <TrainingScreenTitleWrapper>\r\n          <Title>Training history</Title>\r\n        </TrainingScreenTitleWrapper>\r\n        <TrainingList\r\n          data={this.props.training.trained}\r\n          customLinkFunction={(_row, i) => `/training/trained/${i}`}\r\n        />\r\n      </TrainingScreenWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect((state) => ({\r\n  training: state.training,\r\n  colors: state.colors,\r\n}))(Training);\r\n","import {\r\n  openDatasetFromBuffer,\r\n  vectorizeDatasetLabels,\r\n  normalizeInputData,\r\n} from \"../CNN-js/datasetProcessor\";\r\n\r\nclass WithEventListener {\r\n  constructor() {\r\n    this.eventsListeners = {};\r\n  }\r\n\r\n  addEventListener(event, fn) {\r\n    if (!this.eventsListeners[event]) {\r\n      this.eventsListeners[event] = [];\r\n    }\r\n\r\n    this.eventsListeners[event].push(fn);\r\n  }\r\n\r\n  emitEvent(event, ...props) {\r\n    console.log(event);\r\n    if (event in this.eventsListeners)\r\n      this.eventsListeners[event].forEach((fn) => fn(...props));\r\n  }\r\n\r\n  removeEventListener(event, fn) {\r\n    this.eventsListeners[event] = this.eventsListeners[event].filter(\r\n      (f) => fn !== f\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * events:\r\n *  start,\r\n *  batchProgress\r\n */\r\nexport default class TrainingController extends WithEventListener {\r\n  constructor({ server, network, dataset, trainingParams }) {\r\n    super();\r\n    this.server = server;\r\n    this.network = network;\r\n    let datasetToBeTrained = dataset.data;\r\n    datasetToBeTrained = openDatasetFromBuffer(\r\n      datasetToBeTrained,\r\n      datasetToBeTrained.colorDepth,\r\n      datasetToBeTrained.imageSize\r\n    );\r\n    if (dataset.vectorize) {\r\n      datasetToBeTrained = vectorizeDatasetLabels(\r\n        datasetToBeTrained,\r\n        network.shape[network.shape.length - 1].l\r\n      );\r\n    }\r\n    if (dataset.normalizeMax) {\r\n      datasetToBeTrained = normalizeInputData(\r\n        datasetToBeTrained,\r\n        dataset.normalizeMax\r\n      );\r\n    }\r\n    this.dataset = datasetToBeTrained;\r\n    this.trainingParams = trainingParams;\r\n  }\r\n\r\n  startLearning() {\r\n    if (this.server.url === \"local\") {\r\n      this.emitEvent(\"start\");\r\n      this.trainingInstance = new Worker(\r\n        process.env.PUBLIC_URL + \"/trainingWorker.js\"\r\n      );\r\n      this.trainingInstance.addEventListener(\"message\", (m) => {\r\n        this.emitEvent(m.data.event, ...[...m.data.data, m.data.network]);\r\n      });\r\n      this.trainingInstance.postMessage({\r\n        network: JSON.stringify(this.network),\r\n        trainingProps: Object.assign({}, this.trainingParams, {\r\n          dataset: this.dataset,\r\n        }),\r\n      });\r\n    } else {\r\n      console.error(\"network training not supported yet\");\r\n      //TODO: learning over the network\r\n    }\r\n  }\r\n\r\n  confusionMatrix() {\r\n    this.emitEvent(\"confusionMatrixStart\");\r\n    this.trainingInstance = new Worker(\r\n      process.env.PUBLIC_URL + \"/trainingWorker.js\"\r\n    );\r\n    this.trainingInstance.addEventListener(\"message\", (m) => {\r\n      this.emitEvent(m.data.event, m.data.data);\r\n    });\r\n    this.trainingInstance.postMessage({\r\n      network: JSON.stringify(this.network),\r\n      dataset: this.dataset,\r\n      cmd: `confusionMatrix`,\r\n    });\r\n  }\r\n\r\n  terminate() {\r\n    this.emitEvent(\"end\");\r\n    if (this.trainingInstance) this.trainingInstance.terminate();\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport NetworkCard, { NetworkCardParent } from \"./NetworkCard\";\r\nimport Error, { translateError } from \"./Error\";\r\nimport ServerLogin from \"../components/ServerLogin\";\r\n\r\nconst Wrapper = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n`;\r\n\r\nconst FullCenter = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst Section = styled.div``;\r\n/**\r\n *\r\n * @param {Array} sectionedData\r\n * structure:\r\n *  [\r\n *    {\r\n *      name:section name,\r\n *      data:[{\r\n *            name: \"row1\",\r\n *            icon: \"icon1\" <- optional\r\n *         },\r\n *        \"row2\"\r\n *      ]\r\n *    }\r\n *  ]\r\n */\r\nconst SelectableBigNetworkList = ({\r\n  servers,\r\n  networks,\r\n  onSelect,\r\n  refreshFunction,\r\n  lastId,\r\n}) => {\r\n  const [selected, select] = React.useState(false);\r\n  const [serversWithError, setServersWithError] = React.useState({});\r\n\r\n  return selected ? (\r\n    <FullCenter>\r\n      <NetworkCard network={selected} onClick={() => {}} />\r\n    </FullCenter>\r\n  ) : (\r\n    <Wrapper>\r\n      {servers.servers.map((server, i) => {\r\n        console.log(networks.networks[server.uniqueName]);\r\n        if (\r\n          !serversWithError[server.uniqueName] &&\r\n          networks.error[server.uniqueName]\r\n        ) {\r\n          setServersWithError(\r\n            Object.assign({}, serversWithError, { [server.uniqueName]: true })\r\n          );\r\n        }\r\n        if (\r\n          serversWithError[server.uniqueName] &&\r\n          !networks.error[server.uniqueName]\r\n        ) {\r\n          setServersWithError(\r\n            Object.assign({}, serversWithError, { [server.uniqueName]: false })\r\n          );\r\n          refreshFunction(server);\r\n        }\r\n        return (\r\n          <NetworkCardParent\r\n            key={`server_${i}_${server.uniqueName}`}\r\n            title={server.uniqueName}\r\n          >\r\n            {networks.networks[server.uniqueName] &&\r\n              Object.keys(networks.networks[server.uniqueName]).map(\r\n                (networkId, j) => (\r\n                  <NetworkCard\r\n                    key={`network_sectioned_${j}`}\r\n                    network={networks.networks[server.uniqueName][networkId]}\r\n                    onClick={() => {\r\n                      select(networks.networks[server.uniqueName][networkId]);\r\n                      onSelect(server, networkId);\r\n                    }}\r\n                    id={\r\n                      Object.keys(networks.networks[server.uniqueName]).length -\r\n                        1 ===\r\n                        j && lastId\r\n                    }\r\n                  />\r\n                )\r\n              )}\r\n\r\n            {networks.error[server.uniqueName] &&\r\n              networks.error[server.uniqueName] !== `Unauthorized` && (\r\n                <div>\r\n                  <Error\r\n                    error={translateError(networks.error[server.uniqueName])}\r\n                    retryFunction={() => refreshFunction(server)}\r\n                  />\r\n                </div>\r\n              )}\r\n            {networks.error[server.uniqueName] === `Unauthorized` && (\r\n              <ServerLogin server={server} />\r\n            )}\r\n          </NetworkCardParent>\r\n        );\r\n      })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default SelectableBigNetworkList;\r\n","import React, { useState } from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\nimport AnimatedFullScreenCard from \"./AnimatedFullScreenCard\";\r\nimport SelectableBigNetworkList from \"./SelectableBigNetworkList\";\r\nimport { fetchNetworks } from \"../redux/actions/networks\";\r\nimport NetworkCard from \"./NetworkCard\";\r\n\r\nconst NetworkSelectWrapper = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst SelectNetworkWrapper = styled.div`\r\n  width: 13em;\r\n  height: 15em;\r\n  box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12),\r\n    0 3px 5px -1px rgba(0, 0, 0, 0.2);\r\n  border-radius: 5px;\r\n  margin: 0.7em;\r\n  flex-grow: 0;\r\n  flex-shrink: 0;\r\n\r\n  transform: scale(1);\r\n  transition: transform 0.5s;\r\n\r\n  &:hover {\r\n    transform: scale(1.1);\r\n    cursor: pointer;\r\n  }\r\n\r\n  background: ${(props) => props.backgroundbyelevation(1)};\r\n  text-decoration: none;\r\n  color: ${(props) => props.accenttextcolor};\r\n  display: block;\r\n\r\n  border: 2px ${(props) => props.color} dashed;\r\n  box-sizing: border-box;\r\n  font-size: 1em;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst InnerNoOverflow = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow-x: hidden;\r\n  overflow-y: scroll;\r\n`;\r\n\r\nconst NetworkSelect = ({\r\n  colors,\r\n  innerRef,\r\n  servers,\r\n  networks,\r\n  getNetworks,\r\n  getNetwork,\r\n  onNetworkSelect, //(server, networkId) => {}\r\n  id,\r\n}) => {\r\n  const [selectedId, selectId] = useState();\r\n  const [open, setOpen] = useState(false);\r\n  const [wrapperRef, setWrapperRef] = useState();\r\n\r\n  React.useEffect(() => {\r\n    servers.servers.map((s) => {\r\n      getNetworks(s);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <NetworkSelectWrapper>\r\n      {(!selectedId || open) && (\r\n        <>\r\n          <SelectNetworkWrapper\r\n            onClick={() => setOpen(true)}\r\n            id={id}\r\n            {...colors}\r\n            ref={(ref) => setWrapperRef(ref)}\r\n            id={id}\r\n          >\r\n            Select network\r\n          </SelectNetworkWrapper>\r\n          {open && (\r\n            <AnimatedFullScreenCard\r\n              startFromElement={wrapperRef}\r\n              fullscreen={true}\r\n              onCloseCallback={() => {\r\n                setOpen(false);\r\n              }}\r\n              contentFunction={(closeCard) => {\r\n                return (\r\n                  <InnerNoOverflow>\r\n                    <SelectableBigNetworkList\r\n                      lastId={id + `Last`}\r\n                      servers={servers}\r\n                      networks={networks}\r\n                      onSelect={(server, networkId) => {\r\n                        closeCard(false);\r\n                        onNetworkSelect(server, networkId);\r\n                        selectId({\r\n                          server: server.uniqueName,\r\n                          network: networkId,\r\n                        });\r\n                      }}\r\n                      refreshFunction={(server) => getNetworks(server)}\r\n                    />\r\n                  </InnerNoOverflow>\r\n                );\r\n              }}\r\n            />\r\n          )}\r\n        </>\r\n      )}\r\n      {!open && selectedId && (\r\n        <NetworkCard\r\n          network={networks.networks[selectedId.server][selectedId.network]}\r\n          onClick={() => {\r\n            setOpen(true);\r\n          }}\r\n          getRef={(ref) => setWrapperRef(ref)}\r\n        />\r\n      )}\r\n    </NetworkSelectWrapper>\r\n  );\r\n};\r\n\r\nexport default connect(\r\n  (state) => state,\r\n  (dispatch) => ({\r\n    getNetworks: (server) => fetchNetworks(server, dispatch),\r\n  })\r\n)(NetworkSelect);\r\n","import React from \"react\";\r\n\r\nimport styled, { css } from \"styled-components\";\r\n//redux\r\nimport { connect } from \"react-redux\";\r\n\r\n// router\r\nimport { Link } from \"react-router-dom\";\r\n\r\n//res\r\nimport { MdPhotoLibrary } from \"react-icons/md\";\r\nimport { AiOutlineUpload } from \"react-icons/ai\";\r\n\r\nimport { openDatasetFromBuffer } from \"../CNN-js/datasetProcessor\";\r\nimport AnimatedFullScreenCard from \"./AnimatedFullScreenCard\";\r\n\r\nimport Dropzone from \"react-dropzone\";\r\nimport { newDataset } from \"../redux/actions/datasets\";\r\nimport Error from \"./Error\";\r\n\r\nconst cardWrapperCss = css`\r\n  width: 13em;\r\n  height: 15em;\r\n  box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12),\r\n    0 3px 5px -1px rgba(0, 0, 0, 0.2);\r\n  border-radius: 5px;\r\n  margin: 0.7em;\r\n  flex-grow: 0;\r\n  flex-shrink: 0;\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n  background: ${(props) => props.backgroundbyelevation(1)};\r\n  text-decoration: none;\r\n  color: ${(props) => props.accenttextcolor};\r\n  display: block;\r\n`;\r\n\r\nconst CardWrapper = styled(Link)`\r\n  ${cardWrapperCss}\r\n  transform: scale(1);\r\n  transition: transform 0.5s;\r\n\r\n  &:hover {\r\n    transform: scale(1.1);\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst CardWrapperNoLink = styled.div`\r\n  ${cardWrapperCss}\r\n\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst DatasetImage = {\r\n  width: `50%`,\r\n  display: `block`,\r\n  height: `50%`,\r\n  flexGrow: 0,\r\n};\r\n\r\nconst DatasetImageDiv = styled.div`\r\n  height: 70%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: row;\r\n`;\r\n\r\nconst BottomWrapper = styled.div`\r\n  height: 30%;\r\n  width: 100%;\r\n  border-bottom-right-radius: 5px;\r\n  border-bottom-left-radius: 5px;\r\n`;\r\n\r\nconst DatasetTitle = styled.h4`\r\n  height: 100%;\r\n  width: 100%;\r\n  text-align: center;\r\n  margin: 0;\r\n  &:before {\r\n    content: \"\";\r\n    display: inline-block;\r\n    height: 100%;\r\n    vertical-align: middle;\r\n  }\r\n`;\r\n\r\nexport default connect((state) => state)(\r\n  ({ colors, dataset, serverId, onClick, getRef, id }) => {\r\n    const Wrapper = onClick ? CardWrapperNoLink : CardWrapper;\r\n\r\n    return (\r\n      <Wrapper\r\n        id={id}\r\n        to={onClick ? \"\" : `/datasets/${serverId}/${dataset.id}`}\r\n        onClick={onClick}\r\n        ref={getRef && ((ref) => getRef(ref))}\r\n        {...colors}\r\n      >\r\n        <DatasetImageDiv>\r\n          <MdPhotoLibrary style={DatasetImage} />\r\n        </DatasetImageDiv>\r\n        <BottomWrapper>\r\n          <DatasetTitle>\r\n            {dataset.name +\r\n              ` (${\r\n                dataset.data.length /\r\n                (dataset.imageSize * dataset.imageSize * dataset.colorDepth + 1)\r\n              })`}\r\n          </DatasetTitle>\r\n        </BottomWrapper>\r\n      </Wrapper>\r\n    );\r\n  }\r\n);\r\n\r\nconst AddDatasetWrapper = styled.div`\r\n  ${cardWrapperCss}\r\n  border:2px ${(props) => props.color} dashed;\r\n  display:flex;\r\n  justify-content:center;\r\n  flex-direction:row;\r\n  align-items:center;\r\n  background:${(props) => props.backgroundbyelevation(1)};\r\n  box-sizing:border-box;\r\n  font-size: 1em;\r\n`;\r\n\r\nconst InnerDatasetSelect = styled.div`\r\n  border-radius: 5px;\r\n  padding: 1em;\r\n`;\r\n\r\nconst Title = styled.h3`\r\n  margin: 0.5em;\r\n  margin-left: 0;\r\n  margin-right: 0;\r\n\r\n  box-shadow: 0;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst Subtitle = styled.h5`\r\n  margin: 0.5em;\r\n  margin-left: 0;\r\n  margin-right: 0;\r\n\r\n  box-shadow: 0;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst FileSelect = styled.div`\r\n  padding: 1em;\r\n  border-radius: 5px;\r\n  margin-top: 1em;\r\n  border: 1px solid gray;\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst ConfirmButton = styled.div`\r\n  background: ${(props) => props.primarycolor};\r\n  color: ${(props) => props.primarytextcolor};\r\n  padding: 1em;\r\n  border-radius: 5px;\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n  margin: calc(0.8em - 1px);\r\n`;\r\n\r\nconst ParameterRow = styled.div`\r\n  margin-top: 1em;\r\n  display: flex;\r\n  flex-direction: row;\r\n`;\r\n\r\nconst ParameterName = styled.div`\r\n  padding: 1em;\r\n`;\r\n\r\nconst ParameterInput = styled.input`\r\n  border: none;\r\n  background: none;\r\n  border-bottom: 1px solid black;\r\n  text-align: center;\r\n`;\r\n\r\nconst LeftRight = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  height: 100%;\r\n`;\r\n\r\nconst LeftRightChild = styled.div`\r\n  width: 50%;\r\n  max-height: 100vh;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst StyledTextAreaWrapper = styled.div`\r\n  padding: 1em;\r\n  height: 100%;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst StyledTextArea = styled.textarea`\r\n  width: 100%;\r\n  height: 100%;\r\n  resize: none;\r\n  border-radius: 5px;\r\n`;\r\n\r\nexport const AddDatasetCard = connect(\r\n  (state) => state,\r\n  (dispatch) => ({\r\n    newDatasetConnected: (dataset, server) =>\r\n      newDataset(dataset, server, dispatch),\r\n  })\r\n)(({ colors, server, newDatasetConnected }) => {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [wrapperRef, setWrapperRef] = React.useState();\r\n  const [rawDataset, setRawDataset] = React.useState();\r\n  const [fileName, setFileName] = React.useState();\r\n\r\n  const [imageSize, setImageSize] = React.useState(32);\r\n  const [colorDepth, setColorDepth] = React.useState(3);\r\n  const [normalizeMax, setNormalizeMax] = React.useState(255);\r\n  const [crop, setCrop] = React.useState(`no`);\r\n  const [name, setName] = React.useState();\r\n\r\n  const [error, setError] = React.useState();\r\n  const [labels, setLabels] = React.useState();\r\n  return (\r\n    <>\r\n      <AddDatasetWrapper\r\n        color={colors.primaryColor}\r\n        backgroundbyelevation={colors.backgroundbyelevation}\r\n        ref={(r) => setWrapperRef(r)}\r\n        onClick={() => setOpen(true)}\r\n      >\r\n        <AiOutlineUpload color={colors.primaryColor} size={25} />\r\n      </AddDatasetWrapper>\r\n      {open && (\r\n        <AnimatedFullScreenCard\r\n          startFromElement={wrapperRef}\r\n          fullscreen={true}\r\n          onCloseCallback={() => setOpen(false)}\r\n          contentFunction={(close) => (\r\n            <InnerDatasetSelect {...colors}>\r\n              <Title>Upload dataset file</Title>\r\n              <Subtitle>\r\n                A dataset file is a binary file with the following formatting:\r\n                <br />\r\n                The file consists of chunks. Each chunk is a \"row\" of images,\r\n                although there is <b>nothing delimiting the rows</b>. The first\r\n                byte of the chunk is the label of the image(number), the next\r\n                n-bytes(image_depth * image_height * image_width) are the values\r\n                of the pixels.\r\n              </Subtitle>\r\n              <LeftRight>\r\n                <LeftRightChild>\r\n                  <Dropzone\r\n                    accept={\".bin\"}\r\n                    onDrop={(acceptedFiles) => {\r\n                      acceptedFiles.forEach((file) => {\r\n                        setFileName(file.name);\r\n                        setName(file.name.split(\".\")[0]);\r\n                        const reader = new FileReader();\r\n\r\n                        reader.onabort = () =>\r\n                          console.log(\"file reading was aborted\");\r\n                        reader.onerror = () =>\r\n                          console.log(\"file reading has failed\");\r\n                        reader.onload = () => {\r\n                          const binaryStr = reader.result;\r\n                          setRawDataset(new Uint8Array(binaryStr));\r\n                        };\r\n                        reader.readAsArrayBuffer(file);\r\n                      });\r\n                    }}\r\n                  >\r\n                    {({ getRootProps, getInputProps }) => (\r\n                      <section>\r\n                        <div {...getRootProps()}>\r\n                          <input {...getInputProps()} />\r\n                          <FileSelect>\r\n                            {fileName ||\r\n                              `Drag 'n' drop binary file here, or click to select it`}\r\n                          </FileSelect>\r\n                        </div>\r\n                      </section>\r\n                    )}\r\n                  </Dropzone>\r\n                  <ParameterRow>\r\n                    <ParameterName>dataset name</ParameterName>\r\n                    <ParameterInput\r\n                      value={name}\r\n                      onChange={(e) => setName(e.target.value)}\r\n                    />\r\n                  </ParameterRow>\r\n                  <ParameterRow>\r\n                    <ParameterName>image size</ParameterName>\r\n                    <ParameterInput\r\n                      value={imageSize}\r\n                      onChange={(e) => setImageSize(e.target.value)}\r\n                    />\r\n                  </ParameterRow>\r\n                  <ParameterRow>\r\n                    <ParameterName>color depth</ParameterName>\r\n                    <ParameterInput\r\n                      value={colorDepth}\r\n                      onChange={(e) => setColorDepth(e.target.value)}\r\n                    />\r\n                  </ParameterRow>\r\n                  <ParameterRow>\r\n                    <ParameterName>normalize max</ParameterName>\r\n                    <ParameterInput\r\n                      value={normalizeMax}\r\n                      onChange={(e) => setNormalizeMax(e.target.value)}\r\n                    />\r\n                  </ParameterRow>\r\n                  <ParameterRow>\r\n                    <ParameterName>crop dataset</ParameterName>\r\n                    <ParameterInput\r\n                      value={crop}\r\n                      onChange={(e) => setCrop(e.target.value)}\r\n                    />\r\n                  </ParameterRow>\r\n                </LeftRightChild>\r\n                <LeftRightChild>\r\n                  <StyledTextAreaWrapper>\r\n                    <StyledTextArea\r\n                      placeholder=\"Paste labels here, labels should be separated by a newline\"\r\n                      onChange={(e) => setLabels(e.target.value)}\r\n                    ></StyledTextArea>\r\n                  </StyledTextAreaWrapper>\r\n                </LeftRightChild>\r\n              </LeftRight>\r\n              <ConfirmButton\r\n                {...colors}\r\n                onClick={() => {\r\n                  setError();\r\n                  if (rawDataset) {\r\n                    if (\r\n                      rawDataset.length %\r\n                        (imageSize * imageSize * colorDepth + 1) !==\r\n                      0\r\n                    ) {\r\n                      setError(\r\n                        `Dataset invalid - length of stream doesn't match the parameters`\r\n                      );\r\n                    } else {\r\n                      newDatasetConnected(\r\n                        {\r\n                          id: `d` + new Date().getTime(),\r\n                          name,\r\n                          imageSize,\r\n                          colorDepth,\r\n                          data:\r\n                            crop === `no`\r\n                              ? rawDataset\r\n                              : rawDataset.subarray(\r\n                                  0,\r\n                                  crop *\r\n                                    (imageSize * imageSize * colorDepth + 1)\r\n                                ),\r\n                          vectorize: true,\r\n                          normalizeMax,\r\n                          labels: labels && labels.split(\"\\n\"),\r\n                        },\r\n                        server\r\n                      );\r\n                      close();\r\n                    }\r\n                  } else {\r\n                    setError(`file not loaded yet`);\r\n                  }\r\n                }}\r\n              >\r\n                Confirm\r\n              </ConfirmButton>\r\n              {error && <Error error={error} />}\r\n            </InnerDatasetSelect>\r\n          )}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n});\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { NetworkCardParent } from \"./NetworkCard\";\r\nimport DatasetCard from \"./DatasetCard\";\r\nimport Error, { translateError } from \"./Error\";\r\nimport ServerLogin from \"../components/ServerLogin\";\r\n\r\nconst Wrapper = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n`;\r\n\r\nconst FullCenter = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst SelectableBigDatasetList = ({\r\n  servers,\r\n  datasets,\r\n  onSelect,\r\n  refreshFunction,\r\n  firstId,\r\n}) => {\r\n  const [selected, select] = React.useState(false);\r\n  const [serversWithError, setServersWithError] = React.useState({});\r\n\r\n  return selected ? (\r\n    <FullCenter>\r\n      <DatasetCard dataset={selected} onClick={() => {}} />\r\n    </FullCenter>\r\n  ) : (\r\n    <Wrapper>\r\n      {servers.servers.map((server, i) => {\r\n        if (\r\n          !serversWithError[server.uniqueName] &&\r\n          datasets.serverDatasetsError[server.uniqueName]\r\n        ) {\r\n          setServersWithError(\r\n            Object.assign({}, serversWithError, { [server.uniqueName]: true })\r\n          );\r\n        }\r\n        if (\r\n          serversWithError[server.uniqueName] &&\r\n          !datasets.serverDatasetsError[server.uniqueName]\r\n        ) {\r\n          setServersWithError(\r\n            Object.assign({}, serversWithError, { [server.uniqueName]: false })\r\n          );\r\n          refreshFunction(server);\r\n        }\r\n        return (\r\n          <NetworkCardParent\r\n            key={`server_${i}_${server.uniqueName}_datasets`}\r\n            title={server.uniqueName}\r\n          >\r\n            {datasets.datasets[server.uniqueName] &&\r\n              Object.keys(datasets.datasets[server.uniqueName]).map(\r\n                (datasetId, j) => (\r\n                  <DatasetCard\r\n                    id={j === 0 && firstId}\r\n                    key={`dataset_sectioned_${j}`}\r\n                    dataset={datasets.datasets[server.uniqueName][datasetId]}\r\n                    onClick={() => {\r\n                      select(datasets.datasets[server.uniqueName][datasetId]);\r\n                      onSelect(server, datasetId);\r\n                    }}\r\n                  />\r\n                )\r\n              )}\r\n\r\n            {datasets.serverDatasetsError[server.uniqueName] &&\r\n              datasets.serverDatasetsError[server.uniqueName] !==\r\n                `Unauthorized` && (\r\n                <div>\r\n                  <Error\r\n                    error={translateError(\r\n                      datasets.serverDatasetsError[server.uniqueName]\r\n                    )}\r\n                    retryFunction={() => refreshFunction(server)}\r\n                  />\r\n                </div>\r\n              )}\r\n            {datasets.serverDatasetsError[server.uniqueName] ===\r\n              `Unauthorized` && <ServerLogin server={server} />}\r\n          </NetworkCardParent>\r\n        );\r\n      })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default SelectableBigDatasetList;\r\n","import React, { useState } from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\nimport AnimatedFullScreenCard from \"./AnimatedFullScreenCard\";\r\nimport SelectableBigDatasetList from \"./SelectableBigDatasetList\";\r\nimport { fetchDatasets } from \"../redux/actions/datasets\";\r\nimport DatasetCard from \"./DatasetCard\";\r\n\r\nconst DatasetSelectWrapper = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst SelectDatasetWrapper = styled.div`\r\n  width: 13em;\r\n  height: 15em;\r\n  box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12),\r\n    0 3px 5px -1px rgba(0, 0, 0, 0.2);\r\n  border-radius: 5px;\r\n  margin: 0.7em;\r\n  flex-grow: 0;\r\n  flex-shrink: 0;\r\n\r\n  transform: scale(1);\r\n  transition: transform 0.5s;\r\n\r\n  &:hover {\r\n    transform: scale(1.1);\r\n    cursor: pointer;\r\n  }\r\n\r\n  background: ${(props) => props.backgroundbyelevation(1)};\r\n  text-decoration: none;\r\n  color: ${(props) => props.accenttextcolor};\r\n  display: block;\r\n\r\n  border: 2px ${(props) => props.color} dashed;\r\n  box-sizing: border-box;\r\n  font-size: 1em;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst InnerNoOverflow = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow-x: hidden;\r\n  overflow-y: scroll;\r\n`;\r\n\r\nconst DatasetSelect = ({\r\n  colors,\r\n  innerRef,\r\n  servers,\r\n  datasets,\r\n  getDatasets,\r\n  onDatasetSelect, //(server, networkId) => {}\r\n  id,\r\n}) => {\r\n  const [selectedId, selectId] = useState();\r\n  const [open, setOpen] = useState(false);\r\n  const [wrapperRef, setWrapperRef] = useState();\r\n\r\n  React.useEffect(() => {\r\n    servers.servers.map((s) => {\r\n      getDatasets(s);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <DatasetSelectWrapper>\r\n      {(!selectedId || open) && (\r\n        <>\r\n          <SelectDatasetWrapper\r\n            onClick={() => setOpen(true)}\r\n            {...colors}\r\n            ref={(ref) => setWrapperRef(ref)}\r\n            id={id}\r\n          >\r\n            Select dataset\r\n          </SelectDatasetWrapper>\r\n          {open && (\r\n            <AnimatedFullScreenCard\r\n              startFromElement={wrapperRef}\r\n              fullscreen={true}\r\n              onCloseCallback={() => {\r\n                setOpen(false);\r\n              }}\r\n              contentFunction={(closeCard) => {\r\n                return (\r\n                  <InnerNoOverflow>\r\n                    <SelectableBigDatasetList\r\n                      firstId={id + `First`}\r\n                      servers={servers}\r\n                      datasets={datasets}\r\n                      onSelect={(server, datasetId) => {\r\n                        closeCard(false);\r\n                        onDatasetSelect(server, datasetId);\r\n                        selectId({\r\n                          server: server.uniqueName,\r\n                          dataset: datasetId,\r\n                        });\r\n                      }}\r\n                      refreshFunction={(server) => getDatasets(server)}\r\n                    />\r\n                  </InnerNoOverflow>\r\n                );\r\n              }}\r\n            />\r\n          )}\r\n        </>\r\n      )}\r\n      {!open && selectedId && (\r\n        <DatasetCard\r\n          dataset={datasets.datasets[selectedId.server][selectedId.dataset]}\r\n          onClick={() => {\r\n            setOpen(true);\r\n          }}\r\n          getRef={(ref) => setWrapperRef(ref)}\r\n        />\r\n      )}\r\n    </DatasetSelectWrapper>\r\n  );\r\n};\r\n\r\nexport default connect(\r\n  (state) => state,\r\n  (dispatch) => ({\r\n    getDatasets: (server) => fetchDatasets(server, dispatch),\r\n  })\r\n)(DatasetSelect);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { setTrainingParam } from \"../redux/actions/training\";\r\nimport KeyValueTable from \"../components/KeyValueTable\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { fetchNetwork } from \"../redux/actions/networks\";\r\nimport { fetchDataset } from \"../redux/actions/datasets\";\r\nimport { startTraining } from \"../redux/actions/training\";\r\n\r\n//components\r\nimport SpringButton from \"../components/SpringButton\";\r\nimport NetworkSelect from \"../components/NetworkSelect\";\r\nimport DatasetSelect from \"../components/DatasetSelect\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport Error from \"../components/Error\";\r\nimport { setNetwork } from \"../redux/actions/networks\";\r\n\r\nconst TrainingWrapper = styled.div`\r\n  height: 100%;\r\n  padding: 1em;\r\n`;\r\n\r\nconst Title = styled.h3`\r\n  margin: 0.5em;\r\n  margin-left: 0;\r\n  margin-right: 0;\r\n\r\n  box-shadow: 0;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst TwoPart = styled.div`\r\n  min-height: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n  width: 100%;\r\n  @media only screen and (max-width: 900px) {\r\n    & {\r\n      flex-direction: column;\r\n    }\r\n  }\r\n`;\r\n\r\nconst TwoPartChild = styled.div`\r\n  width: 50%;\r\n  @media only screen and (max-width: 900px) {\r\n    & {\r\n      width: 100%;\r\n    }\r\n  }\r\n`;\r\n\r\nconst TwoPartVertical = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  width: 100%;\r\n`;\r\n\r\nconst TwoPartVerticalChild = styled.div`\r\n  height: 50%;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst StartTrainingButtonWrapper = styled.div`\r\n  width: calc(100% - 4em);\r\n  margin: 2em;\r\n  margin-top: 0;\r\n`;\r\n\r\nclass StartTraining extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      networkId: undefined,\r\n      datasetId: undefined,\r\n      datasetServer: undefined,\r\n      networkServer: undefined,\r\n      server: undefined,\r\n      trainingProps: {\r\n        epochs: 200,\r\n        batch_size: 1,\r\n        learningRate: -0.1,\r\n        decay: 0.005,\r\n      },\r\n      redirect: false,\r\n      error: false,\r\n    };\r\n  }\r\n  render() {\r\n    return this.state.redirect ? (\r\n      <Redirect to={`/training`} />\r\n    ) : (\r\n      <TrainingWrapper>\r\n        <TwoPart>\r\n          <TwoPartChild>\r\n            <TwoPartVertical>\r\n              <TwoPartVerticalChild>\r\n                <Title>Network</Title>\r\n                <NetworkSelect\r\n                  id={`trainingNetworkSelectHint`}\r\n                  onNetworkSelect={(server, networkId) => {\r\n                    if (\r\n                      this.props.networks.networks[server.uniqueName][networkId]\r\n                        .reduced\r\n                    ) {\r\n                      this.props.getNetwork(networkId, server);\r\n                    }\r\n                    this.setState({\r\n                      networkId,\r\n                      networkServer: server,\r\n                      server,\r\n                    });\r\n                  }}\r\n                />\r\n              </TwoPartVerticalChild>\r\n              <TwoPartVerticalChild>\r\n                <Title>Dataset</Title>\r\n                <DatasetSelect\r\n                  id={`trainingDatasetSelectHint`}\r\n                  onDatasetSelect={(server, datasetId) => {\r\n                    if (\r\n                      this.props.datasets.datasets[server.uniqueName][datasetId]\r\n                        .reduced\r\n                    ) {\r\n                      this.props.getDataset(datasetId, server);\r\n                    }\r\n                    this.setState({ datasetId, datasetServer: server });\r\n                  }}\r\n                />\r\n              </TwoPartVerticalChild>\r\n            </TwoPartVertical>\r\n          </TwoPartChild>\r\n          <TwoPartChild>\r\n            <KeyValueTable\r\n              data={this.state.trainingProps}\r\n              editFunction={(key, value) => {\r\n                this.setState((prev) => ({\r\n                  trainingProps: Object.assign({}, prev.trainingProps, {\r\n                    [key]: value,\r\n                  }),\r\n                }));\r\n              }}\r\n            ></KeyValueTable>\r\n\r\n            <StartTrainingButtonWrapper>\r\n              <SpringButton\r\n                id={`startTrainingHint`}\r\n                text={`Start Training`}\r\n                color={this.props.colors.primarycolor}\r\n                textColor={this.props.colors.primarytextcolor}\r\n                onClick={() => {\r\n                  if (this.state.networkId && this.state.datasetId)\r\n                    if (\r\n                      this.props.networks.networks[\r\n                        this.state.networkServer.uniqueName\r\n                      ][this.state.networkId] &&\r\n                      this.props.networks.networks[\r\n                        this.state.networkServer.uniqueName\r\n                      ][this.state.networkId]\r\n                    ) {\r\n                      // https://stackoverflow.com/questions/1584370/how-to-merge-two-arrays-in-javascript-and-de-duplicate-items\r\n                      function arrayUnique(array) {\r\n                        var a = array.concat();\r\n                        for (var i = 0; i < a.length; ++i) {\r\n                          for (var j = i + 1; j < a.length; ++j) {\r\n                            if (a[i] === a[j]) a.splice(j--, 1);\r\n                          }\r\n                        }\r\n\r\n                        return a;\r\n                      }\r\n\r\n                      const dataset = this.props.datasets.datasets[\r\n                        this.state.datasetServer.uniqueName\r\n                      ][this.state.datasetId];\r\n                      const network = Object.assign(\r\n                        this.props.networks.networks[\r\n                          this.state.networkServer.uniqueName\r\n                        ][this.state.networkId],\r\n                        {\r\n                          serializeParams: arrayUnique(\r\n                            (\r\n                              this.props.networks.networks[\r\n                                this.state.networkServer.uniqueName\r\n                              ][this.state.networkId].serializeParams || []\r\n                            ).concat([\"labels\"])\r\n                          ),\r\n                          labels: dataset.labels,\r\n                        }\r\n                      );\r\n                      this.props.setNetwork(network, this.state.server);\r\n                      this.props.startTraining({\r\n                        server: this.state.server,\r\n                        network,\r\n                        dataset,\r\n                        trainingParams: this.state.trainingProps,\r\n                      });\r\n                      this.setState({ redirect: true });\r\n                    } else\r\n                      this.setState({ error: \"invalid network or dataset\" });\r\n                }}\r\n              />\r\n            </StartTrainingButtonWrapper>\r\n            {this.state.error && <Error error={this.state.error} />}\r\n          </TwoPartChild>\r\n        </TwoPart>\r\n      </TrainingWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  (state) => state,\r\n  (dispatch) => ({\r\n    getNetwork: (networkId, server) =>\r\n      fetchNetwork(networkId, server, dispatch),\r\n    getDataset: (datasetId, server) =>\r\n      fetchDataset(datasetId, server, dispatch),\r\n    setNetwork: (network, server) => setNetwork(server, network, dispatch),\r\n    startTraining: ({ server, network, dataset, trainingParams }) =>\r\n      startTraining({ server, network, dataset, trainingParams, dispatch }),\r\n  })\r\n)(StartTraining);\r\n","import TrainingController from \"../../other/TrainingController\";\r\nimport { setNetwork } from \"./networks\";\r\n\r\nexport const START_TRAINING = \"START_TRAINING\";\r\nexport const STOP_TRAINING = \"STOP_TRAINING\";\r\nexport const TRAINING_PROGRESS = \"TRAINING_PROGRESS\";\r\n\r\nexport const startedTraining = ({\r\n  network,\r\n  server,\r\n  dataset,\r\n  trainingParams,\r\n  epochs,\r\n  learningRate,\r\n  trainingInstance,\r\n}) => ({\r\n  type: START_TRAINING,\r\n  network,\r\n  server,\r\n  dataset,\r\n  trainingParams,\r\n  epochs,\r\n  learningRate,\r\n  trainingInstance,\r\n});\r\n\r\nexport const stoppedTraining = ({ network, server }) => ({\r\n  type: STOP_TRAINING,\r\n  network,\r\n  server,\r\n});\r\n\r\nexport const trainingProgress = ({\r\n  server,\r\n  epoch,\r\n  err,\r\n  accuracy,\r\n  learningRate,\r\n  network,\r\n  epochs,\r\n}) => ({\r\n  type: TRAINING_PROGRESS,\r\n  epoch,\r\n  err,\r\n  accuracy,\r\n  learningRate,\r\n  server,\r\n  network,\r\n  epochs,\r\n});\r\n\r\nexport const startTraining = ({\r\n  server,\r\n  network,\r\n  dataset,\r\n  trainingParams,\r\n  dispatch,\r\n}) => {\r\n  const trainingInstance = new TrainingController({\r\n    server,\r\n    network,\r\n    dataset,\r\n    trainingParams,\r\n  });\r\n  trainingInstance.addEventListener(\"start\", () => {\r\n    dispatch(\r\n      startedTraining({\r\n        network,\r\n        server,\r\n        dataset,\r\n        trainingParams,\r\n        learningRate: trainingParams.learningRate,\r\n        epochs: trainingParams.epochs,\r\n        trainingInstance: trainingInstance,\r\n      })\r\n    );\r\n  });\r\n  trainingInstance.addEventListener(\"end\", () => {\r\n    dispatch(stoppedTraining({ network, server }));\r\n  });\r\n  trainingInstance.addEventListener(\r\n    \"batchProgress\",\r\n    (epoch, accuracy, err, learningRate, trainedNetwork) => {\r\n      setNetwork(\r\n        server,\r\n        Object.assign(JSON.parse(trainedNetwork), {\r\n          name: network.name,\r\n          id: network.id,\r\n        }),\r\n        dispatch,\r\n        false\r\n      );\r\n      dispatch(\r\n        trainingProgress({\r\n          epoch,\r\n          err,\r\n          accuracy,\r\n          learningRate,\r\n          server,\r\n          network,\r\n          epochs: trainingParams.epochs,\r\n        })\r\n      );\r\n    }\r\n  );\r\n  trainingInstance.startLearning();\r\n};\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { fetchDatasets } from \"../redux/actions/datasets\";\r\nimport { NetworkCardParent } from \"../components/NetworkCard\";\r\nimport Error, { translateError } from \"../components/Error\";\r\nimport ServerLogin from \"../components/ServerLogin\";\r\nimport DatasetCard, { AddDatasetCard } from \"../components/DatasetCard\";\r\nimport { SyncLoader } from \"react-spinners\";\r\n\r\nclass Datasets extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.servers.servers.map((server) =>\r\n      this.props.fetchDatasets(server)\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.props.servers.servers.map((server) => (\r\n          <NetworkCardParent\r\n            title={server.uniqueName}\r\n            key={`dataset_parent${server.uniqueName}`}\r\n          >\r\n            {this.props.datasets.serverDatasetsLoading[server.uniqueName] && (\r\n              <div style={{ width: `100%`, heigh: `100%` }}>\r\n                <SyncLoader />\r\n              </div>\r\n            )}\r\n            {this.props.datasets.serverDatasetsError[server.uniqueName] &&\r\n              this.props.datasets.serverDatasetsError[server.uniqueName] !==\r\n                `Unauthorized` && (\r\n                <Error\r\n                  error={translateError(\r\n                    this.props.datasets.serverDatasetsError[server.uniqueName]\r\n                  )}\r\n                  retryFunction={() => this.props.fetchDatasets(server)}\r\n                />\r\n              )}\r\n            {this.props.datasets.serverDatasetsError[server.uniqueName] ===\r\n              `Unauthorized` && <ServerLogin server={server} />}\r\n            {!this.props.datasets.serverDatasetsLoading[server.uniqueName] &&\r\n              !this.props.datasets.serverDatasetsError[server.uniqueName] &&\r\n              this.props.datasets.datasets[server.uniqueName] && (\r\n                <>\r\n                  {Object.keys(\r\n                    this.props.datasets.datasets[server.uniqueName]\r\n                  ).map((datasetId) => (\r\n                    <DatasetCard\r\n                      key={`dataset_card_${datasetId}`}\r\n                      dataset={\r\n                        this.props.datasets.datasets[server.uniqueName][\r\n                          datasetId\r\n                        ]\r\n                      }\r\n                      serverId={server.uniqueName}\r\n                    />\r\n                  ))}\r\n                  <AddDatasetCard server={server} />\r\n                </>\r\n              )}\r\n          </NetworkCardParent>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  (state) => state,\r\n  (dispatch) => ({\r\n    fetchDatasets: (server) => fetchDatasets(server, dispatch),\r\n  })\r\n)(Datasets);\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst ButtonWrapper = styled.div`\r\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),\r\n    0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  background: ${(props) => props.color};\r\n  color: ${(props) => props.textcolor};\r\n  border-radius: 5px;\r\n  margin-top: 1em;\r\n  padding: 1em;\r\n\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst TwoPart = styled.div`\r\n  width: 50%;\r\n  height: 100%;\r\n  text-align: center;\r\n`;\r\n\r\nexport default ({ color, textcolor, text, onConfirm, style }) => {\r\n  const [open, setOpen] = React.useState(false);\r\n  return (\r\n    <ButtonWrapper\r\n      {...{ color, textcolor }}\r\n      style={style}\r\n      onClick={() => {\r\n        if (!open) {\r\n          setOpen(true);\r\n        }\r\n      }}\r\n    >\r\n      {!open && <div>{text}</div>}\r\n      {open && (\r\n        <>\r\n          <TwoPart\r\n            onClick={() => {\r\n              onConfirm();\r\n              setOpen(false);\r\n            }}\r\n          >\r\n            confirm\r\n          </TwoPart>\r\n          <TwoPart\r\n            onClick={() => {\r\n              setOpen(false);\r\n            }}\r\n          >\r\n            cancel\r\n          </TwoPart>\r\n        </>\r\n      )}\r\n    </ButtonWrapper>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { connect } from \"react-redux\";\r\nimport TrainingController from \"../other/TrainingController\";\r\nimport { deepNormalize, max, deepMap } from \"../CNN-js/math\";\r\nimport { tint, mix } from \"polished\";\r\nimport { SyncLoader } from \"react-spinners\";\r\nconst CNN = require(\"../CNN-js/cnn\").CNN;\r\n\r\nconst StyledTable = styled.table`\r\n  height: 100%;\r\n  width: 100%;\r\n  padding: 0.5em;\r\n  box-sizing: border-box;\r\n  table-layout: fixed;\r\n`;\r\nconst StyledRow = styled.tr``;\r\nconst StyledData = styled.td`\r\n  text-align: center;\r\n  background: ${(props) => tint(1 - props.opacity, props.primarycolor)};\r\n  color: ${(props) =>\r\n    props.opacity > 0.5 ? props.primarytextcolor : props.textcolor};\r\n`;\r\n\r\nconst StyledDataFlipped = styled.td`\r\n  text-align: center;\r\n  color: ${(props) => props.textcolor};\r\n  /*transform: rotate(-90deg);*/\r\n  height: 5em;\r\n`;\r\nconst StyledDataStart = styled.td`\r\n  text-align: center;\r\n  color: ${(props) => props.textcolor};\r\n  width: 5em;\r\n`;\r\n\r\nconst StyledCenterData = styled.td`\r\n  text-align: center;\r\n  background: ${(props) => tint(1 - props.opacity, props.primarycolor)};\r\n  color: ${(props) =>\r\n    props.opacity > 0.5 ? props.primarytextcolor : props.textcolor};\r\n  border: 1px solid grey;\r\n\r\n  border-radius: 2px;\r\n`;\r\n\r\nconst TableContainer = styled.div`\r\n  background: ${(props) => props.backgroundbyelevation(1)};\r\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),\r\n    0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\r\n  color: ${(props) => props.textcolor};\r\n  border-radius: 5px;\r\n  :not(:first-child) {\r\n    margin-top: 0.5em;\r\n  }\r\n  padding: 0.5em;\r\n  height: 100%;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  height: 100%;\r\n  width: 100%;\r\n  font-size: 0.5em;\r\n`;\r\n\r\nconst TableMenuTop = styled.div`\r\n  height: 1em;\r\n  text-align: center;\r\n  vertical-align: center;\r\n`;\r\n\r\nconst TableMenuRestBottom = styled.div`\r\n  height: calc(100% - 0.5em);\r\n  display: flex;\r\n  flex-direction: row;\r\n`;\r\nconst TableMenuLeft = styled.div`\r\n  width: 1em;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transform: rotate(-90deg) translateZ(0);\r\n  -webkit-font-smoothing: antialiased;\r\n`;\r\n\r\nconst TableRest = styled.div`\r\n  width: calc(100% - 0.5em);\r\n  height: 100%;\r\n`;\r\n\r\nexport default connect((state) => state)(\r\n  ({ colors, network, dataset, updateVar, statsCallback }) => {\r\n    const [cm, setCm] = React.useState(null);\r\n    const [normalizedCm, setNormalizedCm] = React.useState(null);\r\n    const [stats, setStats] = React.useState(null);\r\n    const [loading, setLoading] = React.useState(false);\r\n\r\n    const labels = dataset.labels;\r\n\r\n    React.useEffect(() => {\r\n      if (!loading) {\r\n        setLoading(true);\r\n        const instance = new TrainingController({ network, dataset });\r\n        instance.addEventListener(\"confusionMatrix\", (confusion) => {\r\n          setCm(confusion);\r\n          setNormalizedCm(deepNormalize(confusion, max(confusion)));\r\n          const stats1 = CNN.confusionMatrixStats(confusion);\r\n          setStats(stats1);\r\n          if (statsCallback) statsCallback(stats1);\r\n          setLoading(false);\r\n        });\r\n        instance.confusionMatrix();\r\n      }\r\n    }, [updateVar]);\r\n    console.log(stats);\r\n    return cm && stats ? (\r\n      <TableContainer {...colors}>\r\n        <TableMenuTop>\r\n          predicted{loading ? ` (recalculating...)` : ``}\r\n        </TableMenuTop>\r\n        <TableMenuRestBottom>\r\n          <TableMenuLeft>actual</TableMenuLeft>\r\n          <TableRest>\r\n            <StyledTable>\r\n              {labels && (\r\n                <StyledRow>\r\n                  <StyledData {...colors} opacity={0}></StyledData>\r\n                  {labels.map((l) => (\r\n                    <StyledDataFlipped {...colors}>{l}</StyledDataFlipped>\r\n                  ))}\r\n                  <StyledData {...colors} opacity={0}></StyledData>\r\n                  {stats &&\r\n                    Object.keys(stats.actual[0]).map((key) => (\r\n                      <StyledDataFlipped {...colors}>{key}</StyledDataFlipped>\r\n                    ))}\r\n                  <StyledDataFlipped {...colors}>accuracy</StyledDataFlipped>\r\n                </StyledRow>\r\n              )}\r\n              {cm.map((row, i) => (\r\n                <StyledRow>\r\n                  {labels && ( //label\r\n                    <StyledDataStart {...colors}>{labels[i]}</StyledDataStart>\r\n                  )}\r\n                  {row.map((\r\n                    predictedCount,\r\n                    j //data\r\n                  ) =>\r\n                    i === j ? (\r\n                      <StyledCenterData\r\n                        {...colors}\r\n                        opacity={normalizedCm[i][j]}\r\n                      >\r\n                        {predictedCount}\r\n                      </StyledCenterData>\r\n                    ) : (\r\n                      <StyledData {...colors} opacity={normalizedCm[i][j]}>\r\n                        {predictedCount}\r\n                      </StyledData>\r\n                    )\r\n                  )}\r\n                  <StyledData {...colors} opacity={0}></StyledData>\r\n                  {\" \" /* spacer */}\r\n                  {stats.actual &&\r\n                    stats.actual[i] &&\r\n                    Object.keys(stats.actual[i]).map((statName) => (\r\n                      <StyledData {...colors} opacity={0}>\r\n                        {parseInt(stats.actual[i][statName] * 100) + `%`}\r\n                      </StyledData>\r\n                    ))}\r\n                </StyledRow>\r\n              ))}\r\n              <StyledRow>\r\n                <StyledData {...colors} opacity={0}></StyledData>\r\n              </StyledRow>\r\n              <StyledRow>\r\n                <StyledDataStart {...colors}>average</StyledDataStart>\r\n                {cm[0].map((_) => (\r\n                  <StyledData {...colors} opacity={0}></StyledData>\r\n                ))}\r\n                <StyledData {...colors} opacity={0}></StyledData>\r\n                {stats.avg &&\r\n                  Object.keys(stats.avg).map((statName) => (\r\n                    <StyledData {...colors} opacity={0}>\r\n                      {parseInt(stats.avg[statName] * 100) + `%`}\r\n                    </StyledData>\r\n                  ))}\r\n              </StyledRow>\r\n            </StyledTable>\r\n          </TableRest>\r\n        </TableMenuRestBottom>\r\n      </TableContainer>\r\n    ) : (\r\n      <div>\r\n        <SyncLoader />\r\n      </div>\r\n    );\r\n  }\r\n);\r\n","import React from \"react\";\r\n\r\nimport styled from \"styled-components\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst TableWrapper = styled.div`\r\n  background: ${(props) => props.backgroundbyelevation(1)};\r\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),\r\n    0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\r\n  color: ${(props) => props.textcolor};\r\n  border-radius: 5px;\r\n`;\r\n\r\nconst TableRow = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n  &:not(:first-child) {\r\n    border-top: 1px solid gray;\r\n  }\r\n`;\r\n\r\nconst TableColumn = styled.div`\r\n  width: 50%;\r\n  text-align: center;\r\n  padding: 0.5em;\r\n`;\r\n\r\nexport default connect((state) => ({\r\n  colors: state.colors,\r\n}))(({ colors, data, include, style }) => (\r\n  <TableWrapper {...colors} style={style}>\r\n    {(include || Object.keys(data)).map((key, i) => (\r\n      <TableRow key={`data_row_${i}`}>\r\n        <TableColumn>{key}</TableColumn>\r\n        {typeof data[key] === `object` ? (\r\n          <TableColumn>\r\n            {Object.keys(data[key]).map((keyInner, j) => (\r\n              <TableRow key={`data_row_row_${j}`}>\r\n                <TableColumn>{keyInner}</TableColumn>\r\n                <TableColumn>{data[key][keyInner]}</TableColumn>\r\n              </TableRow>\r\n            ))}\r\n          </TableColumn>\r\n        ) : (\r\n          <TableColumn>{data[key]}</TableColumn>\r\n        )}\r\n      </TableRow>\r\n    ))}\r\n  </TableWrapper>\r\n));\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Error from \"../components/Error\";\r\nimport styled from \"styled-components\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n\r\nimport { Line } from \"react-chartjs-2\";\r\nimport ButtonWithConfirmation from \"../components/ButtonWithConfirmation\";\r\n\r\nimport ConfusionMatrix from \"../components/ConfusionMatrix\";\r\nimport { getDataset } from \"../other/api\";\r\n\r\nimport Table from \"../components/Table\";\r\n\r\nconst ChardCard = styled.div`\r\n  background: ${(props) => props.backgroundbyelevation(1)};\r\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),\r\n    0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\r\n  color: ${(props) => props.textcolor};\r\n  border-radius: 5px;\r\n  :not(:first-child) {\r\n    margin-top: 0.5em;\r\n  }\r\n  padding: 0.5em;\r\n`;\r\n\r\nclass ChartWrapper extends React.Component {\r\n  componentDidUpdate() {\r\n    if (this.chartRef) {\r\n      this.chartRef.chartInstance.update();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <ChardCard {...this.props.colors}>\r\n        <Line\r\n          data={{\r\n            datasets: this.props.datasets.map((d) =>\r\n              Object.assign({}, d, {\r\n                fill: false,\r\n                borderColor: this.props.color,\r\n                data: d.data.map((y, x) => ({\r\n                  x,\r\n                  y,\r\n                })),\r\n              })\r\n            ),\r\n          }}\r\n          options={{\r\n            legend: { display: false },\r\n            title: { display: true, text: this.props.title },\r\n            scales: {\r\n              xAxes: [\r\n                {\r\n                  type: `linear`,\r\n                  ticks: this.props.maxX\r\n                    ? {\r\n                        suggestedMin: 0,\r\n                        suggestedMax: this.props.maxX,\r\n                      }\r\n                    : {},\r\n                },\r\n              ],\r\n            },\r\n          }}\r\n          ref={(reference) => (this.chartRef = reference)}\r\n        />\r\n      </ChardCard>\r\n    );\r\n  }\r\n}\r\n\r\nconst TopBottom = styled.div`\r\n  height: 100%;\r\n`;\r\n\r\nconst TopBottomChild = styled.div`\r\n  height: 50%;\r\n  width: 100%;\r\n  padding: 0.5em;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst TrainingProgressWrapper = styled.div`\r\n  padding: 0.5em;\r\n`;\r\n\r\nconst LeftRight = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  height: 100%;\r\n`;\r\n\r\nconst LeftRightChild = styled.div`\r\n  width: 50%;\r\n  max-height: 100vh;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst round = (x, c) => parseInt(x * 10 ** c) / 10 ** c;\r\nclass TrainingProgress extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      stats: {},\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const trained =\r\n      this.props.match.params.serverUniqueName === `trained` &&\r\n      this.props.training.trained[this.props.match.params.networkId];\r\n    const serverName = trained\r\n      ? this.props.training.trained[this.props.match.params.networkId].server\r\n      : this.props.match.params.serverUniqueName;\r\n    const networkId = trained\r\n      ? this.props.training.trained[this.props.match.params.networkId].network\r\n      : this.props.match.params.networkId;\r\n\r\n    const trainingData = trained\r\n      ? this.props.training.trained[this.props.match.params.networkId]\r\n      : this.props.training[serverName] &&\r\n        this.props.training[serverName][networkId];\r\n    return (\r\n      <TrainingProgressWrapper>\r\n        {serverName && networkId ? (\r\n          this.props.networks.networks[serverName] &&\r\n          this.props.networks.networks[serverName][networkId] ? (\r\n            trained || (this.props.training[serverName] && trainingData) ? (\r\n              <>\r\n                <LeftRight>\r\n                  <LeftRightChild>\r\n                    <TopBottom>\r\n                      <TopBottomChild>\r\n                        <ChartWrapper\r\n                          colors={this.props.colors}\r\n                          datasets={[\r\n                            {\r\n                              label: `error`,\r\n                              data: trainingData.errArr,\r\n                            },\r\n                          ]}\r\n                          title={`error`}\r\n                          /*maxX={\r\n                      this.props.training[\r\n                        serverName\r\n                      ][networkId].epochs\r\n                    }*/\r\n                          color={this.props.colors.primarycolor}\r\n                        />\r\n                      </TopBottomChild>\r\n                      <TopBottomChild>\r\n                        <ChartWrapper\r\n                          colors={this.props.colors}\r\n                          datasets={[\r\n                            {\r\n                              label: `accuracy`,\r\n                              data: trainingData.accuracyArr.map(\r\n                                (i) => i * 100\r\n                              ),\r\n                            },\r\n                          ]}\r\n                          title={`accuracy`}\r\n                          /*maxX={\r\n                      this.props.training[\r\n                        serverName\r\n                      ][networkId].epochs\r\n                    }*/\r\n                          color={this.props.colors.primarycolor}\r\n                        />\r\n                        {/*<ChartWrapper\r\n                  colors={this.props.colors}\r\n                    datasets={[\r\n                      {\r\n                        label: `learning rate`,\r\n                        data: this.props.training[\r\n                          serverName\r\n                        ][networkId].learningRateArr,\r\n                      },\r\n                    ]}\r\n                    title={`learning rate`}\r\n                    // maxX={\r\n                    //   this.props.training[\r\n                    //     serverName\r\n                    //   ][networkId].epochs\r\n                    // }\r\n                    color={this.props.colors.primarycolor}\r\n                  />*/}\r\n                      </TopBottomChild>\r\n                    </TopBottom>\r\n                  </LeftRightChild>\r\n                  <LeftRightChild>\r\n                    <TopBottom>\r\n                      <TopBottomChild>\r\n                        <Table\r\n                          data={{\r\n                            network: this.props.networks.networks[serverName][\r\n                              networkId\r\n                            ].name,\r\n                            dataset:\r\n                              this.props.training[serverName] &&\r\n                              trainingData.dataset.name,\r\n                          }}\r\n                        />\r\n                        <Table\r\n                          style={{ marginTop: `0.5em` }}\r\n                          data={trainingData}\r\n                          include={[\r\n                            `epoch`,\r\n                            `epochs`,\r\n                            `learningRate`,\r\n                            `err`,\r\n                            `accuracy`,\r\n                          ]}\r\n                        />\r\n                        {!trained && (\r\n                          <ButtonWithConfirmation\r\n                            color={this.props.colors.errorcolor}\r\n                            textcolor={`white`}\r\n                            text={`stop learning`}\r\n                            onConfirm={() =>\r\n                              this.props.training[serverName][\r\n                                networkId\r\n                              ].trainingInstance.terminate()\r\n                            }\r\n                          />\r\n                        )}\r\n                      </TopBottomChild>\r\n                      <TopBottomChild>\r\n                        <ConfusionMatrix\r\n                          updateVar={trainingData.epoch}\r\n                          network={\r\n                            this.props.networks.networks[serverName][networkId]\r\n                          }\r\n                          dataset={\r\n                            this.props.datasets.datasets[serverName][\r\n                              trainingData.dataset.id\r\n                            ]\r\n                          }\r\n                          statsCallback={(stats) => this.setState({ stats })}\r\n                        />\r\n                      </TopBottomChild>\r\n                    </TopBottom>\r\n                  </LeftRightChild>\r\n                </LeftRight>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Error error={`network isn't training`} />\r\n                <Redirect to={`/training`} />\r\n              </>\r\n            )\r\n          ) : (\r\n            <Error error={`network isn't training`} />\r\n          )\r\n        ) : (\r\n          <Error error={`invalid network or server`} />\r\n        )}\r\n      </TrainingProgressWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  (state) => state,\r\n  (dispatch) => ({ fetchDataset: (id, server) => getDataset(id, server) })\r\n)(TrainingProgress);\r\n","import React, { Component } from \"react\";\r\n\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\n// redux\r\nimport { connect } from \"react-redux\";\r\n\r\n// redux actions\r\nimport { fetchDataset } from \"../redux/actions/datasets\";\r\n\r\n// utils\r\nimport styled from \"styled-components\";\r\nimport { openDatasetFromBuffer } from \"../CNN-js/datasetProcessor\";\r\nimport LayerCanvas from \"../components/LayerCanvas\";\r\n\r\nimport { AiOutlineArrowLeft, AiOutlineArrowRight } from \"react-icons/ai\";\r\nimport NetworkSelect from \"../components/NetworkSelect\";\r\nimport ConfusionMatrix from \"../components/ConfusionMatrix\";\r\nimport Table from \"../components/Table\";\r\n\r\nconst DatasetWrapper = styled.div`\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst Title = styled.h2`\r\n  margin: 0.5em;\r\n  margin-left: 0;\r\n  margin-right: 0;\r\n\r\n  box-shadow: 0;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst FlexCenter = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst PreviewWrapper = styled.div`\r\n  max-width: 100%;\r\n`;\r\n\r\nconst Preview = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  padding: 1em;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst PreviewControls = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: flex-end;\r\n`;\r\n\r\nconst PreviewButton = styled.div`\r\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),\r\n    0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\r\n  background: ${(props) => props.primarycolor};\r\n  color: ${(props) => props.primarytextcolor};\r\n  border: none;\r\n  text-decoration: none;\r\n  border-radius: 5px;\r\n  box-sizing: content-box;\r\n  padding: 0.2em 0.5em;\r\n  margin-right: 1em;\r\n\r\n  display: flex;\r\n  justify-content: center;\r\n\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst LeftRight = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  height: 100%;\r\n`;\r\n\r\nconst LeftRightChild = styled.div`\r\n  width: 50%;\r\n  max-height: 100vh;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst getDatasetLen = (dataset) => {\r\n  return (\r\n    dataset &&\r\n    dataset.data &&\r\n    dataset.data.length / (dataset.imageSize ** 2 * dataset.colorDepth + 1)\r\n  );\r\n};\r\n\r\nconst round = (x, c) => parseInt(x * 10 ** c) / 10 ** c;\r\n\r\nclass Dataset extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      dataset:\r\n        props.match.params.serverUniqueName &&\r\n        props.match.params.datasetId &&\r\n        props.datasets.datasets[props.match.params.serverUniqueName] &&\r\n        props.datasets.datasets[props.match.params.serverUniqueName][\r\n          props.match.params.datasetId\r\n        ],\r\n      error: undefined,\r\n      server: this.props.servers.servers.find(\r\n        (server) =>\r\n          server.uniqueName === this.props.match.params.serverUniqueName\r\n      ),\r\n\r\n      datasetData: undefined,\r\n      datasetPreviewIndex: 0,\r\n      datasetPreviewSize: 50,\r\n      selectedNetwork: undefined,\r\n      selectedNetworkServer: undefined,\r\n      confusionStats: undefined,\r\n    };\r\n\r\n    this.checkForError = this.checkForError.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.checkForError();\r\n\r\n    if (this.state.dataset)\r\n      this.setState({\r\n        datasetData: openDatasetFromBuffer(\r\n          this.state.dataset.data,\r\n          this.state.dataset.colorDepth,\r\n          this.state.dataset.imageSize\r\n        ),\r\n      });\r\n  }\r\n\r\n  checkForError() {\r\n    const dataset =\r\n      this.props.match.params.serverUniqueName &&\r\n      this.props.match.params.datasetId &&\r\n      this.props.datasets.datasets[this.props.match.params.serverUniqueName] &&\r\n      this.props.datasets.datasets[this.props.match.params.serverUniqueName][\r\n        this.props.match.params.datasetId\r\n      ];\r\n    if (dataset !== this.state.dataset) this.setState({ dataset });\r\n    let error = undefined;\r\n    if (!this.props.match.params.serverUniqueName) {\r\n      error = `invalid server name`;\r\n    } else if (!this.props.match.params.datasetId) {\r\n      error = `invalid network name`;\r\n    } else if (\r\n      !this.props.datasets.datasets[this.props.match.params.serverUniqueName]\r\n    ) {\r\n      error = `server has no networks`;\r\n      if (!this.state.server.apiToken) {\r\n        error = `not logged in, redirecting...`;\r\n        this.setState({ notLoggedIn: true });\r\n      } else {\r\n        if (!this.state.refreshRequestSent) {\r\n          this.setState({ needToRefreshDataset: true });\r\n        }\r\n      }\r\n    } else if (\r\n      !this.props.datasets.datasets[this.props.match.params.serverUniqueName][\r\n        this.props.match.params.datasetId\r\n      ]\r\n    ) {\r\n      error = `network has not been cached`;\r\n      if (!this.state.refreshRequestSent)\r\n        this.setState({ needToRefreshDataset: true });\r\n    }\r\n\r\n    error =\r\n      this.props.datasets.datasetsError[\r\n        this.props.match.params.serverUniqueName +\r\n          this.props.match.params.datasetId\r\n      ] || error;\r\n    if (this.state.error !== error) {\r\n      this.setState({ error });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.checkForError();\r\n    if (this.state.needToRefreshDataset) {\r\n      this.setState(\r\n        { needToRefreshDataset: false, refreshRequestSent: true },\r\n        () => {\r\n          this.props.getDataset(\r\n            this.props.match.params.datasetId,\r\n            this.state.server\r\n          );\r\n        }\r\n      );\r\n    }\r\n    if (this.state.dataset && this.state.refreshRequestSent) {\r\n      this.setState({\r\n        datasetData: openDatasetFromBuffer(\r\n          this.state.dataset.data,\r\n          this.state.dataset.colorDepth,\r\n          this.state.dataset.imageSize\r\n        ),\r\n        refreshRequestSent: false,\r\n      });\r\n    }\r\n\r\n    if (this.state.notLoggedIn) {\r\n      setTimeout(() => {\r\n        this.setState({\r\n          notLoggedIn: false,\r\n          redirect: true,\r\n        });\r\n      }, 3000);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <DatasetWrapper>\r\n        {this.state.redirect && (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/datasets\",\r\n            }}\r\n          />\r\n        )}\r\n        {this.state.dataset && (\r\n          <>\r\n            <Title>{this.state.dataset.name}</Title>\r\n            <FlexCenter>\r\n              <PreviewWrapper>\r\n                <Preview>\r\n                  {this.state.datasetData &&\r\n                    this.state.datasetData\r\n                      .slice(\r\n                        this.state.datasetPreviewIndex,\r\n                        this.state.datasetPreviewIndex +\r\n                          this.state.datasetPreviewSize\r\n                      )\r\n                      .map((d) => (\r\n                        <LayerCanvas\r\n                          style={{ paddingLeft: `.5em`, paddingTop: `.5em` }}\r\n                          array={d.input}\r\n                          width={`5em`}\r\n                          height={`5em`}\r\n                        />\r\n                      ))}\r\n                </Preview>\r\n                <PreviewControls>\r\n                  {this.state.datasetData &&\r\n                    this.state.datasetPreviewIndex > 0 && (\r\n                      <PreviewButton\r\n                        {...this.props.colors}\r\n                        onClick={() =>\r\n                          this.setState((prevState) => ({\r\n                            datasetPreviewIndex:\r\n                              prevState.datasetPreviewIndex -\r\n                              prevState.datasetPreviewSize,\r\n                          }))\r\n                        }\r\n                      >\r\n                        <AiOutlineArrowLeft />\r\n                      </PreviewButton>\r\n                    )}\r\n                  {this.state.datasetData &&\r\n                    this.state.datasetPreviewIndex +\r\n                      this.state.datasetPreviewSize <\r\n                      this.state.datasetData.length && (\r\n                      <PreviewButton\r\n                        {...this.props.colors}\r\n                        onClick={() =>\r\n                          this.setState((prevState) => ({\r\n                            datasetPreviewIndex:\r\n                              prevState.datasetPreviewIndex +\r\n                              prevState.datasetPreviewSize,\r\n                          }))\r\n                        }\r\n                      >\r\n                        <AiOutlineArrowRight />\r\n                      </PreviewButton>\r\n                    )}\r\n                </PreviewControls>\r\n              </PreviewWrapper>\r\n            </FlexCenter>\r\n            <Title>Generate confusion matrix</Title>\r\n            <LeftRight>\r\n              <LeftRightChild>\r\n                <NetworkSelect\r\n                  onNetworkSelect={(server, networkId) => {\r\n                    this.setState({\r\n                      selectedNetworkServer: server,\r\n                      selectedNetwork: networkId,\r\n                    });\r\n                  }}\r\n                />\r\n              </LeftRightChild>\r\n              <LeftRightChild>\r\n                {this.state.selectedNetwork && (\r\n                  <ConfusionMatrix\r\n                    updateVar={this.state.selectedNetwork}\r\n                    network={\r\n                      this.props.networks.networks[\r\n                        this.state.selectedNetworkServer.uniqueName\r\n                      ][this.state.selectedNetwork]\r\n                    }\r\n                    dataset={this.state.dataset}\r\n                    statsCallback={(confusionStats) =>\r\n                      this.setState({ confusionStats })\r\n                    }\r\n                  />\r\n                )}\r\n              </LeftRightChild>\r\n            </LeftRight>\r\n          </>\r\n        )}\r\n      </DatasetWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  (state) => state,\r\n  (dispatch) => ({\r\n    getDataset: (datasetId, server) =>\r\n      fetchDataset(datasetId, server, dispatch),\r\n  })\r\n)(Dataset);\r\n","import React from \"react\";\r\n\r\nimport styled, { css } from \"styled-components\";\r\n\r\n// components\r\nimport Sidebar from \"./Sidebar\";\r\nimport TopBar from \"./TopBar\";\r\nimport TrainingIndicator from \"./TrainingIndicator\";\r\nimport Hint from \"./Hint\";\r\nimport { HintList } from \"./Hint\";\r\n\r\n// screens\r\nimport Dashboard from \"../screens/Dashboard\";\r\nimport Networks from \"../screens/Networks\";\r\nimport Network from \"../screens/Network\";\r\nimport Training from \"../screens/Training\";\r\nimport StartTraining from \"../screens/StartTraining\";\r\nimport Datasets from \"../screens/Datasets\";\r\nimport TrainingProgress from \"../screens/TrainingProgress\";\r\n\r\n// router\r\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\r\n\r\n// redux\r\nimport { connect } from \"react-redux\";\r\n\r\n// resources\r\nimport { MdHome, MdSchool, MdPhotoLibrary } from \"react-icons/md\";\r\nimport { IoMdGitNetwork } from \"react-icons/io\";\r\nimport { FaQuestion } from \"react-icons/fa\";\r\nimport Dataset from \"../screens/Dataset\";\r\n\r\nconst screens = [\r\n  {\r\n    path: `/`,\r\n    exact: true,\r\n    exactLink: true,\r\n    component: Dashboard,\r\n    fullName: `About`,\r\n    icon: FaQuestion,\r\n  },\r\n  {\r\n    path: `/networks`,\r\n    fullName: `Networks`,\r\n    component: Networks,\r\n    exact: true,\r\n    icon: ({ style }) => (\r\n      <IoMdGitNetwork style={{ transform: `rotate(-90deg)`, ...style }} />\r\n    ),\r\n    sidebarId: `networksHint`,\r\n  },\r\n  {\r\n    path: `/datasets`,\r\n    fullName: `Datasets`,\r\n    component: Datasets,\r\n    exact: true,\r\n    icon: MdPhotoLibrary,\r\n  },\r\n  {\r\n    path: `/datasets/:serverUniqueName/:datasetId`,\r\n    component: Dataset,\r\n  },\r\n  {\r\n    path: `/networks/:serverUniqueName/:networkId`,\r\n    component: Network,\r\n  },\r\n  {\r\n    path: `/training`,\r\n    fullName: `Training`,\r\n    component: Training,\r\n    exact: true,\r\n    icon: MdSchool,\r\n    customRightIcon: <TrainingIndicator />,\r\n    sidebarId: `trainingHint`,\r\n  },\r\n  {\r\n    path: `/training/:serverUniqueName/:networkId`,\r\n    component: TrainingProgress,\r\n  },\r\n  {\r\n    path: `/startTraining`,\r\n    component: StartTraining,\r\n    exact: true,\r\n  },\r\n];\r\n\r\nconst AppWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  background: ${(props) => props.background};\r\n  color: ${(props) => props.textcolor};\r\n`;\r\n\r\nconst SideAndScreens = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-grow: 1;\r\n  flex-shrink: 1;\r\n  overflow: auto;\r\n`;\r\n\r\nconst ScreenSwitcher = styled.div`\r\n  flex-shrink: 1;\r\n  flex-grow: 1;\r\n  height: 100%;\r\n  overflow: auto;\r\n`;\r\n\r\nfunction App({ colors }) {\r\n  return (\r\n    <Router>\r\n      <AppWrapper {...colors}>\r\n        <HintList\r\n          hintArray={[\r\n            { text: `Let's start by creating a network`, domId: `hint0` },\r\n            {\r\n              text: `Type in the name of your network and hit \"create network\"`,\r\n              domId: `createNetworkHint`,\r\n            },\r\n            {\r\n              text: `Click on the training tab to train the network`,\r\n              domId: `trainingHint`,\r\n              disablePadding: true,\r\n            },\r\n            {\r\n              text: `Click on the button, to start training a new network`,\r\n              domId: `trainANetworkHint`,\r\n            },\r\n            {\r\n              domId: `trainingNetworkSelectHint`,\r\n              text: `Open the network selection dialog`,\r\n            },\r\n            {\r\n              domId: `trainingNetworkSelectHintLast`,\r\n              text: `Select the network you just made`,\r\n            },\r\n            {\r\n              domId: `trainingDatasetSelectHint`,\r\n              text: `Open the dataset selection dialog`,\r\n            },\r\n            {\r\n              domId: `trainingDatasetSelectHintFirst`,\r\n              text: `Select the provided dataset`,\r\n            },\r\n            {\r\n              domId: `startTrainingHint`,\r\n              text: `Click this button to start training`,\r\n              forceDontFlipY: true,\r\n            },\r\n            {\r\n              domId: `hintTrainingFirst`,\r\n              text: `A training instance has been created! Click on it, to see the progress`,\r\n            },\r\n            {\r\n              domId: `networksHint`,\r\n              text: `While your network is training, you can also try playing with the already created network`,\r\n              disablePadding: true,\r\n            },\r\n            {\r\n              domId: `firstNetworkHint`,\r\n              text: `Select the pre-trained network`,\r\n            },\r\n            {\r\n              domId: `datasetSelectHint`,\r\n              text: `Here you can select from which dataset you want the image to be taken. You can select \"c10-train\".`,\r\n              forceFlipY: true,\r\n            },\r\n            {\r\n              domId: `imageIndexHint`,\r\n              text: `Here you can select the index of the image you want to classify from dataset`,\r\n              forceFlipY: true,\r\n            },\r\n          ]}\r\n        />\r\n        <TopBar />\r\n        <SideAndScreens>\r\n          <Sidebar screens={screens} />\r\n          <ScreenSwitcher>\r\n            {screens.map((screen) => (\r\n              <Route\r\n                path={screen.path}\r\n                component={screen.component}\r\n                exact={screen.exact}\r\n              />\r\n            ))}\r\n          </ScreenSwitcher>\r\n        </SideAndScreens>\r\n      </AppWrapper>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default connect((state) => state)(App);\r\n","import { SET_COLOR } from \"../actions/colors\";\r\n\r\nconst darkMode = localStorage.getItem(\"darkMode\");\r\n\r\nconst defaultState = {\r\n  background: darkMode ? `#121212` : `#f4f8f9`,\r\n  topbarbackground: darkMode ? `#121212` : `white`,\r\n  backgroundbyelevation: (e) =>\r\n    darkMode ? `rgb(${18 + e * 20},${18 + e * 20},${18 + e * 20})` : `white`,\r\n  primarycolor: `#2261c6`,\r\n  primarytextcolor: `white`,\r\n  errorcolor: `#e74c3c`,\r\n  textcolor: darkMode ? `white` : `black`,\r\n  accenttextcolor: darkMode ? `white` : `black`,\r\n  subaccenttextcolor: darkMode ? `white` : `black`,\r\n  darkMode,\r\n};\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case SET_COLOR:\r\n      return Object.assign({}, state, { [action.property]: action.value });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { SET_STRUCT_PROP } from \"../actions/structure\";\r\n\r\nconst defaultState = {\r\n  sidebarwidth: `250px`,\r\n  topbarheight: `50px`,\r\n};\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case SET_STRUCT_PROP:\r\n      return Object.assign({}, state, { [action.property]: action.value });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  FETCH_NETWORKS_REQUEST,\r\n  FETCH_NETWORKS_SUCCESS,\r\n  FETCH_NETWORKS_ERROR,\r\n  UNLOAD_NETWORKS,\r\n  NEW_NETWORK_REQUEST,\r\n  NEW_NETWORK_SUCCESS,\r\n  NEW_NETWORK_ERROR,\r\n  FETCH_NETWORK_REQUEST,\r\n  FETCH_NETWORK_SUCCESS,\r\n  FETCH_NETWORK_ERROR,\r\n  SET_NETWORK_SUCCESS,\r\n} from \"../actions/networks\";\r\n\r\nimport { NetworkArchitectures } from \"../../CNN-js/cnn\";\r\n\r\nconst defaultState = {\r\n  networks: {},\r\n  isLoading: {},\r\n  error: {},\r\n  networkLoading: {},\r\n  networkError: {},\r\n  networkArchitectures: { LeNet5Color: NetworkArchitectures.LeNet5Color },\r\n};\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case FETCH_NETWORK_REQUEST:\r\n      return Object.assign({}, state, {\r\n        networkLoading: Object.assign({}, state.networkLoading, {\r\n          [action.server.uniqueName + action.networkId]: true,\r\n        }),\r\n        networkError: Object.assign({}, state.networkError, {\r\n          [action.server.uniqueName + action.networkId]: undefined,\r\n        }),\r\n      });\r\n    case FETCH_NETWORK_SUCCESS:\r\n      return Object.assign({}, state, {\r\n        networkLoading: Object.assign({}, state.networkLoading, {\r\n          [action.server.uniqueName + action.networkId]: false,\r\n        }),\r\n        networkError: Object.assign({}, state.networkError, {\r\n          [action.server.uniqueName + action.networkId]: undefined,\r\n        }),\r\n        networks: Object.assign(state.networks, {\r\n          [action.server.uniqueName]: Object.assign(\r\n            {},\r\n            state.networks[action.server.uniqueName],\r\n            { [action.networkId]: action.network }\r\n          ),\r\n        }),\r\n      });\r\n    case SET_NETWORK_SUCCESS:\r\n      return Object.assign({}, state, {\r\n        networks: Object.assign({}, state.networks, {\r\n          [action.server.uniqueName]: Object.assign(\r\n            {},\r\n            state.networks[action.server.uniqueName],\r\n            {\r\n              [action.network.id]: action.network,\r\n            }\r\n          ),\r\n        }),\r\n      });\r\n    case FETCH_NETWORK_ERROR:\r\n      return Object.assign({}, state, {\r\n        networkLoading: Object.assign({}, state.networkLoading, {\r\n          [action.server.uniqueName + action.networkId]: false,\r\n        }),\r\n        networkError: Object.assign({}, state.networkError, {\r\n          [action.server.uniqueName + action.networkId]: action.err,\r\n        }),\r\n      });\r\n    case NEW_NETWORK_REQUEST:\r\n      return Object.assign({}, state, { isLoading: true });\r\n    case NEW_NETWORK_SUCCESS:\r\n      return Object.assign({}, state, { isLoading: false });\r\n    case NEW_NETWORK_ERROR:\r\n      return Object.assign({}, state, { error: action.error });\r\n    case FETCH_NETWORKS_REQUEST:\r\n      return Object.assign({}, state, {\r\n        networks: Object.assign({}, state.networks),\r\n        isLoading: Object.assign({}, state.isLoading, {\r\n          [action.server.uniqueName]: true,\r\n        }),\r\n        error: Object.assign({}, state.error, {\r\n          [action.server.uniqueName]: false,\r\n        }),\r\n        networkArchitectures: Object.assign({}, state.networkArchitectures),\r\n      });\r\n    case FETCH_NETWORKS_SUCCESS:\r\n      return Object.assign({}, state, {\r\n        networks: Object.assign({}, state.networks, {\r\n          [action.server.uniqueName]: action.networks,\r\n        }),\r\n        isLoading: Object.assign({}, state.isLoading, {\r\n          [action.server.uniqueName]: false,\r\n        }),\r\n        error: Object.assign({}, state.error, {\r\n          [action.server.uniqueName]: false,\r\n        }),\r\n        networkArchitectures: Object.assign({}, state.networkArchitectures),\r\n      });\r\n    case FETCH_NETWORKS_ERROR:\r\n      return Object.assign({}, state, {\r\n        networks: Object.assign({}, state.networks),\r\n        isLoading: Object.assign({}, state.isLoading, {\r\n          [action.server.uniqueName]: false,\r\n        }),\r\n        error: Object.assign({}, state.error, {\r\n          [action.server.uniqueName]: action.error,\r\n        }),\r\n        networkArchitectures: Object.assign({}, state.networkArchitectures),\r\n      });\r\n    case UNLOAD_NETWORKS:\r\n      return Object.assign({}, state, {\r\n        networks: Object.assign({}, state.networks, {\r\n          [action.server.uniqueName]: undefined,\r\n        }),\r\n        isLoading: Object.assign({}, state.isLoading, {\r\n          [action.server.uniqueName]: false,\r\n        }),\r\n        error: Object.assign({}, state.error, {\r\n          [action.server.uniqueName]: false,\r\n        }),\r\n        networkArchitectures: Object.assign({}, state.networkArchitectures),\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  FETCH_SERVER_LOGIN_REQUEST,\r\n  FETCH_SERVER_LOGIN_SUCCESS,\r\n  FETCH_SERVER_LOGIN_ERROR,\r\n} from \"../actions/servers\";\r\n\r\nlet savedServers_array = localStorage.getItem(\"servers_store\");\r\nif (savedServers_array) savedServers_array = JSON.parse(savedServers_array);\r\nconst savedServers = savedServers_array ? {} : null;\r\nif (savedServers_array)\r\n  savedServers_array.forEach((i) => {\r\n    savedServers[i.uniqueName] = i;\r\n  });\r\n\r\nconst defaultState = {\r\n  servers: [\r\n    {\r\n      url: `local`,\r\n      uniqueName: `Local storage`,\r\n      apiToken: `not needed`,\r\n    },\r\n    /*{\r\n      url: `http://localhost:3005`,\r\n      //apiToken: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI0YWY2NDdjNWQ0Yjc5MGJhN2ExNGIzZDZjOTY2ZTY0ZTM2ZTAyMzRiM2U4YzY0NmZlYzZjZjk5YzdhNmYyNDU5IiwiaWF0IjoxNTgyNTc3MzE1LCJleHAiOjE1ODMxODIxMTV9.EsPP7BQO8R4aKCjwxCN_xspVjqKQ3BR5BwJrRHL7GrA`,\r\n      uniqueName: `Local server`,\r\n      isLoading: false,\r\n      error: false,\r\n      apiToken:\r\n        savedServers &&\r\n        savedServers[`Local server`] &&\r\n        savedServers[`Local server`].apiToken\r\n    },\r\n    {\r\n      url: `http://localhost:3005`,\r\n      //apiToken: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI0YWY2NDdjNWQ0Yjc5MGJhN2ExNGIzZDZjOTY2ZTY0ZTM2ZTAyMzRiM2U4YzY0NmZlYzZjZjk5YzdhNmYyNDU5IiwiaWF0IjoxNTgyNTc3MzE1LCJleHAiOjE1ODMxODIxMTV9.EsPP7BQO8R4aKCjwxCN_xspVjqKQ3BR5BwJrRHL7GrA`,\r\n      uniqueName: `Local server1`,\r\n      isLoading: false,\r\n      error: false,\r\n      apiToken:\r\n        savedServers &&\r\n        savedServers[`Local server1`] &&\r\n        savedServers[`Local server1`].apiToken\r\n    }*/\r\n  ],\r\n};\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case FETCH_SERVER_LOGIN_REQUEST:\r\n      return {\r\n        servers: state.servers.map((server) =>\r\n          Object.assign(\r\n            {},\r\n            server,\r\n            action.server.uniqueName === server.uniqueName\r\n              ? { isLoading: true, error: false }\r\n              : {}\r\n          )\r\n        ),\r\n      };\r\n    case FETCH_SERVER_LOGIN_SUCCESS:\r\n      const servers_store = state.servers.map((server) =>\r\n        Object.assign(\r\n          {},\r\n          server,\r\n          action.server.uniqueName === server.uniqueName\r\n            ? { isLoading: false, error: false, apiToken: action.apiToken }\r\n            : {}\r\n        )\r\n      );\r\n      localStorage.setItem(\"servers_store\", JSON.stringify(servers_store));\r\n      return {\r\n        servers: servers_store,\r\n      };\r\n    case FETCH_SERVER_LOGIN_ERROR:\r\n      return {\r\n        servers: state.servers.map((server) =>\r\n          Object.assign(\r\n            {},\r\n            server,\r\n            action.server.uniqueName === server.uniqueName\r\n              ? { isLoading: false, error: action.error }\r\n              : {}\r\n          )\r\n        ),\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  START_TRAINING,\r\n  STOP_TRAINING,\r\n  TRAINING_PROGRESS,\r\n} from \"../actions/training\";\r\n\r\nconst defaultState = { trained: [] };\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case START_TRAINING:\r\n      return Object.assign({}, state, {\r\n        [action.server.uniqueName]: Object.assign(\r\n          {},\r\n          state[action.server.uniqueName],\r\n          {\r\n            [action.network.id]: {\r\n              dataset: Object.assign({}, action.dataset, { data: undefined }),\r\n              epochs: action.epochs,\r\n              epoch: `initializing`,\r\n              learningRate: action.learningRate,\r\n              learningRateArr: [],\r\n              errArr: [],\r\n              accuracyArr: [],\r\n              trainingInstance: action.trainingInstance,\r\n            },\r\n          }\r\n        ),\r\n      });\r\n    case STOP_TRAINING:\r\n      const serverCopy = Object.assign({}, state[action.server.uniqueName]);\r\n      const a = Object.assign(serverCopy[action.network.id], {\r\n        server: action.server.uniqueName,\r\n        network: action.network.id,\r\n      });\r\n      delete serverCopy[action.network.id];\r\n      return Object.assign({}, state, {\r\n        [action.server.uniqueName]: serverCopy,\r\n        trained: state.trained.concat([a]),\r\n      });\r\n    case TRAINING_PROGRESS:\r\n      return Object.assign({}, state, {\r\n        [action.server.uniqueName]: Object.assign(\r\n          {},\r\n          state[action.server.uniqueName],\r\n          {\r\n            [action.network.id]: {\r\n              epoch: action.epoch,\r\n              epochs: action.epochs,\r\n              err: action.err,\r\n              accuracy: action.accuracy,\r\n              learningRate: action.learningRate,\r\n              dataset: Object.assign(\r\n                {},\r\n                state[action.server.uniqueName][action.network.id].dataset,\r\n                { data: undefined }\r\n              ),\r\n              learningRateArr: Object.assign(\r\n                [],\r\n                state[action.server.uniqueName][action.network.id]\r\n                  .learningRateArr,\r\n                {\r\n                  [action.epoch]: action.learningRate * -1,\r\n                }\r\n              ),\r\n              errArr: Object.assign(\r\n                [],\r\n                state[action.server.uniqueName][action.network.id].errArr,\r\n                {\r\n                  [action.epoch]: action.err,\r\n                }\r\n              ),\r\n              accuracyArr: Object.assign(\r\n                [],\r\n                state[action.server.uniqueName][action.network.id].accuracyArr,\r\n                {\r\n                  [action.epoch]: action.accuracy,\r\n                }\r\n              ),\r\n              trainingInstance:\r\n                state[action.server.uniqueName][action.network.id]\r\n                  .trainingInstance,\r\n            },\r\n          }\r\n        ),\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  FETCH_REDUCED_DATASETS_REQUEST,\r\n  FETCH_REDUCED_DATASETS_SUCCESS,\r\n  FETCH_REDUCED_DATASETS_ERROR,\r\n  FETCH_DATASET_REQUEST,\r\n  FETCH_DATASET_SUCCESS,\r\n  FETCH_DATASET_ERROR,\r\n  NEW_DATASET_REQUEST,\r\n  NEW_DATASET_SUCCESS,\r\n  NEW_DATASET_ERROR,\r\n} from \"../actions/datasets\";\r\n\r\nconst defaultState = {\r\n  datasets: {},\r\n  datasetsLoading: {},\r\n  serverDatasetsLoading: {},\r\n  serverDatasetsError: {},\r\n  datasetsError: {},\r\n};\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case FETCH_REDUCED_DATASETS_REQUEST:\r\n      return {\r\n        datasets: state.datasets,\r\n        datasetsLoading: state.datasetsLoading,\r\n        serverDatasetsLoading: Object.assign({}, state.serverDatasetsLoading, {\r\n          [action.server.uniqueName]: true,\r\n        }),\r\n        serverDatasetsError: Object.assign({}, state.serverDatasetsError, {\r\n          [action.server.uniqueName]: undefined,\r\n        }),\r\n        datasetsError: state.datasetsError,\r\n      };\r\n    case FETCH_REDUCED_DATASETS_SUCCESS:\r\n      return {\r\n        datasets: Object.assign(state.datasets, {\r\n          [action.server.uniqueName]: Object.assign(\r\n            {},\r\n            state.datasets[action.server.uniqueName],\r\n            action.datasets\r\n          ),\r\n        }),\r\n        datasetsLoading: state.datasetsLoading,\r\n        serverDatasetsLoading: Object.assign({}, state.serverDatasetsLoading, {\r\n          [action.server.uniqueName]: undefined,\r\n        }),\r\n        serverDatasetsError: Object.assign({}, state.serverDatasetsError, {\r\n          [action.server.uniqueName]: undefined,\r\n        }),\r\n        datasetsError: state.datasetsError,\r\n      };\r\n    case FETCH_REDUCED_DATASETS_ERROR:\r\n      return {\r\n        datasets: state.datasets,\r\n        datasetsLoading: state.datasetsLoading,\r\n        serverDatasetsLoading: Object.assign({}, state.serverDatasetsLoading, {\r\n          [action.server.uniqueName]: undefined,\r\n        }),\r\n        serverDatasetsError: Object.assign({}, state.serverDatasetsError, {\r\n          [action.server.uniqueName]: action.err,\r\n        }),\r\n        datasetsError: state.datasetsError,\r\n      };\r\n\r\n    case FETCH_DATASET_REQUEST:\r\n      return {\r\n        datasets: state.datasets,\r\n        datasetsLoading: Object.assign({}, state.datasetsError, {\r\n          [action.datasetId]: undefined,\r\n        }),\r\n        serverDatasetsLoading: state.serverDatasetsLoading,\r\n        serverDatasetsError: state.serverDatasetsError,\r\n        datasetsError: Object.assign({}, state.datasetsError, {\r\n          [action.datasetId]: undefined,\r\n        }),\r\n      };\r\n    case FETCH_DATASET_SUCCESS:\r\n      return {\r\n        datasets: Object.assign(state.datasets, {\r\n          [action.server.uniqueName]: Object.assign(\r\n            {},\r\n            state.datasets[action.server.uniqueName],\r\n            {\r\n              [action.dataset.id]: action.dataset,\r\n            }\r\n          ),\r\n        }),\r\n        datasetsLoading: Object.assign({}, state.datasetsError, {\r\n          [action.dataset.id]: undefined,\r\n        }),\r\n        serverDatasetsLoading: state.serverDatasetsLoading,\r\n        serverDatasetsError: state.serverDatasetsError,\r\n        datasetsError: Object.assign({}, state.datasetsError, {\r\n          [action.dataset.id]: undefined,\r\n        }),\r\n      };\r\n    case FETCH_DATASET_ERROR:\r\n      return {\r\n        datasets: state.datasets,\r\n        datasetsLoading: Object.assign({}, state.datasetsError, {\r\n          [action.datasetId]: undefined,\r\n        }),\r\n        serverDatasetsLoading: state.serverDatasetsLoading,\r\n        serverDatasetsError: state.serverDatasetsError,\r\n        datasetsError: Object.assign({}, state.datasetsError, {\r\n          [action.datasetId]: action.err,\r\n        }),\r\n      };\r\n    // case NEW_DATASET_REQUEST:\r\n    //   return\r\n    case NEW_DATASET_SUCCESS:\r\n      return {\r\n        datasets: Object.assign(state.datasets, {\r\n          [action.server.uniqueName]: Object.assign(\r\n            {},\r\n            state.datasets[action.server.uniqueName],\r\n            {\r\n              [action.dataset.id]: action.dataset,\r\n            }\r\n          ),\r\n        }),\r\n        datasetsLoading: state.datasetsError,\r\n        serverDatasetsLoading: state.serverDatasetsLoading,\r\n        serverDatasetsError: state.serverDatasetsError,\r\n        datasetsError: state.datasetsError,\r\n      };\r\n    // case NEW_DATASET_ERROR:\r\n    //   return;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\n\r\n// reducers\r\nimport colors from \"./colors\";\r\nimport structure from \"./structure\";\r\nimport networks from \"./networks\";\r\nimport servers from \"./servers\";\r\nimport training from \"./training\";\r\nimport datasets from \"./datasets\";\r\nimport hints from \"./hints\";\r\n\r\nexport default combineReducers({\r\n  colors,\r\n  structure,\r\n  networks,\r\n  servers,\r\n  training,\r\n  datasets,\r\n  hints,\r\n});\r\n","export const SET_COLOR = `SET_COLOR`;\r\n\r\nexport const setColor = (property, value) => ({\r\n  type: SET_COLOR,\r\n  property,\r\n  value\r\n});\r\n","export const SET_STRUCT_PROP = `SET_STRUCT_PROP`;\r\n\r\nexport const setColor = (property, value) => ({\r\n  type: SET_STRUCT_PROP,\r\n  property,\r\n  value\r\n});\r\n","export default (\r\n  state = { hintId: parseInt(localStorage.getItem(\"hintIndex\")) },\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case \"NEXT_HINT\":\r\n      localStorage.setItem(\"hintIndex\", state.hintId + 1);\r\n      return { hintId: state.hintId + 1 };\r\n    case \"SET_HINT\":\r\n      localStorage.setItem(\"hintIndex\", action.hintId);\r\n      return { hintId: action.hintId };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\n// components\r\nimport App from \"./components/App.jsx\";\r\n\r\n// styles\r\nimport \"./index.css\";\r\n\r\n// redux\r\nimport { Provider } from \"react-redux\";\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport logger from \"redux-logger\";\r\n\r\n// reducers\r\nimport rootReducer from \"./redux/reducers\";\r\n\r\n// other\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeWithDevTools(applyMiddleware(logger))\r\n);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/cnnjs-logo.09950e4d.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow.f51444e2.png\";","const Jimp = require(\"jimp\");\r\n\r\n/**\r\n *\r\n * @param {*} image image URL, buffer, path...\r\n * @param {Object} sizeDim output Array size {x:xSize, y:ySize, z:zSize}\r\n *      x and y are mandatory, z is optional and can be 3 or 1, default is 3\r\n *\r\n */\r\nconst imageToArray = (imageData, sizeDim) =>\r\n  new Promise((resolve, reject) => {\r\n    Jimp.read(imageData)\r\n      .then(image => {\r\n        let resizedImage = resizeImage(image, sizeDim);\r\n\r\n        let out;\r\n        if (!sizeDim.z || sizeDim.z === 3) {\r\n          out = [[], [], []];\r\n          for (let j = 0; j < sizeDim.y; j++) {\r\n            out[0][j] = [];\r\n            out[1][j] = [];\r\n            out[2][j] = [];\r\n            for (let k = 0; k < sizeDim.x; k++) {\r\n              const pixel = Jimp.intToRGBA(resizedImage.getPixelColor(k, j));\r\n\r\n              out[0][j][k] = pixel.r;\r\n              out[1][j][k] = pixel.g;\r\n              out[2][j][k] = pixel.b;\r\n            }\r\n          }\r\n        } else {\r\n          out = [[]];\r\n          for (let j = 0; j < sizeDim.y; j++) {\r\n            out[0][j] = [];\r\n            for (let k = 0; k < sizeDim.x; k++) {\r\n              const pixel = Jimp.intToRGBA(resizedImage.getPixelColor(k, j));\r\n              out[0][j][k] = pixel.r;\r\n            }\r\n          }\r\n        }\r\n\r\n        resolve(out);\r\n      })\r\n      .catch(e => reject(e));\r\n  });\r\n\r\n/**\r\n *\r\n * @param {*} array 3d array\r\n * @param {*} writeTo optional, path to write to\r\n * @returns image buffer\r\n */\r\nconst arrayToImage = (array, writeTo) => {\r\n  return new Promise(\r\n    (resolve, reject) =>\r\n      new Jimp(array[0][0].length, array[0].length, (err, image) => {\r\n        for (let y = 0; y < array[0].length; y++) {\r\n          for (let x = 0; x < array[0][y].length; x++) {\r\n            if (array.length === 1) {\r\n              image.setPixelColor(\r\n                Jimp.rgbaToInt(\r\n                  array[0][y][x],\r\n                  array[0][y][x],\r\n                  array[0][y][x],\r\n                  1,\r\n                ),\r\n                x,\r\n                y,\r\n              );\r\n            } else {\r\n              image.setPixelColor(\r\n                Jimp.rgbaToInt(\r\n                  array[0][y][x],\r\n                  array[1][y][x],\r\n                  array[2][y][x],\r\n                  1,\r\n                ),\r\n                x,\r\n                y,\r\n              );\r\n            }\r\n          }\r\n        }\r\n\r\n        if (writeTo) {\r\n          image.write(writeTo, () =>\r\n            image.getBuffer(Jimp.AUTO, b => resolve(b)),\r\n          );\r\n        } else {\r\n          image.getBuffer(Jimp.AUTO, b => resolve(b));\r\n        }\r\n      }),\r\n  );\r\n};\r\n\r\nconst resizeImage = (image, sizeDim) => {\r\n  if (sizeDim.z) {\r\n    if (sizeDim.z === 1) {\r\n      return resizeImage(\r\n        image.greyscale(),\r\n        Object.assign({}, sizeDim, {z: undefined}),\r\n      );\r\n    } else {\r\n      return resizeImage(image, Object.assign({}, sizeDim, {z: undefined}));\r\n    }\r\n  } else {\r\n    return image.resize(sizeDim.x, sizeDim.y);\r\n  }\r\n};\r\n\r\nmodule.exports = {\r\n  imageToArray,\r\n  resizeImage,\r\n  arrayToImage,\r\n};\r\n"],"sourceRoot":""}